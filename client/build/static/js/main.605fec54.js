/*! For license information please see main.605fec54.js.LICENSE.txt */
!function(){var e={76:function(e,t,n){"use strict";n.d(t,{Z:function(){return ie}});var r=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,a=String.fromCharCode,o=Object.assign;function s(e){return e.trim()}function u(e,t,n){return e.replace(t,n)}function c(e,t){return e.indexOf(t)}function l(e,t){return 0|e.charCodeAt(t)}function h(e,t,n){return e.slice(t,n)}function f(e){return e.length}function d(e){return e.length}function p(e,t){return t.push(e),e}var v=1,y=1,m=0,g=0,k=0,b="";function _(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:v,column:y,length:o,return:""}}function w(e,t){return o(_("",null,null,"",null,null,0),e,{length:-e.length},t)}function x(){return k=g>0?l(b,--g):0,y--,10===k&&(y=1,v--),k}function S(){return k=g<m?l(b,g++):0,y++,10===k&&(y=1,v++),k}function T(){return l(b,g)}function I(){return g}function E(e,t){return h(b,e,t)}function C(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function R(e){return v=y=1,m=f(b=e),g=0,[]}function N(e){return b="",e}function P(e){return s(E(g-1,D(91===e?e+2:40===e?e+1:e)))}function A(e){for(;(k=T())&&k<33;)S();return C(e)>2||C(k)>3?"":" "}function O(e,t){for(;--t&&S()&&!(k<48||k>102||k>57&&k<65||k>70&&k<97););return E(e,I()+(t<6&&32==T()&&32==S()))}function D(e){for(;S();)switch(k){case e:return g;case 34:case 39:34!==e&&39!==e&&D(k);break;case 40:41===e&&D(e);break;case 92:S()}return g}function L(e,t){for(;S()&&e+k!==57&&(e+k!==84||47!==T()););return"/*"+E(t,g-1)+"*"+a(47===e?e:S())}function M(e){for(;!C(T());)S();return E(e,g)}var F="-ms-",U="-moz-",j="-webkit-",V="comm",z="rule",q="decl",B="@keyframes";function Z(e,t){for(var n="",r=d(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function W(e,t,n,r){switch(e.type){case"@import":case q:return e.return=e.return||e.value;case V:return"";case B:return e.return=e.value+"{"+Z(e.children,r)+"}";case z:e.value=e.props.join(",")}return f(n=Z(e.children,r))?e.return=e.value+"{"+n+"}":""}function H(e,t){switch(function(e,t){return(((t<<2^l(e,0))<<2^l(e,1))<<2^l(e,2))<<2^l(e,3)}(e,t)){case 5103:return j+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return j+e+U+e+F+e+e;case 6828:case 4268:return j+e+F+e+e;case 6165:return j+e+F+"flex-"+e+e;case 5187:return j+e+u(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return j+e+F+"flex-item-"+u(e,/flex-|-self/,"")+e;case 4675:return j+e+F+"flex-line-pack"+u(e,/align-content|flex-|-self/,"")+e;case 5548:return j+e+F+u(e,"shrink","negative")+e;case 5292:return j+e+F+u(e,"basis","preferred-size")+e;case 6060:return j+"box-"+u(e,"-grow","")+j+e+F+u(e,"grow","positive")+e;case 4554:return j+u(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return u(u(u(e,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),e,"")+e;case 5495:case 3959:return u(e,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return u(u(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+e+e;case 4095:case 3583:case 4068:case 2532:return u(e,/(.+)-inline(.+)/,j+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(f(e)-1-t>6)switch(l(e,t+1)){case 109:if(45!==l(e,t+4))break;case 102:return u(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+U+(108==l(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?H(u(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==l(e,t+1))break;case 6444:switch(l(e,f(e)-3-(~c(e,"!important")&&10))){case 107:return u(e,":",":"+j)+e;case 101:return u(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===l(e,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+F+"$2box$3")+e}break;case 5936:switch(l(e,t+11)){case 114:return j+e+F+u(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return j+e+F+u(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return j+e+F+u(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return j+e+F+e+e}return e}function K(e){return N(G("",null,null,null,[""],e=R(e),0,[0],e))}function G(e,t,n,r,i,o,s,l,h){for(var d=0,v=0,y=s,m=0,g=0,k=0,b=1,_=1,w=1,E=0,C="",R=i,N=o,D=r,F=C;_;)switch(k=E,E=S()){case 40:if(108!=k&&58==F.charCodeAt(y-1)){-1!=c(F+=u(P(E),"&","&\f"),"&\f")&&(w=-1);break}case 34:case 39:case 91:F+=P(E);break;case 9:case 10:case 13:case 32:F+=A(k);break;case 92:F+=O(I()-1,7);continue;case 47:switch(T()){case 42:case 47:p($(L(S(),I()),t,n),h);break;default:F+="/"}break;case 123*b:l[d++]=f(F)*w;case 125*b:case 59:case 0:switch(E){case 0:case 125:_=0;case 59+v:g>0&&f(F)-y&&p(g>32?Y(F+";",r,n,y-1):Y(u(F," ","")+";",r,n,y-2),h);break;case 59:F+=";";default:if(p(D=Q(F,t,n,d,v,i,l,C,R=[],N=[],y),o),123===E)if(0===v)G(F,t,D,D,R,o,y,l,N);else switch(m){case 100:case 109:case 115:G(e,D,D,r&&p(Q(e,D,D,0,0,i,l,C,i,R=[],y),N),i,N,y,l,r?R:N);break;default:G(F,D,D,D,[""],N,0,l,N)}}d=v=g=0,b=w=1,C=F="",y=s;break;case 58:y=1+f(F),g=k;default:if(b<1)if(123==E)--b;else if(125==E&&0==b++&&125==x())continue;switch(F+=a(E),E*b){case 38:w=v>0?1:(F+="\f",-1);break;case 44:l[d++]=(f(F)-1)*w,w=1;break;case 64:45===T()&&(F+=P(S())),m=T(),v=y=f(C=F+=M(I())),E++;break;case 45:45===k&&2==f(F)&&(b=0)}}return o}function Q(e,t,n,r,a,o,c,l,f,p,v){for(var y=a-1,m=0===a?o:[""],g=d(m),k=0,b=0,w=0;k<r;++k)for(var x=0,S=h(e,y+1,y=i(b=c[k])),T=e;x<g;++x)(T=s(b>0?m[x]+" "+S:u(S,/&\f/g,m[x])))&&(f[w++]=T);return _(e,t,n,0===a?z:l,f,p,v)}function $(e,t,n){return _(e,t,n,V,a(k),h(e,2,-2),0)}function Y(e,t,n,r){return _(e,t,n,q,h(e,0,r),h(e,r+1,-1),r)}var X=function(e,t,n){for(var r=0,i=0;r=i,i=T(),38===r&&12===i&&(t[n]=1),!C(i);)S();return E(e,g)},J=function(e,t){return N(function(e,t){var n=-1,r=44;do{switch(C(r)){case 0:38===r&&12===T()&&(t[n]=1),e[n]+=X(g-1,t,n);break;case 2:e[n]+=P(r);break;case 4:if(44===r){e[++n]=58===T()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=a(r)}}while(r=S());return e}(R(e),t))},ee=new WeakMap,te=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ee.get(n))&&!r){ee.set(e,!0);for(var i=[],a=J(t,i),o=n.props,s=0,u=0;s<a.length;s++)for(var c=0;c<o.length;c++,u++)e.props[u]=i[s]?a[s].replace(/&\f/g,o[c]):o[c]+" "+a[s]}}},ne=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},re=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case q:e.return=H(e.value,e.length);break;case B:return Z([w(e,{value:u(e.value,"@","@"+j)})],r);case z:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Z([w(e,{props:[u(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return Z([w(e,{props:[u(t,/:(plac\w+)/,":-webkit-input-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,":-moz-$1")]}),w(e,{props:[u(t,/:(plac\w+)/,F+"input-$1")]})],r)}return""}))}}],ie=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||re;var a,o,s={},u=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;u.push(e)}));var c,l,h=[W,(l=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&l(e)})],f=function(e){var t=d(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}([te,ne].concat(i,h));o=function(e,t,n,r){c=n,Z(K(e?e+"{"+t.styles+"}":t.styles),f),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new r({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return p.sheet.hydrate(u),p}},3782:function(e,t){"use strict";t.Z=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}},1346:function(e,t,n){"use strict";n.d(t,{O:function(){return v}});var r=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},a=n(3782),o=/[A-Z]|^ms/g,s=/_EMO_([^_]+?)_([^]*?)_EMO_/g,u=function(e){return 45===e.charCodeAt(1)},c=function(e){return null!=e&&"boolean"!==typeof e},l=(0,a.Z)((function(e){return u(e)?e:e.replace(o,"-$&").toLowerCase()})),h=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(s,(function(e,t,n){return d={name:t,styles:n,next:d},t}))}return 1===i[e]||u(e)||"number"!==typeof t||0===t?t:t+"px"};function f(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return d={name:n.name,styles:n.styles,next:d},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)d={name:r.name,styles:r.styles,next:d},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=f(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":c(o)&&(r+=l(a)+":"+h(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=f(e,t,o);switch(a){case"animation":case"animationName":r+=l(a)+":"+s+";";break;default:r+=a+"{"+s+"}"}}else for(var u=0;u<o.length;u++)c(o[u])&&(r+=l(a)+":"+h(a,o[u])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=d,a=n(e);return d=i,f(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var d,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var v=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var i=!0,a="";d=void 0;var o=e[0];null==o||void 0===o.raw?(i=!1,a+=f(n,t,o)):a+=o[0];for(var s=1;s<e.length;s++)a+=f(n,t,e[s]),i&&(a+=o[s]);p.lastIndex=0;for(var u,c="";null!==(u=p.exec(a));)c+="-"+u[1];return{name:r(a)+c,styles:a,next:d}}},8326:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),"Chat");t.Z=o},7807:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M11 5.08V2c-5 .5-9 4.81-9 10s4 9.5 9 10v-3.08c-3-.48-6-3.4-6-6.92s3-6.44 6-6.92zM18.97 11H22c-.47-5-4-8.53-9-9v3.08C16 5.51 18.54 8 18.97 11zM13 18.92V22c5-.47 8.53-4 9-9h-3.03c-.43 3-2.97 5.49-5.97 5.92z"}),"DonutLarge");t.Z=o},5436:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"}),"Mic");t.Z=o},2898:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.Z=o},7250:function(e,t,n){"use strict";var r=n(4836);t.Z=void 0;var i=r(n(5649)),a=n(184),o=(0,i.default)((0,a.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");t.Z=o},5649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(1055)},4591:function(e,t,n){"use strict";n.d(t,{Z:function(){return j}});var r=n(7462),i=n(3366),a=n(2466),o=n(5080),s=n(4942);function u(e,t){var n;return(0,r.Z)({toolbar:(n={minHeight:56},(0,s.Z)(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),(0,s.Z)(n,e.up("sm"),{minHeight:64}),n)},t)}var c=n(6189),l=n(2065),h={black:"#000",white:"#fff"},f={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},p={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},v={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},y={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},m={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},g={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},k=["mode","contrastThreshold","tonalOffset"],b={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:h.white,default:h.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},_={text:{primary:h.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:h.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function w(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,l.$n)(e.main,i):"dark"===t&&(e.dark=(0,l._j)(e.main,a)))}function x(e){var t=e.mode,n=void 0===t?"light":t,o=e.contrastThreshold,s=void 0===o?3:o,u=e.tonalOffset,x=void 0===u?.2:u,S=(0,i.Z)(e,k),T=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:y[200],light:y[50],dark:y[400]}:{main:y[700],light:y[400],dark:y[800]}}(n),I=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(n),E=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:p[500],light:p[300],dark:p[700]}:{main:p[700],light:p[400],dark:p[800]}}(n),C=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[400],light:m[300],dark:m[700]}:{main:m[700],light:m[500],dark:m[900]}}(n),R=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:g[400],light:g[300],dark:g[700]}:{main:g[800],light:g[500],dark:g[900]}}(n),N=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:v[400],light:v[300],dark:v[700]}:{main:"#ed6c02",light:v[500],dark:v[900]}}(n);function P(e){return(0,l.mi)(e,_.text.primary)>=s?_.text.primary:b.text.primary}var A=function(e){var t=e.color,n=e.name,i=e.mainShade,a=void 0===i?500:i,o=e.lightShade,s=void 0===o?300:o,u=e.darkShade,l=void 0===u?700:u;if(!(t=(0,r.Z)({},t)).main&&t[a]&&(t.main=t[a]),!t.hasOwnProperty("main"))throw new Error((0,c.Z)(11,n?" (".concat(n,")"):"",a));if("string"!==typeof t.main)throw new Error((0,c.Z)(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return w(t,"light",s,x),w(t,"dark",l,x),t.contrastText||(t.contrastText=P(t.main)),t},O={dark:_,light:b};return(0,a.Z)((0,r.Z)({common:(0,r.Z)({},h),mode:n,primary:A({color:T,name:"primary"}),secondary:A({color:I,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:A({color:E,name:"error"}),warning:A({color:N,name:"warning"}),info:A({color:C,name:"info"}),success:A({color:R,name:"success"}),grey:f,contrastThreshold:s,getContrastText:P,augmentColor:A,tonalOffset:x},O[n]),S)}var S=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var T={textTransform:"uppercase"},I='"Roboto", "Helvetica", "Arial", sans-serif';function E(e,t){var n="function"===typeof t?t(e):t,o=n.fontFamily,s=void 0===o?I:o,u=n.fontSize,c=void 0===u?14:u,l=n.fontWeightLight,h=void 0===l?300:l,f=n.fontWeightRegular,d=void 0===f?400:f,p=n.fontWeightMedium,v=void 0===p?500:p,y=n.fontWeightBold,m=void 0===y?700:y,g=n.htmlFontSize,k=void 0===g?16:g,b=n.allVariants,_=n.pxToRem,w=(0,i.Z)(n,S);var x=c/14,E=_||function(e){return"".concat(e/k*x,"rem")},C=function(e,t,n,i,a){return(0,r.Z)({fontFamily:s,fontWeight:e,fontSize:E(t),lineHeight:n},s===I?{letterSpacing:"".concat((o=i/t,Math.round(1e5*o)/1e5),"em")}:{},a,b);var o},R={h1:C(h,96,1.167,-1.5),h2:C(h,60,1.2,-.5),h3:C(d,48,1.167,0),h4:C(d,34,1.235,.25),h5:C(d,24,1.334,0),h6:C(v,20,1.6,.15),subtitle1:C(d,16,1.75,.15),subtitle2:C(v,14,1.57,.1),body1:C(d,16,1.5,.15),body2:C(d,14,1.43,.15),button:C(v,14,1.75,.4,T),caption:C(d,12,1.66,.4),overline:C(d,12,2.66,1,T)};return(0,a.Z)((0,r.Z)({htmlFontSize:k,pxToRem:E,fontFamily:s,fontSize:c,fontWeightLight:h,fontWeightRegular:d,fontWeightMedium:v,fontWeightBold:m},R),w,{clone:!1})}function C(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var R=["none",C(0,2,1,-1,0,1,1,0,0,1,3,0),C(0,3,1,-2,0,2,2,0,0,1,5,0),C(0,3,3,-2,0,3,4,0,0,1,8,0),C(0,2,4,-1,0,4,5,0,0,1,10,0),C(0,3,5,-1,0,5,8,0,0,1,14,0),C(0,3,5,-1,0,6,10,0,0,1,18,0),C(0,4,5,-2,0,7,10,1,0,2,16,1),C(0,5,5,-3,0,8,10,1,0,3,14,2),C(0,5,6,-3,0,9,12,1,0,3,16,2),C(0,6,6,-3,0,10,14,1,0,4,18,3),C(0,6,7,-4,0,11,15,1,0,4,20,3),C(0,7,8,-4,0,12,17,2,0,5,22,4),C(0,7,8,-4,0,13,19,2,0,5,24,4),C(0,7,9,-4,0,14,21,2,0,5,26,4),C(0,8,9,-5,0,15,22,2,0,6,28,5),C(0,8,10,-5,0,16,24,2,0,6,30,5),C(0,8,11,-5,0,17,26,2,0,6,32,5),C(0,9,11,-5,0,18,28,2,0,7,34,6),C(0,9,12,-6,0,19,29,2,0,7,36,6),C(0,10,13,-6,0,20,31,3,0,8,38,7),C(0,10,13,-6,0,21,33,3,0,8,40,7),C(0,10,14,-6,0,22,35,3,0,8,42,7),C(0,11,14,-7,0,23,36,3,0,9,44,8),C(0,11,15,-7,0,24,38,3,0,9,46,8)],N=["duration","easing","delay"],P={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},A={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function O(e){return"".concat(Math.round(e),"ms")}function D(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function L(e){var t=(0,r.Z)({},P,e.easing),n=(0,r.Z)({},A,e.duration);return(0,r.Z)({getAutoHeightDuration:D,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.duration,o=void 0===a?n.standard:a,s=r.easing,u=void 0===s?t.easeInOut:s,c=r.delay,l=void 0===c?0:c;(0,i.Z)(r,N);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof o?o:O(o)," ").concat(u," ").concat("string"===typeof l?l:O(l))})).join(",")}},e,{easing:t,duration:n})}var M={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,s=e.palette,c=void 0===s?{}:s,l=e.transitions,h=void 0===l?{}:l,f=e.typography,d=void 0===f?{}:f,p=(0,i.Z)(e,F),v=x(c),y=(0,o.Z)(e),m=(0,a.Z)(y,{mixins:u(y.breakpoints,n),palette:v,shadows:R.slice(),typography:E(v,d),transitions:L(h),zIndex:(0,r.Z)({},M)});m=(0,a.Z)(m,p);for(var g=arguments.length,k=new Array(g>1?g-1:0),b=1;b<g;b++)k[b-1]=arguments[b];return m=k.reduce((function(e,t){return(0,a.Z)(e,t)}),m)}var j=U()},4012:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Be},FO:function(){return ze}});var r=n(3433),i=n(9439),a=n(7462),o=n(3366),s=n(2791),u=n.t(s,2),c=n(3782),l=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=(0,c.Z)((function(e){return l.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),f=n(76),d=n(1346),p=(0,s.createContext)("undefined"!==typeof HTMLElement?(0,f.Z)({key:"css"}):null);p.Provider;var v=function(e){return(0,s.forwardRef)((function(t,n){var r=(0,s.useContext)(p);return e(t,r,n)}))},y=(0,s.createContext)({});u.useInsertionEffect&&u.useInsertionEffect;function m(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var g=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},k=h,b=function(e){return"theme"!==e},_=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?k:b},w=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},x=u.useInsertionEffect?u.useInsertionEffect:function(e){e()};var S=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;g(t,n,r);var i;i=function(){return function(e,t,n){g(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)},x(i);return null},T=function e(t,n){var r,i,o=t.__emotion_real===t,u=o&&t.__emotion_base||t;void 0!==n&&(r=n.label,i=n.target);var c=w(t,n,o),l=c||_(u),h=!l("as");return function(){var f=arguments,p=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&p.push("label:"+r+";"),null==f[0]||void 0===f[0].raw)p.push.apply(p,f);else{0,p.push(f[0][0]);for(var g=f.length,k=1;k<g;k++)p.push(f[k],f[0][k])}var b=v((function(e,t,n){var r=h&&e.as||u,a="",o=[],f=e;if(null==e.theme){for(var v in f={},e)f[v]=e[v];f.theme=(0,s.useContext)(y)}"string"===typeof e.className?a=m(t.registered,o,e.className):null!=e.className&&(a=e.className+" ");var g=(0,d.O)(p.concat(o),t.registered,f);a+=t.key+"-"+g.name,void 0!==i&&(a+=" "+i);var k=h&&void 0===c?_(r):l,b={};for(var w in e)h&&"as"===w||k(w)&&(b[w]=e[w]);return b.className=a,b.ref=n,(0,s.createElement)(s.Fragment,null,(0,s.createElement)(S,{cache:t,serialized:g,isStringTag:"string"===typeof r}),(0,s.createElement)(r,b))}));return b.displayName=void 0!==r?r:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",b.defaultProps=t.defaultProps,b.__emotion_real=b,b.__emotion_base=u,b.__emotion_styles=p,b.__emotion_forwardProp=c,Object.defineProperty(b,"toString",{value:function(){return"."+i}}),b.withComponent=function(t,r){return e(t,(0,a.Z)({},n,r,{shouldForwardProp:w(b,r,!0)})).apply(void 0,p)},b}},I=T.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){I[e]=I(e)}));var E=I;function C(e,t){return E(e,t)}var R=n(5080),N=n(7312),P=["variant"];function A(e){return 0===e.length}function O(e){var t=e.variant,n=(0,o.Z)(e,P),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?A(r)?e[t]:(0,N.Z)(e[t]):"".concat(A(r)?t:(0,N.Z)(t)).concat((0,N.Z)(e[t].toString()))})),r}var D=n(4942),L=n(8247),M=n(8529);var F=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?(0,L.Z)(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i},U=n(5682),j=n(1184);function V(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var z=(0,M.Z)({prop:"border",themeKey:"borders",transform:V}),q=(0,M.Z)({prop:"borderTop",themeKey:"borders",transform:V}),B=(0,M.Z)({prop:"borderRight",themeKey:"borders",transform:V}),Z=(0,M.Z)({prop:"borderBottom",themeKey:"borders",transform:V}),W=(0,M.Z)({prop:"borderLeft",themeKey:"borders",transform:V}),H=(0,M.Z)({prop:"borderColor",themeKey:"palette"}),K=(0,M.Z)({prop:"borderTopColor",themeKey:"palette"}),G=(0,M.Z)({prop:"borderRightColor",themeKey:"palette"}),Q=(0,M.Z)({prop:"borderBottomColor",themeKey:"palette"}),$=(0,M.Z)({prop:"borderLeftColor",themeKey:"palette"}),Y=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=(0,U.eI)(e.theme,"shape.borderRadius",4,"borderRadius");return(0,j.k9)(e,e.borderRadius,(function(e){return{borderRadius:(0,U.NA)(t,e)}}))}return null};Y.propTypes={},Y.filterProps=["borderRadius"];var X=F(z,q,B,Z,W,H,K,G,Q,$,Y),J=F((0,M.Z)({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),(0,M.Z)({prop:"display"}),(0,M.Z)({prop:"overflow"}),(0,M.Z)({prop:"textOverflow"}),(0,M.Z)({prop:"visibility"}),(0,M.Z)({prop:"whiteSpace"})),ee=F((0,M.Z)({prop:"flexBasis"}),(0,M.Z)({prop:"flexDirection"}),(0,M.Z)({prop:"flexWrap"}),(0,M.Z)({prop:"justifyContent"}),(0,M.Z)({prop:"alignItems"}),(0,M.Z)({prop:"alignContent"}),(0,M.Z)({prop:"order"}),(0,M.Z)({prop:"flex"}),(0,M.Z)({prop:"flexGrow"}),(0,M.Z)({prop:"flexShrink"}),(0,M.Z)({prop:"alignSelf"}),(0,M.Z)({prop:"justifyItems"}),(0,M.Z)({prop:"justifySelf"})),te=function(e){if(void 0!==e.gap&&null!==e.gap){var t=(0,U.eI)(e.theme,"spacing",8,"gap");return(0,j.k9)(e,e.gap,(function(e){return{gap:(0,U.NA)(t,e)}}))}return null};te.propTypes={},te.filterProps=["gap"];var ne=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=(0,U.eI)(e.theme,"spacing",8,"columnGap");return(0,j.k9)(e,e.columnGap,(function(e){return{columnGap:(0,U.NA)(t,e)}}))}return null};ne.propTypes={},ne.filterProps=["columnGap"];var re=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=(0,U.eI)(e.theme,"spacing",8,"rowGap");return(0,j.k9)(e,e.rowGap,(function(e){return{rowGap:(0,U.NA)(t,e)}}))}return null};re.propTypes={},re.filterProps=["rowGap"];var ie=F(te,ne,re,(0,M.Z)({prop:"gridColumn"}),(0,M.Z)({prop:"gridRow"}),(0,M.Z)({prop:"gridAutoFlow"}),(0,M.Z)({prop:"gridAutoColumns"}),(0,M.Z)({prop:"gridAutoRows"}),(0,M.Z)({prop:"gridTemplateColumns"}),(0,M.Z)({prop:"gridTemplateRows"}),(0,M.Z)({prop:"gridTemplateAreas"}),(0,M.Z)({prop:"gridArea"})),ae=F((0,M.Z)({prop:"position"}),(0,M.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,M.Z)({prop:"top"}),(0,M.Z)({prop:"right"}),(0,M.Z)({prop:"bottom"}),(0,M.Z)({prop:"left"})),oe=F((0,M.Z)({prop:"color",themeKey:"palette"}),(0,M.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,M.Z)({prop:"backgroundColor",themeKey:"palette"})),se=(0,M.Z)({prop:"boxShadow",themeKey:"shadows"});function ue(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var ce=(0,M.Z)({prop:"width",transform:ue}),le=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return(0,j.k9)(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||j.VO[t]||ue(t)}}))}return null};le.filterProps=["maxWidth"];var he=(0,M.Z)({prop:"minWidth",transform:ue}),fe=(0,M.Z)({prop:"height",transform:ue}),de=(0,M.Z)({prop:"maxHeight",transform:ue}),pe=(0,M.Z)({prop:"minHeight",transform:ue}),ve=((0,M.Z)({prop:"size",cssProperty:"width",transform:ue}),(0,M.Z)({prop:"size",cssProperty:"height",transform:ue}),F(ce,le,he,fe,de,pe,(0,M.Z)({prop:"boxSizing"}))),ye=(0,M.Z)({prop:"fontFamily",themeKey:"typography"}),me=(0,M.Z)({prop:"fontSize",themeKey:"typography"}),ge=(0,M.Z)({prop:"fontStyle",themeKey:"typography"}),ke=(0,M.Z)({prop:"fontWeight",themeKey:"typography"}),be=(0,M.Z)({prop:"letterSpacing"}),_e=(0,M.Z)({prop:"textTransform"}),we=(0,M.Z)({prop:"lineHeight"}),xe=(0,M.Z)({prop:"textAlign"}),Se=F((0,M.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),ye,me,ge,ke,be,we,xe,_e),Te={borders:X.filterProps,display:J.filterProps,flexbox:ee.filterProps,grid:ie.filterProps,positions:ae.filterProps,palette:oe.filterProps,shadows:se.filterProps,sizing:ve.filterProps,spacing:U.ZP.filterProps,typography:Se.filterProps},Ie={borders:X,display:J,flexbox:ee,grid:ie,positions:ae,palette:oe,shadows:se,sizing:ve,spacing:U.ZP,typography:Se};Object.keys(Te).reduce((function(e,t){return Te[t].forEach((function(n){e[n]=Ie[t]})),e}),{});function Ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}function Ce(e,t){return"function"===typeof e?e(t):e}var Re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,r){var i,a=(i={},(0,D.Z)(i,e,n),(0,D.Z)(i,"theme",r),i),o=t[e];return o?o(a):(0,D.Z)({},e,n)}function r(e){var i=e||{},a=i.sx,o=i.theme,s=void 0===o?{}:o;if(!a)return null;function u(e){var i=e;if("function"===typeof e)i=e(s);else if("object"!==typeof e)return e;if(!i)return null;var a=(0,j.W8)(s.breakpoints),o=Object.keys(a),u=a;return Object.keys(i).forEach((function(e){var a=Ce(i[e],s);if(null!==a&&void 0!==a)if("object"===typeof a)if(t[e])u=(0,L.Z)(u,n(e,a,s));else{var o=(0,j.k9)({theme:s},a,(function(t){return(0,D.Z)({},e,t)}));Ee(o,a)?u[e]=r({sx:a,theme:s}):u=(0,L.Z)(u,o)}else u=(0,L.Z)(u,n(e,a,s))})),(0,j.L7)(o,u)}return Array.isArray(a)?a.map(u):u(a)}return r}();Re.filterProps=["sx"];var Ne=Re,Pe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],Ae=["theme"],Oe=["theme"];function De(e){return 0===Object.keys(e).length}var Le=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},Me=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=O(e.props);r[t]=e.style})),r},Fe=function(e,t,n,r){var i,a,o=e.ownerState,s=void 0===o?{}:o,u=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){s[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&u.push(t[O(n.props)])})),u};function Ue(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var je=(0,R.Z)();var Ve=n(4591),ze=function(e){return Ue(e)&&"classes"!==e},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?je:t,s=e.rootShouldForwardProp,u=void 0===s?Ue:s,c=e.slotShouldForwardProp,l=void 0===c?Ue:c,h=e.styleFunctionSx,f=void 0===h?Ne:h;return function(e){var t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=s.name,h=s.slot,d=s.skipVariantsResolver,p=s.skipSx,v=s.overridesResolver,y=(0,o.Z)(s,Pe),m=void 0!==d?d:h&&"Root"!==h||!1,g=p||!1;var k=Ue;"Root"===h?k=u:h&&(k=l);var b=C(e,(0,a.Z)({shouldForwardProp:k,label:t},y)),_=function(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),u=1;u<t;u++)s[u-1]=arguments[u];var l=s?s.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=(0,o.Z)(t,Ae);return e((0,a.Z)({theme:De(r)?n:r},i))}:e})):[],h=e;c&&v&&l.push((function(e){var t=De(e.theme)?n:e.theme,r=Le(c,t);if(r){var o={};return Object.entries(r).forEach((function(n){var r=(0,i.Z)(n,2),s=r[0],u=r[1];o[s]="function"===typeof u?u((0,a.Z)({},e,{theme:t})):u})),v(e,o)}return null})),c&&!m&&l.push((function(e){var t=De(e.theme)?n:e.theme;return Fe(e,Me(c,t),t,c)})),g||l.push((function(e){var t=De(e.theme)?n:e.theme;return f((0,a.Z)({},e,{theme:t}))}));var d=l.length-s.length;if(Array.isArray(e)&&d>0){var p=new Array(d).fill("");(h=[].concat((0,r.Z)(e),(0,r.Z)(p))).raw=[].concat((0,r.Z)(e.raw),(0,r.Z)(p))}else"function"===typeof e&&e.__emotion_real!==e&&(h=function(t){var r=t.theme,i=(0,o.Z)(t,Oe);return e((0,a.Z)({theme:De(r)?n:r},i))});var y=b.apply(void 0,[h].concat((0,r.Z)(l)));return y};return b.withConfig&&(_.withConfig=b.withConfig),_}}({defaultTheme:Ve.Z,rootShouldForwardProp:ze}),Be=qe},2507:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(5735);var i=n(5080),a=n(2791);var o=a.createContext(null);function s(){return a.useContext(o)}function u(e){return 0===Object.keys(e).length}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=s();return!t||u(t)?e:t},l=(0,i.Z)();var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return c(e)};function f(e){var t=e.props,n=e.name,i=e.defaultTheme,a=function(e){var t=e.theme,n=e.name,i=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?(0,r.Z)(t.components[n].defaultProps,i):i}({theme:h(i),name:n,props:t});return a}var d=n(4591);function p(e){return f({props:e.props,name:e.name,defaultTheme:d.Z})}},4036:function(e,t,n){"use strict";var r=n(7312);t.Z=r.Z},9201:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(7462),i=n(2791),a=n(3366),o=n(8182),s=n(4419),u=n(4036),c=n(2507),l=n(4012),h=n(1217);function f(e){return(0,h.Z)("MuiSvgIcon",e)}(0,n(5878).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var d=n(184),p=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],v=(0,l.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat((0,u.Z)(n.color))],t["fontSize".concat((0,u.Z)(n.fontSize))]]}})((function(e){var t,n,r,i,a,o,s,u,c,l,h,f,d,p,v,y,m,g=e.theme,k=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=g.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=g.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=g.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(s=g.typography)||null==(u=s.pxToRem)?void 0:u.call(s,24))||"1.5rem",large:(null==(c=g.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875"}[k.fontSize],color:null!=(h=null==(f=(g.vars||g).palette)||null==(d=f[k.color])?void 0:d.main)?h:{action:null==(p=(g.vars||g).palette)||null==(v=p.action)?void 0:v.active,disabled:null==(y=(g.vars||g).palette)||null==(m=y.action)?void 0:m.disabled,inherit:void 0}[k.color]}})),y=i.forwardRef((function(e,t){var n=(0,c.Z)({props:e,name:"MuiSvgIcon"}),i=n.children,l=n.className,h=n.color,y=void 0===h?"inherit":h,m=n.component,g=void 0===m?"svg":m,k=n.fontSize,b=void 0===k?"medium":k,_=n.htmlColor,w=n.inheritViewBox,x=void 0!==w&&w,S=n.titleAccess,T=n.viewBox,I=void 0===T?"0 0 24 24":T,E=(0,a.Z)(n,p),C=(0,r.Z)({},n,{color:y,component:g,fontSize:b,instanceFontSize:e.fontSize,inheritViewBox:x,viewBox:I}),R={};x||(R.viewBox=I);var N=function(e){var t=e.color,n=e.fontSize,r=e.classes,i={root:["root","inherit"!==t&&"color".concat((0,u.Z)(t)),"fontSize".concat((0,u.Z)(n))]};return(0,s.Z)(i,f,r)}(C);return(0,d.jsxs)(v,(0,r.Z)({as:g,className:(0,o.Z)(N.root,l),ownerState:C,focusable:"false",color:_,"aria-hidden":!S||void 0,role:S?"img":void 0,ref:t},R,E,{children:[i,S?(0,d.jsx)("title",{children:S}):null]}))}));y.muiName="SvgIcon";var m=y;function g(e,t){var n=function(n,i){return(0,d.jsx)(m,(0,r.Z)({"data-testid":"".concat(t,"Icon"),ref:i},n,{children:e}))};return n.muiName=m.muiName,i.memo(i.forwardRef(n))}},1055:function(e,t,n){"use strict";n.r(t),n.d(t,{capitalize:function(){return i.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return o.Z},debounce:function(){return s},deprecatedPropType:function(){return u},isMuiElement:function(){return h},ownerDocument:function(){return d},ownerWindow:function(){return p},requirePropFactory:function(){return v},setRef:function(){return y},unstable_ClassNameGenerator:function(){return E},unstable_useEnhancedEffect:function(){return m},unstable_useId:function(){return _},unsupportedProp:function(){return w},useControlled:function(){return x},useEventCallback:function(){return S.Z},useForkRef:function(){return T.Z},useIsFocusVisible:function(){return I.Z}});var r=n(5902),i=n(4036);var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){return null==t?e:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}}),(function(){}))},o=n(9201);var s=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function r(){for(var r=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=function(){e.apply(r,a)};clearTimeout(t),t=setTimeout(s,n)}return r.clear=function(){clearTimeout(t)},r};var u=function(e,t){return function(){return null}},c=n(2791),l=n.t(c,2);var h=function(e,t){return c.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)};function f(e){return e&&e.ownerDocument||document}var d=f;var p=function(e){return f(e).defaultView||window};n(7462);var v=function(e,t){return function(){return null}},y=n(2971).Z,m=n(5721).Z,g=n(9439),k=0;var b=l.useId;var _=function(e){if(void 0!==b){var t=b();return null!=e?e:t}return function(e){var t=c.useState(e),n=(0,g.Z)(t,2),r=n[0],i=n[1],a=e||r;return c.useEffect((function(){null==r&&i("mui-".concat(k+=1))}),[r]),a}(e)};var w=function(e,t,n,r,i){return null};var x=function(e){var t=e.controlled,n=e.default,r=(e.name,e.state,c.useRef(void 0!==t).current),i=c.useState(n),a=(0,g.Z)(i,2),o=a[0],s=a[1];return[r?t:o,c.useCallback((function(e){r||s(e)}),[])]},S=n(6868),T=n(4843),I=n(3031),E={configure:function(e){console.warn(["MUI: `ClassNameGenerator` import from `@mui/material/utils` is outdated and might cause unexpected issues.","","You should use `import { unstable_ClassNameGenerator } from '@mui/material/className'` instead","","The detail of the issue: https://github.com/mui/material-ui/issues/30011#issuecomment-1024993401","","The updated documentation: https://mui.com/guides/classname-generator/"].join("\n")),r.Z.configure(e)}}},6868:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791),i=n(5721);var a=function(e){var t=r.useRef(e);return(0,i.Z)((function(){t.current=e})),r.useCallback((function(){return t.current.apply(void 0,arguments)}),[])}},4843:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(2791),i=n(2971);var a=function(e,t){return r.useMemo((function(){return null==e&&null==t?null:function(n){(0,i.Z)(e,n),(0,i.Z)(t,n)}}),[e,t])}},3031:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r,i=n(2791),a=!0,o=!1,s={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){e.metaKey||e.altKey||e.ctrlKey||(a=!0)}function c(){a=!1}function l(){"hidden"===this.visibilityState&&o&&(a=!0)}function h(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return a||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!s[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var f=function(){var e=i.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",u,!0),t.addEventListener("mousedown",c,!0),t.addEventListener("pointerdown",c,!0),t.addEventListener("touchstart",c,!0),t.addEventListener("visibilitychange",l,!0))}),[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!h(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(o=!0,window.clearTimeout(r),r=window.setTimeout((function(){o=!1}),100),t.current=!1,!0)},ref:e}}},1184:function(e,t,n){"use strict";n.d(t,{L7:function(){return s},VO:function(){return r},W8:function(){return o},k9:function(){return a}});var r={xs:0,sm:600,md:900,lg:1200,xl:1536},i={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(r[e],"px)")}};function a(e,t,n){var a=e.theme||{};if(Array.isArray(t)){var o=a.breakpoints||i;return t.reduce((function(e,r,i){return e[o.up(o.keys[i])]=n(t[i]),e}),{})}if("object"===typeof t){var s=a.breakpoints||i;return Object.keys(t).reduce((function(e,i){if(-1!==Object.keys(s.values||r).indexOf(i)){e[s.up(i)]=n(t[i],i)}else{var a=i;e[a]=t[a]}return e}),{})}return n(t)}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==t||null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function s(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}},2065:function(e,t,n){"use strict";n.d(t,{$n:function(){return h},Fq:function(){return c},_j:function(){return l},mi:function(){return u}});var r=n(6189);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function a(e){if(e.type)return e;if("#"===e.charAt(0))return a(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error((0,r.Z)(9,e));var i,o=e.substring(t+1,e.length-1);if("color"===n){if(i=(o=o.split(" ")).shift(),4===o.length&&"/"===o[3].charAt(0)&&(o[3]=o[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i))throw new Error((0,r.Z)(10,i))}else o=o.split(",");return{type:n,values:o=o.map((function(e){return parseFloat(e)})),colorSpace:i}}function o(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function s(e){var t="hsl"===(e=a(e)).type?a(function(e){var t=(e=a(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,s=r*Math.min(i,1-i),u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-s*Math.max(Math.min(t-3,9-t,1),-1)},c="rgb",l=[Math.round(255*u(0)),Math.round(255*u(8)),Math.round(255*u(4))];return"hsla"===e.type&&(c+="a",l.push(t[3])),o({type:c,values:l})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function u(e,t){var n=s(e),r=s(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function c(e,t){return e=a(e),t=i(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,o(e)}function l(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function h(e,t){if(e=a(e),t=i(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return o(e)}},5080:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(7462),i=n(3366),a=n(2466),o=n(4942),s=["values","unit","step"];function u(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,a=e.unit,u=void 0===a?"px":a,c=e.step,l=void 0===c?5:c,h=(0,i.Z)(e,s),f=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return(0,r.Z)({},e,(0,o.Z)({},t.key,t.val))}),{})}(n),d=Object.keys(f);function p(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(u,")")}function v(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-l/100).concat(u,")")}function y(e,t){var r=d.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(u,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[d[r]]?n[d[r]]:t)-l/100).concat(u,")")}return(0,r.Z)({keys:d,values:f,up:p,down:v,between:y,only:function(e){return d.indexOf(e)+1<d.length?y(e,d[d.indexOf(e)+1]):p(e)},not:function(e){var t=d.indexOf(e);return 0===t?p(d[1]):t===d.length-1?v(d[t]):y(e,d[d.indexOf(e)+1]).replace("@media","@media not all and")},unit:u},h)}var c={borderRadius:4},l=n(5682);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=(0,l.hB)({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var f=["breakpoints","palette","spacing","shape"];var d=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,o=e.palette,s=void 0===o?{}:o,l=e.spacing,d=e.shape,p=void 0===d?{}:d,v=(0,i.Z)(e,f),y=u(n),m=h(l),g=(0,a.Z)({breakpoints:y,direction:"ltr",components:{},palette:(0,r.Z)({mode:"light"},s),spacing:m,shape:(0,r.Z)({},c,p)},v),k=arguments.length,b=new Array(k>1?k-1:0),_=1;_<k;_++)b[_-1]=arguments[_];return g=b.reduce((function(e,t){return(0,a.Z)(e,t)}),g)}},8247:function(e,t,n){"use strict";var r=n(2466);t.Z=function(e,t){return t?(0,r.Z)(e,t,{clone:!1}):e}},5682:function(e,t,n){"use strict";n.d(t,{hB:function(){return v},eI:function(){return p},ZP:function(){return w},NA:function(){return y}});var r=n(9439),i=n(1184),a=n(8529),o=n(8247);var s={m:"margin",p:"padding"},u={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},c={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},l=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!c[e])return[e];e=c[e]}var t=e.split(""),n=(0,r.Z)(t,2),i=n[0],a=n[1],o=s[i],l=u[a]||"";return Array.isArray(l)?l.map((function(e){return o+e})):[o+l]})),h=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],f=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[].concat(h,f);function p(e,t,n,r){var i,o=null!=(i=(0,a.D)(e,t,!1))?i:n;return"number"===typeof o?function(e){return"string"===typeof e?e:o*e}:Array.isArray(o)?function(e){return"string"===typeof e?e:o[e]}:"function"===typeof o?o:function(){}}function v(e){return p(e,"spacing",8)}function y(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function m(e,t,n,r){if(-1===t.indexOf(n))return null;var a=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=y(t,n),e}),{})}}(l(n),r),o=e[n];return(0,i.k9)(e,o,a)}function g(e,t){var n=v(e.theme);return Object.keys(e).map((function(r){return m(e,t,r,n)})).reduce(o.Z,{})}function k(e){return g(e,h)}function b(e){return g(e,f)}function _(e){return g(e,d)}k.propTypes={},k.filterProps=h,b.propTypes={},b.filterProps=f,_.propTypes={},_.filterProps=d;var w=_},8529:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(4942),i=n(7312),a=n(1184);function o(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function s(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:o(e,n)||i,t&&(r=t(r)),r}t.Z=function(e){var t=e.prop,n=e.cssProperty,u=void 0===n?e.prop:n,c=e.themeKey,l=e.transform,h=function(e){if(null==e[t])return null;var n=e[t],h=o(e.theme,c)||{};return(0,a.k9)(e,n,(function(e){var n=s(h,l,e);return e===n&&"string"===typeof e&&(n=s(h,l,"".concat(t).concat("default"===e?"":(0,i.Z)(e)),e)),!1===u?n:(0,r.Z)({},u,n)}))};return h.propTypes={},h.filterProps=[t],h}},5902:function(e,t){"use strict";var n=function(e){return e},r=function(){var e=n;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=n}}}();t.Z=r},7312:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(6189);function i(e){if("string"!==typeof e)throw new Error((0,r.Z)(7));return e.charAt(0).toUpperCase()+e.slice(1)}},4419:function(e,t,n){"use strict";function r(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}n.d(t,{Z:function(){return r}})},2466:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(7462);function i(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},o=n.clone?(0,r.Z)({},e):e;return i(e)&&i(t)&&Object.keys(t).forEach((function(r){"__proto__"!==r&&(i(t[r])&&r in e&&i(e[r])?o[r]=a(e[r],t[r],n):o[r]=t[r])})),o}},6189:function(e,t,n){"use strict";function r(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}n.d(t,{Z:function(){return r}})},1217:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(5902),i={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",a=i[t];return a?"".concat(n,"-").concat(a):"".concat(r.Z.generate(e),"-").concat(t)}},5878:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1217);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",i={};return t.forEach((function(t){i[t]=(0,r.Z)(e,t,n)})),i}},5735:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(7462);function i(e,t){var n=(0,r.Z)({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}},2971:function(e,t,n){"use strict";function r(e,t){"function"===typeof e?e(t):e&&(e.current=t)}n.d(t,{Z:function(){return r}})},5721:function(e,t,n){"use strict";var r=n(2791),i="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;t.Z=i},4569:function(e,t,n){e.exports=n(8036)},3381:function(e,t,n){"use strict";var r=n(3589),i=n(7297),a=n(9301),o=n(9774),s=n(1804),u=n(9145),c=n(5411),l=n(6789),h=n(4531),f=n(6569),d=n(6261);e.exports=function(e){return new Promise((function(t,n){var p,v=e.data,y=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(v)&&r.isStandardBrowserEnv()&&delete y["Content-Type"];var k=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(b+":"+_)}var w=s(e.baseURL,e.url);function x(){if(k){var r="getAllResponseHeaders"in k?u(k.getAllResponseHeaders()):null,a={data:m&&"text"!==m&&"json"!==m?k.response:k.responseText,status:k.status,statusText:k.statusText,headers:r,config:e,request:k};i((function(e){t(e),g()}),(function(e){n(e),g()}),a),k=null}}if(k.open(e.method.toUpperCase(),o(w,e.params,e.paramsSerializer),!0),k.timeout=e.timeout,"onloadend"in k?k.onloadend=x:k.onreadystatechange=function(){k&&4===k.readyState&&(0!==k.status||k.responseURL&&0===k.responseURL.indexOf("file:"))&&setTimeout(x)},k.onabort=function(){k&&(n(new h("Request aborted",h.ECONNABORTED,e,k)),k=null)},k.onerror=function(){n(new h("Network Error",h.ERR_NETWORK,e,k,k)),k=null},k.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||l;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new h(t,r.clarifyTimeoutError?h.ETIMEDOUT:h.ECONNABORTED,e,k)),k=null},r.isStandardBrowserEnv()){var S=(e.withCredentials||c(w))&&e.xsrfCookieName?a.read(e.xsrfCookieName):void 0;S&&(y[e.xsrfHeaderName]=S)}"setRequestHeader"in k&&r.forEach(y,(function(e,t){"undefined"===typeof v&&"content-type"===t.toLowerCase()?delete y[t]:k.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(k.withCredentials=!!e.withCredentials),m&&"json"!==m&&(k.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&k.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&k.upload&&k.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){k&&(n(!e||e&&e.type?new f:e),k.abort(),k=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),v||(v=null);var T=d(w);T&&-1===["http","https","file"].indexOf(T)?n(new h("Unsupported protocol "+T+":",h.ERR_BAD_REQUEST,e)):k.send(v)}))}},8036:function(e,t,n){"use strict";var r=n(3589),i=n(4049),a=n(3773),o=n(777);var s=function e(t){var n=new a(t),s=i(a.prototype.request,n);return r.extend(s,a.prototype,n),r.extend(s,n),s.create=function(n){return e(o(t,n))},s}(n(1709));s.Axios=a,s.CanceledError=n(6569),s.CancelToken=n(6857),s.isCancel=n(5517),s.VERSION=n(7600).version,s.toFormData=n(1397),s.AxiosError=n(4531),s.Cancel=s.CanceledError,s.all=function(e){return Promise.all(e)},s.spread=n(8089),s.isAxiosError=n(9580),e.exports=s,e.exports.default=s},6857:function(e,t,n){"use strict";var r=n(6569);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},6569:function(e,t,n){"use strict";var r=n(4531);function i(e){r.call(this,null==e?"canceled":e,r.ERR_CANCELED),this.name="CanceledError"}n(3589).inherits(i,r,{__CANCEL__:!0}),e.exports=i},5517:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},3773:function(e,t,n){"use strict";var r=n(3589),i=n(9774),a=n(7470),o=n(2733),s=n(777),u=n(1804),c=n(7835),l=c.validators;function h(e){this.defaults=e,this.interceptors={request:new a,response:new a}}h.prototype.request=function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var a,u=[];if(this.interceptors.response.forEach((function(e){u.push(e.fulfilled,e.rejected)})),!i){var h=[o,void 0];for(Array.prototype.unshift.apply(h,r),h=h.concat(u),a=Promise.resolve(t);h.length;)a=a.then(h.shift(),h.shift());return a}for(var f=t;r.length;){var d=r.shift(),p=r.shift();try{f=d(f)}catch(v){p(v);break}}try{a=o(f)}catch(v){return Promise.reject(v)}for(;u.length;)a=a.then(u.shift(),u.shift());return a},h.prototype.getUri=function(e){e=s(this.defaults,e);var t=u(e.baseURL,e.url);return i(t,e.params,e.paramsSerializer)},r.forEach(["delete","get","head","options"],(function(e){h.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(s(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}h.prototype[e]=t(),h.prototype[e+"Form"]=t(!0)})),e.exports=h},4531:function(e,t,n){"use strict";var r=n(3589);function i(e,t,n,r,i){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}r.inherits(i,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var a=i.prototype,o={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(e){o[e]={value:e}})),Object.defineProperties(i,o),Object.defineProperty(a,"isAxiosError",{value:!0}),i.from=function(e,t,n,o,s,u){var c=Object.create(a);return r.toFlatObject(e,c,(function(e){return e!==Error.prototype})),i.call(c,e.message,t,n,o,s),c.name=e.name,u&&Object.assign(c,u),c},e.exports=i},7470:function(e,t,n){"use strict";var r=n(3589);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},1804:function(e,t,n){"use strict";var r=n(4044),i=n(9549);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},2733:function(e,t,n){"use strict";var r=n(3589),i=n(2693),a=n(5517),o=n(1709),s=n(6569);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return a(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},777:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function u(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||a,i=t(e);r.isUndefined(i)&&t!==u||(n[e]=i)})),n}},7297:function(e,t,n){"use strict";var r=n(4531);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(new r("Request failed with status code "+n.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}},2693:function(e,t,n){"use strict";var r=n(3589),i=n(1709);e.exports=function(e,t,n){var a=this||i;return r.forEach(n,(function(n){e=n.call(a,e,t)})),e}},1709:function(e,t,n){"use strict";var r=n(3589),i=n(4341),a=n(4531),o=n(6789),s=n(1397),u={"Content-Type":"application/x-www-form-urlencoded"};function c(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l={transitional:o,adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(e=n(3381)),e}(),transformRequest:[function(e,t){if(i(t,"Accept"),i(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e))return e;if(r.isArrayBufferView(e))return e.buffer;if(r.isURLSearchParams(e))return c(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var n,a=r.isObject(e),o=t&&t["Content-Type"];if((n=r.isFileList(e))||a&&"multipart/form-data"===o){var u=this.env&&this.env.FormData;return s(n?{"files[]":e}:e,u&&new u)}return a||"application/json"===o?(c(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(i){if("SyntaxError"!==i.name)throw i}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||l.transitional,n=t&&t.silentJSONParsing,i=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw a.from(s,a.ERR_BAD_RESPONSE,this,null,this.response);throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:n(3035)},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){l.headers[e]=r.merge(u)})),e.exports=l},6789:function(e){"use strict";e.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},7600:function(e){e.exports={version:"0.27.2"}},4049:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},9774:function(e,t,n){"use strict";var r=n(3589);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var a;if(n)a=n(t);else if(r.isURLSearchParams(t))a=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(t)+"="+i(e))})))})),a=o.join("&")}if(a){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}},9549:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},9301:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,a,o){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(a)&&s.push("domain="+a),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},4044:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},9580:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},5411:function(e,t,n){"use strict";var r=n(3589);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},4341:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},3035:function(e){e.exports=null},9145:function(e,t,n){"use strict";var r=n(3589),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,a,o={};return e?(r.forEach(e.split("\n"),(function(e){if(a=e.indexOf(":"),t=r.trim(e.substr(0,a)).toLowerCase(),n=r.trim(e.substr(a+1)),t){if(o[t]&&i.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},6261:function(e){"use strict";e.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},8089:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},1397:function(e,t,n){"use strict";var r=n(3589);e.exports=function(e,t){t=t||new FormData;var n=[];function i(e){return null===e?"":r.isDate(e)?e.toISOString():r.isArrayBuffer(e)||r.isTypedArray(e)?"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(a,o){if(r.isPlainObject(a)||r.isArray(a)){if(-1!==n.indexOf(a))throw Error("Circular reference detected in "+o);n.push(a),r.forEach(a,(function(n,a){if(!r.isUndefined(n)){var s,u=o?o+"."+a:a;if(n&&!o&&"object"===typeof n)if(r.endsWith(a,"{}"))n=JSON.stringify(n);else if(r.endsWith(a,"[]")&&(s=r.toArray(n)))return void s.forEach((function(e){!r.isUndefined(e)&&t.append(u,i(e))}));e(n,u)}})),n.pop()}else t.append(o,i(a))}(e),t}},7835:function(e,t,n){"use strict";var r=n(7600).version,i=n(4531),a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new i(a(r," has been removed"+(t?" in "+t:"")),i.ERR_DEPRECATED);return t&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new i("options must be an object",i.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),a=r.length;a-- >0;){var o=r[a],s=t[o];if(s){var u=e[o],c=void 0===u||s(u,o,e);if(!0!==c)throw new i("option "+o+" must be "+c,i.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new i("Unknown option "+o,i.ERR_BAD_OPTION)}},validators:a}},3589:function(e,t,n){"use strict";var r,i=n(4049),a=Object.prototype.toString,o=(r=Object.create(null),function(e){var t=a.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())});function s(e){return e=e.toLowerCase(),function(t){return o(t)===e}}function u(e){return Array.isArray(e)}function c(e){return"undefined"===typeof e}var l=s("ArrayBuffer");function h(e){return null!==e&&"object"===typeof e}function f(e){if("object"!==o(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}var d=s("Date"),p=s("File"),v=s("Blob"),y=s("FileList");function m(e){return"[object Function]"===a.call(e)}var g=s("URLSearchParams");function k(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),u(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}var b,_=(b="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(e){return b&&e instanceof b});e.exports={isArray:u,isArrayBuffer:l,isBuffer:function(e){return null!==e&&!c(e)&&null!==e.constructor&&!c(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){var t="[object FormData]";return e&&("function"===typeof FormData&&e instanceof FormData||a.call(e)===t||m(e.toString)&&e.toString()===t)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&l(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:h,isPlainObject:f,isUndefined:c,isDate:d,isFile:p,isBlob:v,isFunction:m,isStream:function(e){return h(e)&&m(e.pipe)},isURLSearchParams:g,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:k,merge:function e(){var t={};function n(n,r){f(t[r])&&f(n)?t[r]=e(t[r],n):f(n)?t[r]=e({},n):u(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)k(arguments[r],n);return t},extend:function(e,t,n){return k(t,(function(t,r){e[r]=n&&"function"===typeof t?i(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n){var r,i,a,o={};t=t||{};do{for(i=(r=Object.getOwnPropertyNames(e)).length;i-- >0;)o[a=r[i]]||(t[a]=e[a],o[a]=!0);e=Object.getPrototypeOf(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:o,kindOfTest:s,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;var t=e.length;if(c(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},isTypedArray:_,isFileList:y}},8182:function(e,t,n){"use strict";function r(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=r(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.Z=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=r(e))&&(i&&(i+=" "),i+=t);return i}},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=l(n);h&&(o=o.concat(h(n)));for(var s=u(t),v=u(n),y=0;y<o.length;++y){var m=o[y];if(!a[m]&&(!r||!r[m])&&(!v||!v[m])&&(!s||!s[m])){var g=f(n,m);try{c(t,m,g)}catch(k){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,m=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case f:case y:case v:case u:return e;default:return t}}case i:return t}}}function w(e){return _(e)===h}t.AsyncMode=l,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=u,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=y,t.Memo=v,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||_(e)===l},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===f},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===y},t.isMemo=function(e){return _(e)===v},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===v||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===g||e.$$typeof===k||e.$$typeof===b||e.$$typeof===m)},t.typeOf=_},8309:function(e,t,n){"use strict";e.exports=n(746)},8281:function(e){var t;window,t=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=256,a=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var r=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),t+=this._encodeByte(r>>>6&63),t+=this._encodeByte(r>>>0&63)}var i=e.length-n;return i>0&&(r=e[n]<<16|(2===i?e[n+1]<<8:0),t+=this._encodeByte(r>>>18&63),t+=this._encodeByte(r>>>12&63),t+=2===i?this._encodeByte(r>>>6&63):this._paddingCharacter||"",t+=this._paddingCharacter||""),t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,r=new Uint8Array(this.maxDecodedLength(n)),a=0,o=0,s=0,u=0,c=0,l=0,h=0;o<n-4;o+=4)u=this._decodeChar(e.charCodeAt(o+0)),c=this._decodeChar(e.charCodeAt(o+1)),l=this._decodeChar(e.charCodeAt(o+2)),h=this._decodeChar(e.charCodeAt(o+3)),r[a++]=u<<2|c>>>4,r[a++]=c<<4|l>>>2,r[a++]=l<<6|h,s|=u&i,s|=c&i,s|=l&i,s|=h&i;if(o<n-1&&(u=this._decodeChar(e.charCodeAt(o)),c=this._decodeChar(e.charCodeAt(o+1)),r[a++]=u<<2|c>>>4,s|=u&i,s|=c&i),o<n-2&&(l=this._decodeChar(e.charCodeAt(o+2)),r[a++]=c<<4|l>>>2,s|=l&i),o<n-3&&(h=this._decodeChar(e.charCodeAt(o+3)),r[a++]=l<<6|h,s|=h&i),0!==s)throw new Error("Base64Coder: incorrect characters for decoding");return r},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,t+=62-e>>>8&3,String.fromCharCode(t)},e.prototype._decodeChar=function(e){var t=i;return t+=(42-e&e-44)>>>8&-256+e-43+62,t+=(46-e&e-48)>>>8&-256+e-47+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw new Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=a;var o=new a;t.encode=function(e){return o.encode(e)},t.decode=function(e){return o.decode(e)};var s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,t+=62-e>>>8&49,String.fromCharCode(t)},t.prototype._decodeChar=function(e){var t=i;return t+=(44-e&e-46)>>>8&-256+e-45+62,t+=(94-e&e-96)>>>8&-256+e-95+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},t}(a);t.URLSafeCoder=s;var u=new s;t.encodeURLSafe=function(e){return u.encode(e)},t.decodeURLSafe=function(e){return u.decode(e)},t.encodedLength=function(e){return o.encodedLength(e)},t.maxDecodedLength=function(e){return o.maxDecodedLength(e)},t.decodedLength=function(e){return o.decodedLength(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="utf8: invalid string",i="utf8: invalid source encoding";function a(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<55296)t+=3;else{if(!(i<=57343))throw new Error(r);if(n>=e.length-1)throw new Error(r);n++,t+=4}}return t}t.encode=function(e){for(var t=new Uint8Array(a(e)),n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=192|i>>6,t[n++]=128|63&i):i<55296?(t[n++]=224|i>>12,t[n++]=128|i>>6&63,t[n++]=128|63&i):(r++,i=(1023&i)<<10,i|=1023&e.charCodeAt(r),i+=65536,t[n++]=240|i>>18,t[n++]=128|i>>12&63,t[n++]=128|i>>6&63,t[n++]=128|63&i)}return t},t.encodedLength=a,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(128&r){var a=void 0;if(r<224){if(n>=e.length)throw new Error(i);if(128!==(192&(o=e[++n])))throw new Error(i);r=(31&r)<<6|63&o,a=128}else if(r<240){if(n>=e.length-1)throw new Error(i);var o=e[++n],s=e[++n];if(128!==(192&o)||128!==(192&s))throw new Error(i);r=(15&r)<<12|(63&o)<<6|63&s,a=2048}else{if(!(r<248))throw new Error(i);if(n>=e.length-2)throw new Error(i);o=e[++n],s=e[++n];var u=e[++n];if(128!==(192&o)||128!==(192&s)||128!==(192&u))throw new Error(i);r=(15&r)<<18|(63&o)<<12|(63&s)<<6|63&u,a=65536}if(r<a||r>=55296&&r<=57343)throw new Error(i);if(r>=65536){if(r>1114111)throw new Error(i);r-=65536,t.push(String.fromCharCode(55296|r>>10)),r=56320|1023&r}}t.push(String.fromCharCode(r))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){"use strict";n.r(t);var r,i=function(){function e(e,t){this.lastId=0,this.prefix=e,this.name=t}return e.prototype.create=function(e){this.lastId++;var t=this.lastId,n=this.prefix+t,r=this.name+"["+t+"]",i=!1,a=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=a,{number:t,id:n,name:r,callback:a}},e.prototype.remove=function(e){delete this[e.number]},e}(),a=new i("_pusher_script_","Pusher.ScriptReceivers"),o={VERSION:"7.2.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,cluster:"mt1",userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},s=function(){function e(e){this.options=e,this.receivers=e.receivers||a,this.loading={}}return e.prototype.load=function(e,t,n){var r=this;if(r.loading[e]&&r.loading[e].length>0)r.loading[e].push(n);else{r.loading[e]=[n];var i=Et.createScriptRequest(r.getPath(e,t)),a=r.receivers.create((function(t){if(r.receivers.remove(a),r.loading[e]){var n=r.loading[e];delete r.loading[e];for(var o=function(e){e||i.cleanup()},s=0;s<n.length;s++)n[s](t,o)}}));i.send(a)}},e.prototype.getRoot=function(e){var t=Et.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"},e}(),u=new i("_pusher_dependencies","Pusher.DependenciesReceivers"),c=new s({cdn_http:o.cdn_http,cdn_https:o.cdn_https,version:o.VERSION,suffix:o.dependency_suffix,receivers:u}),l={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}},h=function(e){var t,n=l.urls[e];return n?(n.fullUrl?t=n.fullUrl:n.path&&(t=l.baseUrl+n.path),t?"See: "+t:""):""};!function(e){e.UserAuthentication="user-authentication",e.ChannelAuthorization="channel-authorization"}(r||(r={}));for(var f=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),p=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),v=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),y=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),m=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),g=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),k=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),b=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return Object.setPrototypeOf(r,n.prototype),r}return f(t,e),t}(Error),_=function(e){function t(t,n){var r=this.constructor,i=e.call(this,n)||this;return i.status=t,Object.setPrototypeOf(i,r.prototype),i}return f(t,e),t}(Error),w=function(e,t,n,i,a){var o=Et.createXHR();for(var s in o.open("POST",n.endpoint,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)o.setRequestHeader(s,n.headers[s]);return o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var e=void 0,t=!1;try{e=JSON.parse(o.responseText),t=!0}catch(u){a(new _(200,"JSON returned from "+i.toString()+" endpoint was invalid, yet status code was 200. Data was: "+o.responseText),null)}t&&a(null,e)}else{var s="";switch(i){case r.UserAuthentication:s=h("authenticationEndpoint");break;case r.ChannelAuthorization:s="Clients must be authenticated to join private or presence channels. "+h("authorizationEndpoint")}a(new _(o.status,"Unable to retrieve auth string from "+i.toString()+" endpoint - received status: "+o.status+" from "+n.endpoint+". "+s),null)}},o.send(t),o},x=String.fromCharCode,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T={},I=0,E=S.length;I<E;I++)T[S.charAt(I)]=I;var C=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?x(192|t>>>6)+x(128|63&t):x(224|t>>>12&15)+x(128|t>>>6&63)+x(128|63&t)},R=function(e){return e.replace(/[^\x00-\x7F]/g,C)},N=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[S.charAt(n>>>18),S.charAt(n>>>12&63),t>=2?"=":S.charAt(n>>>6&63),t>=1?"=":S.charAt(63&n)].join("")},P=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,N)},A=function(){function e(e,t,n,r){var i=this;this.clear=t,this.timer=e((function(){i.timer&&(i.timer=r(i.timer))}),n)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),O=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function D(e){window.clearTimeout(e)}function L(e){window.clearInterval(e)}var M=function(e){function t(t,n){return e.call(this,setTimeout,D,t,(function(e){return n(),null}))||this}return O(t,e),t}(A),F=function(e){function t(t,n){return e.call(this,setInterval,L,t,(function(e){return n(),e}))||this}return O(t,e),t}(A),U={now:function(){return Date.now?Date.now():(new Date).valueOf()},defer:function(e){return new M(0,e)},method:function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,r.concat(arguments))}}},j=U;function V(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var a in i)i[a]&&i[a].constructor&&i[a].constructor===Object?e[a]=V(e[a]||{},i[a]):e[a]=i[a]}return e}function z(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"===typeof arguments[t]?e.push(arguments[t]):e.push(X(arguments[t]));return e.join(" : ")}function q(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}function B(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function Z(e){var t=[];return B(e,(function(e,n){t.push(n)})),t}function W(e,t,n){for(var r=0;r<e.length;r++)t.call(n||window,e[r],r,e)}function H(e,t){for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r,e,n));return n}function K(e,t){t=t||function(e){return!!e};for(var n=[],r=0;r<e.length;r++)t(e[r],r,e,n)&&n.push(e[r]);return n}function G(e,t){var n={};return B(e,(function(r,i){(t&&t(r,i,e,n)||Boolean(r))&&(n[i]=r)})),n}function Q(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function $(e){return function(e,t){var n={};return B(e,(function(e,r){n[r]=t(e)})),n}(e,(function(e){return"object"===typeof e&&(e=X(e)),encodeURIComponent((t=e.toString(),P(R(t))));var t}))}function Y(e){return H(function(e){var t=[];return B(e,(function(e,n){t.push([n,e])})),t}($(G(e,(function(e){return void 0!==e})))),j.method("join","=")).join("&")}function X(e){try{return JSON.stringify(e)}catch(t){return JSON.stringify(function(e){var t=[],n=[];return function e(r,i){var a,o,s;switch(typeof r){case"object":if(!r)return null;for(a=0;a<t.length;a+=1)if(t[a]===r)return{$ref:n[a]};if(t.push(r),n.push(i),"[object Array]"===Object.prototype.toString.apply(r))for(s=[],a=0;a<r.length;a+=1)s[a]=e(r[a],i+"["+a+"]");else for(o in s={},r)Object.prototype.hasOwnProperty.call(r,o)&&(s[o]=e(r[o],i+"["+JSON.stringify(o)+"]"));return s;case"number":case"string":case"boolean":return r}}(e,"$")}(e))}}var J=function(){function e(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLog,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogWarn,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.log(this.globalLogError,e)},e.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},e.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=z.apply(this,arguments);if(Gt.log)Gt.log(r);else if(Gt.logToConsole){var i=e.bind(this);i(r)}},e}(),ee=new J,te=function(e,t,n,r,i){void 0!==n.headers&&ee.warn("To send headers with the "+r.toString()+" request, you must use AJAX, rather than JSONP.");var a=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var o=e.getDocument(),s=o.createElement("script");e.auth_callbacks[a]=function(e){i(null,e)};var u="Pusher.auth_callbacks['"+a+"']";s.src=n.endpoint+"?callback="+encodeURIComponent(u)+"&"+t;var c=o.getElementsByTagName("head")[0]||o.documentElement;c.insertBefore(s,c.firstChild)},ne=function(){function e(e){this.src=e}return e.prototype.send=function(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var r=document.getElementsByTagName("head")[0];r.insertBefore(t.script,r.firstChild),t.errorScript&&r.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),re=function(){function e(e,t){this.url=e,this.data=t}return e.prototype.send=function(e){if(!this.request){var t=Y(this.data),n=this.url+"/"+e.number+"?"+t;this.request=Et.createScriptRequest(n),this.request.send(e)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),ie={name:"jsonp",getAgent:function(e,t){return function(n,r){var i="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,o=Et.createJSONPRequest(i,n),s=Et.ScriptReceivers.create((function(t,n){a.remove(s),o.cleanup(),n&&n.host&&(e.host=n.host),r&&r(t,n)}));o.send(s)}}};function ae(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function oe(e,t){return"/app/"+e+"?protocol="+o.PROTOCOL+"&client=js&version="+o.VERSION+(t?"&"+t:"")}var se={getInitial:function(e,t){return ae("ws",t,(t.httpPath||"")+oe(e,"flash=false"))}},ue={getInitial:function(e,t){return ae("http",t,(t.httpPath||"/pusher")+oe(e))}},ce={getInitial:function(e,t){return ae("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return oe(e)}},le=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks[he(e)]},e.prototype.add=function(e,t,n){var r=he(e);this._callbacks[r]=this._callbacks[r]||[],this._callbacks[r].push({fn:t,context:n})},e.prototype.remove=function(e,t,n){if(e||t||n){var r=e?[he(e)]:Z(this._callbacks);t||n?this.removeCallback(r,t,n):this.removeAllCallbacks(r)}else this._callbacks={}},e.prototype.removeCallback=function(e,t,n){W(e,(function(e){this._callbacks[e]=K(this._callbacks[e]||[],(function(e){return t&&t!==e.fn||n&&n!==e.context})),0===this._callbacks[e].length&&delete this._callbacks[e]}),this)},e.prototype.removeAllCallbacks=function(e){W(e,(function(e){delete this._callbacks[e]}),this)},e}();function he(e){return"_"+e}var fe=function(){function e(e){this.callbacks=new le,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(e,t,n){return this.callbacks.add(e,t,n),this},e.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(e,t,n){return this.callbacks.remove(e,t,n),this},e.prototype.unbind_global=function(e){return e?(this.global_callbacks=K(this.global_callbacks||[],(function(t){return t!==e})),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(e,t,n){for(var r=0;r<this.global_callbacks.length;r++)this.global_callbacks[r](e,t);var i=this.callbacks.get(e),a=[];if(n?a.push(t,n):t&&a.push(t),i&&i.length>0)for(r=0;r<i.length;r++)i[r].fn.apply(i[r].context||window,a);else this.failThrough&&this.failThrough(e,t);return this},e}(),de=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pe=function(e){function t(t,n,r,i,a){var o=e.call(this)||this;return o.initialize=Et.transportConnectionInitializer,o.hooks=t,o.name=n,o.priority=r,o.key=i,o.options=a,o.state="new",o.timeline=a.timeline,o.activityTimeout=a.activityTimeout,o.id=o.timeline.generateUniqueID(),o}return de(t,e),t.prototype.handlesActivityChecks=function(){return Boolean(this.hooks.handlesActivityChecks)},t.prototype.supportsPing=function(){return Boolean(this.hooks.supportsPing)},t.prototype.connect=function(){var e=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(n){return j.defer((function(){e.onError(n),e.changeState("closed")})),!1}return this.bindListeners(),ee.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(e){var t=this;return"open"===this.state&&(j.defer((function(){t.socket&&t.socket.send(e)})),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var e=this;this.socket.onopen=function(){e.onOpen()},this.socket.onerror=function(t){e.onError(t)},this.socket.onclose=function(t){e.onClose(t)},this.socket.onmessage=function(t){e.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){e.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)},t.prototype.buildTimelineMessage=function(e){return V({cid:this.id},e)},t}(fe),ve=pe,ye=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(e,t,n,r){return new ve(this.hooks,e,t,n,r)},e}(),me=new ye({urls:se,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(Et.getWebSocketAPI())},isSupported:function(){return Boolean(Et.getWebSocketAPI())},getSocket:function(e){return Et.createWebSocket(e)}}),ge={urls:ue,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ke=V({getSocket:function(e){return Et.HTTPFactory.createStreamingSocket(e)}},ge),be=V({getSocket:function(e){return Et.HTTPFactory.createPollingSocket(e)}},ge),_e={isSupported:function(){return Et.isXHRSupported()}},we={ws:me,xhr_streaming:new ye(V({},ke,_e)),xhr_polling:new ye(V({},be,_e))},xe=new ye({file:"sockjs",urls:ce,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:c.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),Se={isSupported:function(e){return Et.isXDRSupported(e.useTLS)}},Te=new ye(V({},ke,Se)),Ie=new ye(V({},be,Se));we.xdr_streaming=Te,we.xdr_polling=Ie,we.sockjs=xe;var Ee=we,Ce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Re=new(function(e){function t(){var t=e.call(this)||this,n=t;return void 0!==window.addEventListener&&(window.addEventListener("online",(function(){n.emit("online")}),!1),window.addEventListener("offline",(function(){n.emit("offline")}),!1)),t}return Ce(t,e),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(fe)),Ne=function(){function e(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(e,t,n,r){var i=this;r=V({},r,{activityTimeout:this.pingDelay});var a=this.transport.createConnection(e,t,n,r),o=null,s=function e(t){if(a.unbind("closed",e),1002===t.code||1003===t.code)i.manager.reportDeath();else if(!t.wasClean&&o){var n=j.now()-o;n<2*i.maxPingDelay&&(i.manager.reportDeath(),i.pingDelay=Math.max(n/2,i.minPingDelay))}};return a.bind("open",(function e(){a.unbind("open",e),a.bind("closed",s),o=j.now()})),a},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}(),Pe={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"===typeof n)try{n=JSON.parse(t.data)}catch(i){}var r={event:t.event,channel:t.channel,data:n};return t.user_id&&(r.user_id=t.user_id),r}catch(i){throw{type:"MessageParseError",error:i,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=Pe.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},Ae=Pe,Oe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),De=function(e){function t(t,n){var r=e.call(this)||this;return r.id=t,r.transport=n,r.activityTimeout=n.activityTimeout,r.bindListeners(),r}return Oe(t,e),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(e,t,n){var r={event:e,data:t};return n&&(r.channel=n),ee.debug("Event sent",r),this.send(Ae.encodeMessage(r))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var e=this,t={message:function(t){var n;try{n=Ae.decodeMessage(t)}catch(r){e.emit("error",{type:"MessageParseError",error:r,data:t.data})}if(void 0!==n){switch(ee.debug("Event recd",n),n.event){case"pusher:error":e.emit("error",{type:"PusherError",data:n.data});break;case"pusher:ping":e.emit("ping");break;case"pusher:pong":e.emit("pong")}e.emit("message",n)}},activity:function(){e.emit("activity")},error:function(t){e.emit("error",t)},closed:function(t){n(),t&&t.code&&e.handleCloseEvent(t),e.transport=null,e.emit("closed")}},n=function(){B(t,(function(t,n){e.transport.unbind(n,t)}))};B(t,(function(t,n){e.transport.bind(n,t)}))},t.prototype.handleCloseEvent=function(e){var t=Ae.getCloseAction(e),n=Ae.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})},t}(fe),Le=function(){function e(e,t){this.transport=e,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var e=this;this.onMessage=function(t){var n;e.unbindListeners();try{n=Ae.processHandshake(t)}catch(r){return e.finish("error",{error:r}),void e.transport.close()}"connected"===n.action?e.finish("connected",{connection:new De(n.id,e.transport),activityTimeout:n.activityTimeout}):(e.finish(n.action,{error:n.error}),e.transport.close())},this.onClosed=function(t){e.unbindListeners();var n=Ae.getCloseAction(t)||"backoff",r=Ae.getCloseError(t);e.finish(n,{error:r})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(e,t){this.callback(V({transport:this.transport,action:e},t))},e}(),Me=function(){function e(e,t){this.timeline=e,this.options=t||{}}return e.prototype.send=function(e,t){this.timeline.isEmpty()||this.timeline.send(Et.TimelineTransport.getAgent(this,e),t)},e}(),Fe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ue=function(e){function t(t,n){var r=e.call(this,(function(e,n){ee.debug("No callbacks on "+t+" for "+e)}))||this;return r.name=t,r.pusher=n,r.subscribed=!1,r.subscriptionPending=!1,r.subscriptionCancelled=!1,r}return Fe(t,e),t.prototype.authorize=function(e,t){return t(null,{auth:""})},t.prototype.trigger=function(e,t){if(0!==e.indexOf("client-"))throw new d("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=h("triggeringClientEvents");ee.warn("Client event triggered before channel 'subscription_succeeded' event . "+n)}return this.pusher.send_event(e,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):"pusher_internal:subscription_count"===t?this.handleSubscriptionCountEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)},t.prototype.handleSubscriptionCountEvent=function(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)},t.prototype.subscribe=function(){var e=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(function(t,n){t?(e.subscriptionPending=!1,ee.error(t.toString()),e.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:t.message},t instanceof _?{status:t.status}:{}))):e.pusher.send_event("pusher:subscribe",{auth:n.auth,channel_data:n.channel_data,channel:e.name})})))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(fe),je=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return je(t,e),t.prototype.authorize=function(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)},t}(Ue),ze=Ve,qe=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(e){var t=this;B(this.members,(function(n,r){e(t.get(r))}))},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),Be=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ze=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.members=new qe,r}return Be(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,(function(e,t){if(!e){if(void 0===t.channel_data){var i=h("authenticationEndpoint");return ee.error("Invalid auth response for channel '"+r.name+"',expected 'channel_data' field. "+i),void n("Invalid auth response")}var a=JSON.parse(t.channel_data);r.members.setMyID(a.user_id)}n(e,t)}))},t.prototype.handleEvent=function(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,r={};e.user_id&&(r.user_id=e.user_id),this.emit(t,n,r)}},t.prototype.handleInternalEvent=function(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var r=this.members.addMember(n);this.emit("pusher:member_added",r);break;case"pusher_internal:member_removed":var i=this.members.removeMember(n);i&&this.emit("pusher:member_removed",i)}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),e.prototype.disconnect.call(this)},t}(ze),We=n(1),He=n(0),Ke=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ge=function(e){function t(t,n,r){var i=e.call(this,t,n)||this;return i.key=null,i.nacl=r,i}return Ke(t,e),t.prototype.authorize=function(t,n){var r=this;e.prototype.authorize.call(this,t,(function(e,t){if(e)n(e,t);else{var i=t.shared_secret;i?(r.key=Object(He.decode)(i),delete t.shared_secret,n(null,t)):n(new Error("No shared_secret key in auth payload for encrypted channel: "+r.name),null)}}))},t.prototype.trigger=function(e,t){throw new g("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(t){var n=t.event,r=t.data;0!==n.indexOf("pusher_internal:")&&0!==n.indexOf("pusher:")?this.handleEncryptedEvent(n,r):e.prototype.handleEvent.call(this,t)},t.prototype.handleEncryptedEvent=function(e,t){var n=this;if(this.key)if(t.ciphertext&&t.nonce){var r=Object(He.decode)(t.ciphertext);if(r.length<this.nacl.secretbox.overheadLength)ee.error("Expected encrypted event ciphertext length to be "+this.nacl.secretbox.overheadLength+", got: "+r.length);else{var i=Object(He.decode)(t.nonce);if(i.length<this.nacl.secretbox.nonceLength)ee.error("Expected encrypted event nonce length to be "+this.nacl.secretbox.nonceLength+", got: "+i.length);else{var a=this.nacl.secretbox.open(r,i,this.key);if(null===a)return ee.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(function(t,o){t?ee.error("Failed to make a request to the authEndpoint: "+o+". Unable to fetch new key, so dropping encrypted event"):null!==(a=n.nacl.secretbox.open(r,i,n.key))?n.emit(e,n.getDataToEmit(a)):ee.error("Failed to decrypt event with new key. Dropping encrypted event")}));this.emit(e,this.getDataToEmit(a))}}}else ee.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);else ee.debug("Received encrypted event before key has been retrieved from the authEndpoint")},t.prototype.getDataToEmit=function(e){var t=Object(We.decode)(e);try{return JSON.parse(t)}catch(n){return t}},t}(ze),Qe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$e=function(e){function t(t,n){var r=e.call(this)||this;r.state="initialized",r.connection=null,r.key=t,r.options=n,r.timeline=r.options.timeline,r.usingTLS=r.options.useTLS,r.errorCallbacks=r.buildErrorCallbacks(),r.connectionCallbacks=r.buildConnectionCallbacks(r.errorCallbacks),r.handshakeCallbacks=r.buildHandshakeCallbacks(r.errorCallbacks);var i=Et.getNetwork();return i.bind("online",(function(){r.timeline.info({netinfo:"online"}),"connecting"!==r.state&&"unavailable"!==r.state||r.retryIn(0)})),i.bind("offline",(function(){r.timeline.info({netinfo:"offline"}),r.connection&&r.sendActivityCheck()})),r.updateStrategy(),r}return Qe(t,e),t.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var e=this;this.runner=this.strategy.connect(0,(function t(n,r){n?e.runner=e.strategy.connect(0,t):"error"===r.action?(e.emit("error",{type:"HandshakeError",error:r.error}),e.timeline.error({handshakeError:r.error})):(e.abortConnecting(),e.handshakeCallbacks[r.action](r))}))},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(e){var t=this;this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new M(e||0,(function(){t.disconnectInternally(),t.connect()}))},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new M(this.options.unavailableTimeout,(function(){e.updateState("unavailable")}))},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new M(this.options.pongTimeout,(function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)}))},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new M(this.activityTimeout,(function(){e.sendActivityCheck()})))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(e){var t=this;return V({},e,{message:function(e){t.resetActivityCheck(),t.emit("message",e)},ping:function(){t.send_event("pusher:pong",{})},activity:function(){t.resetActivityCheck()},error:function(e){t.emit("error",e)},closed:function(){t.abandonConnection(),t.shouldRetry()&&t.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(e){var t=this;return V({},e,{connected:function(e){t.activityTimeout=Math.min(t.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),t.clearUnavailableTimer(),t.setConnection(e.connection),t.socket_id=t.connection.id,t.updateState("connected",{socket_id:t.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var e=this,t=function(t){return function(n){n.error&&e.emit("error",{type:"WebSocketError",error:n.error}),t(n)}};return{tls_only:t((function(){e.usingTLS=!0,e.updateStrategy(),e.retryIn(0)})),refused:t((function(){e.disconnect()})),backoff:t((function(){e.retryIn(1e3)})),retry:t((function(){e.retryIn(0)}))}},t.prototype.setConnection=function(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(e,t){var n=this.state;if(this.state=e,n!==e){var r=e;"connected"===r&&(r+=" with new socket ID "+t.socket_id),ee.debug("State changed",n+" -> "+r),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(fe),Ye=function(){function e(){this.channels={}}return e.prototype.add=function(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return Je.createEncryptedChannel(e,t,t.config.nacl);var n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",r=h("encryptedChannelSupport");throw new g(n+". "+r)}if(0===e.indexOf("private-"))return Je.createPrivateChannel(e,t);if(0===e.indexOf("presence-"))return Je.createPresenceChannel(e,t);if(0===e.indexOf("#"))throw new p('Cannot create a channel with name "'+e+'".');return Je.createChannel(e,t)}(e,t)),this.channels[e]},e.prototype.all=function(){return function(e){var t=[];return B(e,(function(e){t.push(e)})),t}(this.channels)},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(e){var t=this.channels[e];return delete this.channels[e],t},e.prototype.disconnect=function(){B(this.channels,(function(e){e.disconnect()}))},e}(),Xe=Ye,Je={createChannels:function(){return new Xe},createConnectionManager:function(e,t){return new $e(e,t)},createChannel:function(e,t){return new Ue(e,t)},createPrivateChannel:function(e,t){return new ze(e,t)},createPresenceChannel:function(e,t){return new Ze(e,t)},createEncryptedChannel:function(e,t,n){return new Ge(e,t,n)},createTimelineSender:function(e,t){return new Me(e,t)},createHandshake:function(e,t){return new Le(e,t)},createAssistantToTheTransportManager:function(e,t,n){return new Ne(e,t,n)}},et=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return Je.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return this.livesLeft>0},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),tt=function(){function e(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return Q(this.strategies,j.method("isSupported"))},e.prototype.connect=function(e,t){var n=this,r=this.strategies,i=0,a=this.timeout,o=null;return o=this.tryStrategy(r[i],e,{timeout:a,failFast:this.failFast},(function s(u,c){c?t(null,c):(i+=1,n.loop&&(i%=r.length),i<r.length?(a&&(a*=2,n.timeoutLimit&&(a=Math.min(a,n.timeoutLimit))),o=n.tryStrategy(r[i],e,{timeout:a,failFast:n.failFast},s)):t(!0))})),{abort:function(){o.abort()},forceMinPriority:function(t){e=t,o&&o.forceMinPriority(t)}}},e.prototype.tryStrategy=function(e,t,n,r){var i=null,a=null;return n.timeout>0&&(i=new M(n.timeout,(function(){a.abort(),r(!0)}))),a=e.connect(t,(function(e,t){e&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),r(e,t))})),{abort:function(){i&&i.ensureAborted(),a.abort()},forceMinPriority:function(e){a.forceMinPriority(e)}}},e}(),nt=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return Q(this.strategies,j.method("isSupported"))},e.prototype.connect=function(e,t){return function(e,t,n){var r=H(e,(function(e,r,i,a){return e.connect(t,n(r,a))}));return{abort:function(){W(r,rt)},forceMinPriority:function(e){W(r,(function(t){t.forceMinPriority(e)}))}}}(this.strategies,e,(function(e,n){return function(r,i){n[e].error=r,r?function(e){return function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}(e,(function(e){return Boolean(e.error)}))}(n)&&t(!0):(W(n,(function(e){e.forceMinPriority(i.transport.priority)})),t(null,i))}}))},e}();function rt(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}var it=function(){function e(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.usingTLS,r=function(e){var t=Et.getLocalStorage();if(t)try{var n=t[ot(e)];if(n)return JSON.parse(n)}catch(r){st(e)}return null}(n),i=[this.strategy];if(r&&r.timestamp+this.ttl>=j.now()){var a=this.transports[r.transport];a&&(this.timeline.info({cached:!0,transport:r.transport,latency:r.latency}),i.push(new tt([a],{timeout:2*r.latency+1e3,failFast:!0})))}var o=j.now(),s=i.pop().connect(e,(function r(a,u){a?(st(n),i.length>0?(o=j.now(),s=i.pop().connect(e,r)):t(a)):(function(e,t,n){var r=Et.getLocalStorage();if(r)try{r[ot(e)]=X({timestamp:j.now(),transport:t,latency:n})}catch(i){}}(n,u.transport.name,j.now()-o),t(null,u))}));return{abort:function(){s.abort()},forceMinPriority:function(t){e=t,s&&s.forceMinPriority(t)}}},e}(),at=it;function ot(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function st(e){var t=Et.getLocalStorage();if(t)try{delete t[ot(e)]}catch(n){}}var ut=function(){function e(e,t){var n=t.delay;this.strategy=e,this.options={delay:n}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n,r=this.strategy,i=new M(this.options.delay,(function(){n=r.connect(e,t)}));return{abort:function(){i.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}},e}(),ct=function(){function e(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)},e}(),lt=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(e,t){var n=this.strategy.connect(e,(function(e,r){r&&n.abort(),t(e,r)}));return n},e}();function ht(e){return function(){return e.isSupported()}}var ft,dt=function(e,t,n){var r={};function i(t,i,a,o,s){var u=n(e,t,i,a,o,s);return r[t]=u,u}var a,o=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),s=Object.assign({},o,{useTLS:!0}),u=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},l=new et({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),h=new et({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),f=i("ws","ws",3,o,l),d=i("wss","ws",3,s,l),p=i("sockjs","sockjs",1,u),v=i("xhr_streaming","xhr_streaming",1,u,h),y=i("xdr_streaming","xdr_streaming",1,u,h),m=i("xhr_polling","xhr_polling",1,u),g=i("xdr_polling","xdr_polling",1,u),k=new tt([f],c),b=new tt([d],c),_=new tt([p],c),w=new tt([new ct(ht(v),v,y)],c),x=new tt([new ct(ht(m),m,g)],c),S=new tt([new ct(ht(w),new nt([w,new ut(x,{delay:4e3})]),x)],c),T=new ct(ht(S),S,_);return a=t.useTLS?new nt([k,new ut(T,{delay:2e3})]):new nt([k,new ut(b,{delay:2e3}),new ut(T,{delay:5e3})]),new at(new lt(new ct(ht(f),a,T)),r,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},pt={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new v),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},vt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yt=function(e){function t(t,n,r){var i=e.call(this)||this;return i.hooks=t,i.method=n,i.url=r,i}return vt(t,e),t.prototype.start=function(e){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},Et.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)},t.prototype.close=function(){this.unloader&&(Et.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(e,t){for(;;){var n=this.advanceBuffer(t);if(!n)break;this.emit("chunk",{status:e,data:n})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(e){var t=e.slice(this.position),n=t.indexOf("\n");return-1!==n?(this.position+=n+1,t.slice(0,n)):null},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&e.length>262144},t}(fe);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(ft||(ft={}));var mt=ft,gt=1;function kt(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+gt++}function bt(e){return Math.floor(Math.random()*e)}var _t,wt=function(){function e(e,t){this.hooks=e,this.session=bt(1e3)+"/"+function(e){for(var t=[],n=0;n<e;n++)t.push(bt(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=mt.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(e,t){this.onClose(e,t,!0)},e.prototype.sendRaw=function(e){if(this.readyState!==mt.OPEN)return!1;try{return Et.createSocketRequest("POST",kt((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(r){return!1}var t,n},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(e,t,n){this.closeStream(),this.readyState=mt.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})},e.prototype.onChunk=function(e){var t;if(200===e.status)switch(this.readyState===mt.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}},e.prototype.onOpen=function(e){this.readyState===mt.CONNECTING?(e&&e.hostname&&(this.location.base=function(e,t){var n=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(e);return n[1]+t+n[3]}(this.location.base,e.hostname)),this.readyState=mt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===mt.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var e=this;this.stream=Et.createSocketRequest("POST",kt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",(function(t){e.onChunk(t)})),this.stream.bind("finished",(function(t){e.hooks.onFinished(e,t)})),this.stream.bind("buffer_too_long",(function(){e.reconnect()}));try{this.stream.start()}catch(t){j.defer((function(){e.onError(t),e.onClose(1006,"Could not start streaming",!1)}))}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}(),xt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},St={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},Tt={getRequest:function(e){var t=new(Et.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},It={createStreamingSocket:function(e){return this.createSocket(xt,e)},createPollingSocket:function(e){return this.createSocket(St,e)},createSocket:function(e,t){return new wt(e,t)},createXHR:function(e,t){return this.createRequest(Tt,e,t)},createRequest:function(e,t,n){return new yt(e,t,n)},createXDR:function(e,t){return this.createRequest(pt,e,t)}},Et={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:a,DependenciesReceivers:u,getDefaultStrategy:dt,Transports:Ee,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),c.load(e.hooks.file,{useTLS:e.options.useTLS},(function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))}))):e.onClose()},HTTPFactory:It,TimelineTransport:ie,getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(e){var t=this;window.Pusher=e;var n=function(){t.onDocumentBody(e.ready)};window.JSON?n():c.load("json2",{},n)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:w,jsonp:te}},onDocumentBody:function(e){var t=this;document.body?e():setTimeout((function(){t.onDocumentBody(e)}),0)},createJSONPRequest:function(e,t){return new re(e,t)},createScriptRequest:function(e){return new ne(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){return}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return Re},createWebSocket:function(e){return new(this.getWebSocketAPI())(e)},createSocketRequest:function(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported:function(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener:function(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener:function(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)}};!function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(_t||(_t={}));var Ct=_t,Rt=function(){function e(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(e,t){e<=this.options.level&&(this.events.push(V({},t,{timestamp:j.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(Ct.ERROR,e)},e.prototype.info=function(e){this.log(Ct.INFO,e)},e.prototype.debug=function(e){this.log(Ct.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(e,t){var n=this,r=V({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(r,(function(e,r){e||n.sent++,t&&t(e,r)})),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),Nt=function(){function e(e,t,n,r){this.name=e,this.priority=t,this.transport=n,this.options=r||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(e,t){var n=this;if(!this.isSupported())return Pt(new b,t);if(this.priority<e)return Pt(new y,t);var r=!1,i=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),a=null,o=function e(){i.unbind("initialized",e),i.connect()},s=function(){a=Je.createHandshake(i,(function(e){r=!0,l(),t(null,e)}))},u=function(e){l(),t(e)},c=function(){var e;l(),e=X(i),t(new m(e))},l=function(){i.unbind("initialized",o),i.unbind("open",s),i.unbind("error",u),i.unbind("closed",c)};return i.bind("initialized",o),i.bind("open",s),i.bind("error",u),i.bind("closed",c),i.initialize(),{abort:function(){r||(l(),a?a.close():i.close())},forceMinPriority:function(e){r||n.priority<e&&(a?a.close():i.close())}}},e}();function Pt(e,t){return j.defer((function(){t(e)})),{abort:function(){},forceMinPriority:function(){}}}var At=Et.Transports,Ot=function(e,t,n,r,i,a){var o,s=At[n];if(!s)throw new k(n);return e.enabledTransports&&-1===q(e.enabledTransports,t)||e.disabledTransports&&-1!==q(e.disabledTransports,t)?o=Dt:(i=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},i),o=new Nt(t,r,a?a.getAssistant(s):s,i)),o},Dt={isSupported:function(){return!1},connect:function(e,t){var n=j.defer((function(){t(new b)}));return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},Lt=function(e){if("undefined"===typeof Et.getAuthorizers()[e.transport])throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var i=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);for(var r in t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);return n}(t,e);Et.getAuthorizers()[e.transport](Et,i,e,r.UserAuthentication,n)}},Mt=function(e){if("undefined"===typeof Et.getAuthorizers()[e.transport])throw"'"+e.transport+"' is not a recognized auth transport";return function(t,n){var i=function(e,t){var n="socket_id="+encodeURIComponent(e.socketId);for(var r in n+="&channel_name="+encodeURIComponent(e.channelName),t.params)n+="&"+encodeURIComponent(r)+"="+encodeURIComponent(t.params[r]);return n}(t,e);Et.getAuthorizers()[e.transport](Et,i,e,r.ChannelAuthorization,n)}},Ft=function(){return Ft=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ft.apply(this,arguments)};function Ut(e){return e.httpHost?e.httpHost:e.cluster?"sockjs-"+e.cluster+".pusher.com":o.httpHost}function jt(e){return e.wsHost?e.wsHost:e.cluster?Vt(e.cluster):Vt(o.cluster)}function Vt(e){return"ws-"+e+".pusher.com"}function zt(e){return"https:"===Et.getProtocol()||!1!==e.forceTLS}function qt(e){return"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats}function Bt(e){var t=Ft({},o.userAuthentication,e.userAuthentication);return"customHandler"in t&&null!=t.customHandler?t.customHandler:Lt(t)}function Zt(e,t){var n=function(e,t){var n;return"channelAuthorization"in e?n=Ft({},o.channelAuthorization,e.channelAuthorization):(n={transport:e.authTransport||o.authTransport,endpoint:e.authEndpoint||o.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e&&(n.customHandler=function(e,t,n){var r={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return function(t,i){var a=e.channel(t.channelName);n(a,r).authorize(t.socketId,i)}}(t,n,e.authorizer))),n}(e,t);return"customHandler"in n&&null!=n.customHandler?n.customHandler:Mt(n)}var Wt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ht=function(e){function t(t){var n=e.call(this,(function(e,t){ee.debug("No callbacks on user for "+e)}))||this;return n.signin_requested=!1,n.user_data=null,n.serverToUserChannel=null,n.pusher=t,n.pusher.connection.bind("connected",(function(){n._signin()})),n.pusher.connection.bind("connecting",(function(){n._disconnect()})),n.pusher.connection.bind("disconnected",(function(){n._disconnect()})),n.pusher.connection.bind("message",(function(e){"pusher:signin_success"===e.event&&n._onSigninSuccess(e.data),n.serverToUserChannel&&n.serverToUserChannel.name===e.channel&&n.serverToUserChannel.handleEvent(e)})),n}return Wt(t,e),t.prototype.signin=function(){this.signin_requested||(this.signin_requested=!0,this._signin())},t.prototype._signin=function(){var e=this;this.signin_requested&&"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},(function(t,n){t?ee.warn("Error during signin: "+t):e.pusher.send_event("pusher:signin",{auth:n.auth,user_data:n.user_data})}))},t.prototype._onSigninSuccess=function(e){try{this.user_data=JSON.parse(e.user_data)}catch(t){return void ee.error("Failed parsing user data after signin: "+e.user_data)}"string"===typeof this.user_data.id&&""!==this.user_data.id?this._subscribeChannels():ee.error("user_data doesn't contain an id. user_data: "+this.user_data)},t.prototype._subscribeChannels=function(){var e,t=this;this.serverToUserChannel=new Ue("#server-to-user-"+this.user_data.id,this.pusher),this.serverToUserChannel.bind_global((function(e,n){0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")&&t.emit(e,n)})),(e=this.serverToUserChannel).subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==t.pusher.connection.state||e.subscribe()},t.prototype._disconnect=function(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null)},t}(fe),Kt=function(){function e(t,n){var r=this;if(function(e){if(null===e||void 0===e)throw"You must pass your app key when you instantiate Pusher."}(t),!(n=n||{}).cluster&&!n.wsHost&&!n.httpHost){var i=h("javascriptQuickStart");ee.warn("You should always specify a cluster when connecting. "+i)}"disableStats"in n&&ee.warn("The disableStats option is deprecated in favor of enableStats"),this.key=t,this.config=function(e,t){var n={activityTimeout:e.activityTimeout||o.activityTimeout,cluster:e.cluster||o.cluster,httpPath:e.httpPath||o.httpPath,httpPort:e.httpPort||o.httpPort,httpsPort:e.httpsPort||o.httpsPort,pongTimeout:e.pongTimeout||o.pongTimeout,statsHost:e.statsHost||o.stats_host,unavailableTimeout:e.unavailableTimeout||o.unavailableTimeout,wsPath:e.wsPath||o.wsPath,wsPort:e.wsPort||o.wsPort,wssPort:e.wssPort||o.wssPort,enableStats:qt(e),httpHost:Ut(e),useTLS:zt(e),wsHost:jt(e),userAuthenticator:Bt(e),channelAuthorizer:Zt(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}(n,this),this.channels=Je.createChannels(),this.global_emitter=new fe,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new Rt(this.key,this.sessionID,{cluster:this.config.cluster,features:e.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Ct.INFO,version:o.VERSION}),this.config.enableStats&&(this.timelineSender=Je.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+Et.TimelineTransport.name})),this.connection=Je.createConnectionManager(this.key,{getStrategy:function(e){return Et.getDefaultStrategy(r.config,e,Ot)},timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",(function(){r.subscribeAll(),r.timelineSender&&r.timelineSender.send(r.connection.isUsingTLS())})),this.connection.bind("message",(function(e){var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=r.channel(e.channel);n&&n.handleEvent(e)}t||r.global_emitter.emit(e.event,e.data)})),this.connection.bind("connecting",(function(){r.channels.disconnect()})),this.connection.bind("disconnected",(function(){r.channels.disconnect()})),this.connection.bind("error",(function(e){ee.warn(e)})),e.instances.push(this),this.timeline.info({instances:e.instances.length}),this.user=new Ht(this),e.isReady&&this.connect()}return e.ready=function(){e.isReady=!0;for(var t=0,n=e.instances.length;t<n;t++)e.instances[t].connect()},e.getClientFeatures=function(){return Z(G({ws:Et.Transports.ws},(function(e){return e.isSupported({})})))},e.prototype.channel=function(e){return this.channels.find(e)},e.prototype.allChannels=function(){return this.channels.all()},e.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new F(6e4,(function(){t.send(e)}))}},e.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},e.prototype.bind=function(e,t,n){return this.global_emitter.bind(e,t,n),this},e.prototype.unbind=function(e,t,n){return this.global_emitter.unbind(e,t,n),this},e.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},e.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},e.prototype.unbind_all=function(e){return this.global_emitter.unbind_all(),this},e.prototype.subscribeAll=function(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},e.prototype.subscribe=function(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},e.prototype.unsubscribe=function(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()},e.prototype.send_event=function(e,t,n){return this.connection.send_event(e,t,n)},e.prototype.shouldUseTLS=function(){return this.config.useTLS},e.prototype.signin=function(){this.user.signin()},e.instances=[],e.isReady=!1,e.logToConsole=!1,e.Runtime=Et,e.ScriptReceivers=Et.ScriptReceivers,e.DependenciesReceivers=Et.DependenciesReceivers,e.auth_callbacks=Et.auth_callbacks,e}(),Gt=t.default=Kt;Et.setup(Kt)}])},e.exports=t()},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var u="\n"+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=o&&0<=s);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case w:return"Portal";case T:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ae(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,he=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,xe=null,Se=null;function Te(e){if(e=ki(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=_i(t),we(e.stateNode,e.type,t))}}function Ie(e){xe?Se?Se.push(e):Se=[e]:xe=e}function Ee(){if(xe){var e=xe,t=Se;if(Se=xe=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Re(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Se)&&(Re(),Ee())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,s,u){Me=!1,Fe=null,Le.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(qe(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ze(i),e;if(o===r)return Ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ye=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,xt,St,Tt,It=!1,Et=[],Ct=null,Rt=null,Nt=null,Pt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void Tt(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Rt&&Ut(Rt)&&(Rt=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(jt),At.forEach(jt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function qt(e){function t(t){return zt(t,e)}if(0<Et.length){zt(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Rt&&zt(Rt,e),null!==Nt&&zt(Nt,e),Pt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var Bt=b.ReactCurrentBatchConfig,Zt=!0;function Wt(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=1,Kt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Ht(e,t,n,r){var i=kt,a=Bt.transition;Bt.transition=null;try{kt=4,Kt(e,t,n,r)}finally{kt=i,Bt.transition=a}}function Kt(e,t,n,r){if(Zt){var i=Qt(e,t,n,r);if(null===i)Zr(e,t,r,Gt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Rt=Mt(Rt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&_t(a),null===(a=Qt(e,t,n,r))&&Zr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=gi(e=_e(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Xt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),hn=F({},cn,{view:0,detail:0}),fn=an(hn),dn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(on=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=on=0,un=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},hn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Tn(){return Sn}var In=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=an(Pn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var Bn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Bn[e.type]:"textarea"===t}function Wn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Gn(e){Ur(e,0)}function Qn(e){if(K(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Yn=!1;if(l){var Xn;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Xn=Jn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Wn(t,Kn,e,_e(e)),Pe(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ar(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==G(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&ur(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},xr={},Sr={};function Tr(e){if(xr[e])return xr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return xr[e]=n[t];return e}l&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Ir=Tr("animationend"),Er=Tr("animationiteration"),Cr=Tr("animationstart"),Rr=Tr("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(e,t){Nr.set(e,t),u(t,[e])}for(var Or=0;Or<Pr.length;Or++){var Dr=Pr[Or];Ar(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Ar(Ir,"onAnimationEnd"),Ar(Er,"onAnimationIteration"),Ar(Cr,"onAnimationStart"),Ar("dblclick","onDoubleClick"),Ar("focusin","onFocus"),Ar("focusout","onBlur"),Ar(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,u,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}else for(o=0;o<r.length;o++){if(u=(s=r[o]).instance,c=s.currentTarget,s=s.listener,u!==a&&i.isPropagationStopped())break e;Fr(i,s,c),a=u}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Br(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),Br(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function Br(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&((u=o.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=gi(s)))return;if(5===(u=o.tag)||6===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=_e(n),o=[];e:{var s=Nr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=En;break;case"focusin":c="focus",u=yn;break;case"focusout":c="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Ir:case Er:case Cr:u=mn;break;case Rr:u=Nn;break;case"scroll":u=fn;break;case"wheel":u=An;break;case"copy":case"cut":case"paste":u=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cn}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ae(p,f))&&l.push(Wr(p,v,d)))),h)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(h=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==u?s:bi(u),d=null==c?s:bi(c),(s=new l(v,p+"leave",u,n,i)).target=h,s.relatedTarget=d,v=null,gi(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,u&&c)e:{for(f=c,p=0,d=l=u;d;d=Kr(d))p++;for(d=0,v=f;v;v=Kr(v))d++;for(;0<p-d;)l=Kr(l),p--;for(;0<d-p;)f=Kr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Kr(l),f=Kr(f)}l=null}else l=null;null!==u&&Gr(o,s,u,l,!1),null!==c&&null!==h&&Gr(o,h,c,l,!0)}if("select"===(u=(s=r?bi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var y=$n;else if(Zn(s))if(Yn)y=or;else{y=ir;var m=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(y=ar);switch(y&&(y=y(e,r))?Wn(o,y,n,i):(m&&m(e,s,r),"focusout"===e&&(m=s._wrapperState)&&m.controlled&&"number"===s.type&&ee(s,"number",s.value)),m=r?bi(r):window,e){case"focusin":(Zn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Dn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else qn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&qn&&(g=en()):(Xt="value"in(Yt=i)?Yt.value:Yt.textContent,qn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Jt=Xt=Yt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Ae(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Ae(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ae(n,a))&&o.unshift(Wr(n,u,s)):i||null!=(u=Ae(n,a))&&o.push(Wr(n,u,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,yi="__reactListeners$"+hi,mi="__reactHandles$"+hi;function gi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[fi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function _i(e){return e[di]||null}var wi=[],xi=-1;function Si(e){return{current:e}}function Ti(e){0>xi||(e.current=wi[xi],wi[xi]=null,xi--)}function Ii(e,t){xi++,wi[xi]=e.current,e.current=t}var Ei={},Ci=Si(Ei),Ri=Si(!1),Ni=Ei;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ei;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ai(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ti(Ri),Ti(Ci)}function Di(e,t,n){if(Ci.current!==Ei)throw Error(a(168));Ii(Ci,t),Ii(Ri,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,B(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Ni=Ci.current,Ii(Ci,e),Ii(Ri,Ri.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ri),Ti(Ci),Ii(Ci,e)):Ti(Ri),Ii(Ri,n)}var Ui=null,ji=!1,Vi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Je,qi),i}finally{kt=t,Vi=!1}}return null}var Bi=[],Zi=0,Wi=null,Hi=0,Ki=[],Gi=0,Qi=null,$i=1,Yi="";function Xi(e,t){Bi[Zi++]=Hi,Bi[Zi++]=Wi,Wi=e,Hi=t}function Ji(e,t,n){Ki[Gi++]=$i,Ki[Gi++]=Yi,Ki[Gi++]=Qi,Qi=e;var r=$i;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else $i=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Xi(e,1),Ji(e,1,0))}function ta(e){for(;e===Wi;)Wi=Bi[--Zi],Bi[Zi]=null,Hi=Bi[--Zi],Bi[Zi]=null;for(;e===Qi;)Qi=Ki[--Gi],Ki[Gi]=null,Yi=Ki[--Gi],Ki[Gi]=null,$i=Ki[--Gi],Ki[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:$i,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function ua(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(ua(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(ua(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(ua(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Si(null),ga=null,ka=null,ba=null;function _a(){ba=ka=ga=null}function wa(e){var t=ma.current;Ti(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Sa(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ea(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ea(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ra(e,r)}function Ra(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Aa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ra(e,n)}return null===(i=r.interleaved)?(t.next=t,Ea(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ra(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===o?a=c:o.next=c,o=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==a){var h=i.baseState;for(o=0,l=c=u=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(f=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=v.payload)?p.call(d,h,f):p)||void 0===f)break e;h=F({},h,f);break e;case 2:Na=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=h):l=l.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===l&&(u=h),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Mu|=o,e.lanes=o,e.memoizedState=h}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function qa(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,a))}function Ba(e,t,n){var r=!1,i=Ei,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Ai(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ei),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Ai(t)?Ni:Ci.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ka(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===A&&Ga(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case w:return(t=Uc(t,e.mode,n)).return=e,t;case A:return f(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ka(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?l(e,t,n,r):null;case A:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Ka(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Ka(t,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,s[v],u);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===s.length)return n(i,h),ia&&Xi(i,v),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return ia&&Xi(i,v),c}for(h=r(i,h);v<s.length;v++)null!==(y=p(h,i,v,s[v],u))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),ia&&Xi(i,v),c}function y(i,s,u,c){var l=L(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,y=s=0,m=null,g=u.next();null!==v&&!g.done;y++,g=u.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),s=o(k,s,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),ia&&Xi(i,y),l;if(null===v){for(;!g.done;y++,g=u.next())null!==(g=f(i,g.value,c))&&(s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return ia&&Xi(i,y),l}for(v=r(i,v);!g.done;y++,g=u.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),s=o(g,s,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Xi(i,y),l}return function e(r,a,o,u){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&Ga(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,u,o.key)).return=r,r=a):((u=Dc(o.type,o.key,o.props,null,r.mode,u)).ref=Ha(r,a,o),u.return=r,r=u)}return s(r);case w:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,u)).return=r,r=a}return s(r);case A:return e(r,a,(l=o._init)(o._payload),u)}if(te(o))return v(r,a,o,u);if(L(o))return y(r,a,o,u);Ka(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,u)).return=r,r=a),s(r)):n(r,a)}}var $a=Qa(!0),Ya=Qa(!1),Xa={},Ja=Si(Xa),eo=Si(Xa),to=Si(Xa);function no(e){if(e===Xa)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Ja,Xa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Ja),Ii(Ja,t)}function io(){Ti(Ja),Ti(eo),Ti(to)}function ao(e){no(to.current);var t=no(Ja.current),n=ue(t,e.type);t!==n&&(Ii(eo,e),Ii(Ja,n))}function oo(e){eo.current===e&&(Ti(Ja),Ti(eo))}var so=Si(0);function uo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,bo=0,_o=0;function wo(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function So(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,ho.current=cs,e=n(r,i)}while(ko)}if(ho.current=os,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function To(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function Eo(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Ro(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var u=s=null,c=null,l=o;do{var h=l.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=f,s=r):c=c.next=f,vo.lanes|=h,Mu|=h}l=l.next}while(null!==l&&l!==o);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Mu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=Eo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ao(e,t){var n=vo,r=Eo(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Zo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,jo(9,Do.bind(null,n,r,i,t),void 0,null),null===Ru)throw Error(a(349));0!==(30&po)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Ra(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return Eo().memoizedState}function zo(e,t,n,r){var i=Io();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function qo(e,t,n,r){var i=Eo();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function Bo(e,t){return zo(8390656,8,e,t)}function Zo(e,t){return qo(2048,8,e,t)}function Wo(e,t){return qo(4,2,e,t)}function Ho(e,t){return qo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4,4,Ko.bind(null,t,e),n)}function Qo(){}function $o(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Eo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Mu|=n,e.baseState=!0),t)}function Jo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{kt=n,fo.transition=r}}function es(){return Eo().memoizedState}function ts(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),as(n,t,r)}}function ns(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var u=t.interleaved;return null===u?(i.next=i,Ea(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var os={readContext:Ta,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Ta,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:Bo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:Qo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Jo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ru)throw Error(a(349));0!==(30&po)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Bo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ru.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Ta,useCallback:$o,useContext:Ta,useEffect:Zo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Yo,useReducer:Ro,useRef:Vo,useState:function(){return Ro(Co)},useDebugValue:Qo,useDeferredValue:function(e){return Xo(Eo(),yo.memoizedState,e)},useTransition:function(){return[Ro(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1},cs={readContext:Ta,useCallback:$o,useContext:Ta,useEffect:Zo,useImperativeHandle:Go,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Yo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:Qo,useDeferredValue:function(e){var t=Eo();return null===yo?t.memoizedState=e:Xo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],Eo().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ao,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zu||(Zu=!0,Wu=r),fs(0,t)},n}function vs(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ys(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ks=b.ReactCurrentOwner,bs=!1;function _s(e,t,n,r){t.child=null===e?Ya(t,null,n,r):$a(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Sa(t,i),r=So(e,t,n,r,a,i),n=To(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zs(e,t,i))}function xs(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Ac(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Ss(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(o,r)&&e.ref===t.ref)return Zs(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(ur(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Zs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return Es(e,t,n,r,i)}function Ts(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ou,Au),Au|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ou,Au),Au|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Ou,Au),Au|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Ou,Au),Au|=r;return _s(e,t,i,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,i){var a=Ai(n)?Ni:Ci.current;return a=Pi(t,a),Sa(t,i),n=So(e,t,n,r,a,i),r=To(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Zs(e,t,i))}function Cs(e,t,n,r,i){if(Ai(n)){var a=!0;Mi(t)}else a=!1;if(Sa(t,i),null===t.stateNode)Bs(e,t),Ba(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var u=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Pi(t,c=Ai(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||u!==c)&&Za(t,o,r,c),Na=!1;var f=t.memoizedState;o.state=f,Fa(t,r,o,i),u=t.memoizedState,s!==r||f!==u||Ri.current||Na?("function"===typeof l&&(Va(t,n,l,r),u=t.memoizedState),(s=Na||qa(t,n,s,r,f,u,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=c,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Aa(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ya(t.type,s),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(u=n.contextType)&&null!==u?u=Ta(u):u=Pi(t,u=Ai(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==u)&&Za(t,o,r,u),Na=!1,f=t.memoizedState,o.state=f,Fa(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ri.current||Na?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Na||qa(t,n,c,r,f,p,u)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,u),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return Rs(e,t,n,r,a,i)}function Rs(e,t,n,r,i,a){Is(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Zs(e,t,a);r=t.stateNode,ks.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):_s(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ns(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Ps(e,t,n,r,i){return da(),pa(i),t.flags|=256,_s(e,t,n,r),t.child}var As,Os,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ms(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(so,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=Mc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ms(n),t.memoizedState=Ls,e):Us(t,u));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,js(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=Ms(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return js(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,js(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(u=0!==(s&e.childLanes),bs||u){if(null!==(r=Ru)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ra(e,i),nc(r,e,i,-1))}return vc(),js(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Ki[Gi++]=$i,Ki[Gi++]=Yi,Ki[Gi++]=Qi,$i=e.id,Yi=e.overflow,Qi=t),(t=Us(t,r.children)).flags|=4096,t)}(e,t,u,i,r,o,n);if(s){s=i.fallback,u=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Oc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?Ms(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Oc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function js(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vs(e,n,t);else if(19===e.tag)Vs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,a);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Mu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ai(t.type)&&Oi(),Hs(t),null;case 3:return r=t.stateNode,io(),Ti(Ri),Ti(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Os(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hs(t),null}if(e=no(Ja.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var u in ge(n,o),i=null,o)if(o.hasOwnProperty(u)){var c=o[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&jr("scroll",r)}switch(n){case"input":H(r),J(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[fi]=t,e[di]=r,As(e,t),t.stateNode=e;e:{switch(u=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Q(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&he(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&fe(e,l):"number"===typeof l&&fe(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,u))}switch(n){case"input":H(e),J(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Ds(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ti(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Du&&(Du=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return io(),null===e&&qr(t.stateNode.containerInfo),Hs(t),null;case 10:return wa(t.type._context),Hs(t),null;case 19:if(Ti(so),null===(o=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=o.rendering))if(r)Ws(o,!1);else{if(0!==Du||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=uo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>qu&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uo(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!u.alternate&&!ia)return Hs(t),null}else 2*Ye()-o.renderingStartTime>qu&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=o.last)?n.sibling=u:t.child=u,o.last=u)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=so.current,Ii(so,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Au)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Gs(e,t){switch(ta(t),t.tag){case 1:return Ai(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ri),Ti(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}As=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Qs=!1,$s=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function eu(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tu=!1;function nu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&eu(t,n,a)}i=i.next}while(i!==r)}}function ru(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function iu(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function su(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(uu(e,t,n),e=e.sibling;null!==e;)uu(e,t,n),e=e.sibling}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}var lu=null,hu=!1;function fu(e,t,n){for(n=n.child;null!==n;)du(e,t,n),n=n.sibling}function du(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||Js(n,t);case 6:var r=lu,i=hu;lu=null,fu(e,t,n),hu=i,null!==(lu=r)&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lu.removeChild(n.stateNode));break;case 18:null!==lu&&(hu?(e=lu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),qt(e)):ui(lu,n.stateNode));break;case 4:r=lu,i=hu,lu=n.stateNode.containerInfo,hu=!0,fu(e,t,n),lu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&eu(n,t,o),i=i.next}while(i!==r)}fu(e,t,n);break;case 1:if(!$s&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Sc(n,t,s)}fu(e,t,n);break;case 21:fu(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,fu(e,t,n),$s=r):fu(e,t,n);break;default:fu(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:lu=u.stateNode,hu=!1;break e;case 3:case 4:lu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===lu)throw Error(a(160));du(o,s,i),lu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yu(t,e),t=t.sibling}function yu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vu(t,e),mu(e),4&r){try{nu(3,e,e.return),ru(3,e)}catch(y){Sc(e,e.return,y)}try{nu(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:vu(t,e),mu(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(vu(t,e),mu(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===o.type&&null!=o.name&&Y(i,o),ke(u,s);var l=ke(u,o);for(s=0;s<c.length;s+=2){var h=c[s],f=c[s+1];"style"===h?ye(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):k(i,h,f,l)}switch(u){case"input":X(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(vu(t,e),mu(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(vu(t,e),mu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:vu(t,e),mu(e);break;case 13:vu(t,e),mu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zu=Ye())),4&r&&pu(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($s=(l=$s)||h,vu(t,e),$s=l):vu(t,e),mu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!h&&0!==(1&e.mode))for(Xs=e,h=e.child;null!==h;){for(f=Xs=h;null!==Xs;){switch(p=(d=Xs).child,d.tag){case 0:case 11:case 14:case 15:nu(4,d,d.return);break;case 1:Js(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:Js(d,d.return);break;case 22:if(null!==d.memoizedState){_u(f);continue}}null!==p?(p.return=d,Xs=p):_u(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(u=f.stateNode,s=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ve("display",s))}catch(y){Sc(e,e.return,y)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vu(t,e),mu(e),4&r&&pu(e);case 21:}}function mu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cu(e,su(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;uu(e,su(e),o);break;default:throw Error(a(161))}}catch(s){Sc(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gu(e,t,n){Xs=e,ku(e,t,n)}function ku(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var i=Xs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Qs;if(!o){var s=i.alternate,u=null!==s&&null!==s.memoizedState||$s;s=Qs;var c=$s;if(Qs=o,($s=u)&&!c)for(Xs=i;null!==Xs;)u=(o=Xs).child,22===o.tag&&null!==o.memoizedState?wu(i):null!==u?(u.return=o,Xs=u):wu(i);for(;null!==a;)Xs=a,ku(a,t,n),a=a.sibling;Xs=i,Qs=s,$s=c}bu(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Xs=a):bu(e)}}function bu(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||ru(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var h=l.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&qt(f)}}}break;default:throw Error(a(163))}$s||512&t.flags&&iu(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function _u(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function wu(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ru(4,t)}catch(u){Sc(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Sc(t,i,u)}}var a=t.return;try{iu(t)}catch(u){Sc(t,a,u)}break;case 5:var o=t.return;try{iu(t)}catch(u){Sc(t,o,u)}}}catch(u){Sc(t,t.return,u)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var xu,Su=Math.ceil,Tu=b.ReactCurrentDispatcher,Iu=b.ReactCurrentOwner,Eu=b.ReactCurrentBatchConfig,Cu=0,Ru=null,Nu=null,Pu=0,Au=0,Ou=Si(0),Du=0,Lu=null,Mu=0,Fu=0,Uu=0,ju=null,Vu=null,zu=0,qu=1/0,Bu=null,Zu=!1,Wu=null,Hu=null,Ku=!1,Gu=null,Qu=0,$u=0,Yu=null,Xu=-1,Ju=0;function ec(){return 0!==(6&Cu)?Ye():-1!==Xu?Xu:Xu=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cu)&&0!==Pu?Pu&-Pu:null!==va.transition?(0===Ju&&(Ju=vt()),Ju):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,r){if(50<$u)throw $u=0,Yu=null,Error(a(185));mt(e,n,r),0!==(2&Cu)&&e===Ru||(e===Ru&&(0===(2&Cu)&&(Fu|=n),4===Du&&sc(e,Pu)),rc(e,r),1===n&&0===Cu&&0===(1&t.mode)&&(qu=Ye()+500,ji&&qi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,u=i[o];-1===u?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Ru?Pu:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){ji=!0,zi(e)}(uc.bind(null,e)):zi(uc.bind(null,e)),oi((function(){0===(6&Cu)&&qi()})),n=null;else{switch(bt(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Xu=-1,Ju=0,0!==(6&Cu))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=ft(e,e===Ru?Pu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Cu;Cu|=2;var o=pc();for(Ru===e&&Pu===t||(Bu=null,qu=Ye()+500,fc(e,t));;)try{gc();break}catch(u){dc(e,u)}_a(),Tu.current=o,Cu=i,null!==Nu?t=0:(Ru=null,Pu=0,t=Du)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Lu,fc(e,0),sc(e,r),rc(e,Ye()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Lu,fc(e,0),sc(e,r),rc(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,Vu,Bu);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zu+500-Ye())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,Vu,Bu),t);break}_c(e,Vu,Bu);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Su(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,Vu,Bu),r);break}_c(e,Vu,Bu);break;default:throw Error(a(329))}}}return rc(e,Ye()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=Vu,Vu=n,null!==t&&oc(t)),e}function oc(e){null===Vu?Vu=e:Vu.push.apply(Vu,e)}function sc(e,t){for(t&=~Uu,t&=~Fu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Cu))throw Error(a(327));wc();var t=ft(e,0);if(0===(1&t))return rc(e,Ye()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Lu,fc(e,0),sc(e,t),rc(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Vu,Bu),rc(e,Ye()),null}function cc(e,t){var n=Cu;Cu|=1;try{return e(t)}finally{0===(Cu=n)&&(qu=Ye()+500,ji&&qi())}}function lc(e){null!==Gu&&0===Gu.tag&&0===(6&Cu)&&wc();var t=Cu;Cu|=1;var n=Eu.transition,r=kt;try{if(Eu.transition=null,kt=1,e)return e()}finally{kt=r,Eu.transition=n,0===(6&(Cu=t))&&qi()}}function hc(){Au=Ou.current,Ti(Ou)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Nu)for(n=Nu.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Ti(Ri),Ti(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(so);break;case 10:wa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ru=e,Nu=e=Oc(e.current,null),Pu=Au=t,Du=0,Lu=null,Uu=Fu=Mu=0,Vu=ju=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function dc(e,t){for(;;){var n=Nu;try{if(_a(),ho.current=os,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,bo=0,Iu.current=null,null===n||null===n.return){Du=1,Lu=t,Nu=null;break}e:{var o=e,s=n.return,u=n,c=t;if(t=Pu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,h=u,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,u,0,t),1&p.mode&&ys(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){ys(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&u.mode){var m=ms(s);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gs(m,s,u,0,t),pa(ls(c,u));break e}}o=c=ls(c,u),4!==Du&&(Du=2),null===ju?ju=[o]:ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,ps(0,c,t));break e;case 1:u=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hu||!Hu.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vs(o,u,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Nu===n&&null!==n&&(Nu=n=n.return);continue}break}}function pc(){var e=Tu.current;return Tu.current=os,null===e?os:e}function vc(){0!==Du&&3!==Du&&2!==Du||(Du=4),null===Ru||0===(268435455&Mu)&&0===(268435455&Fu)||sc(Ru,Pu)}function yc(e,t){var n=Cu;Cu|=2;var r=pc();for(Ru===e&&Pu===t||(Bu=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(_a(),Cu=n,Tu.current=r,null!==Nu)throw Error(a(261));return Ru=null,Pu=0,Du}function mc(){for(;null!==Nu;)kc(Nu)}function gc(){for(;null!==Nu&&!Qe();)kc(Nu)}function kc(e){var t=xu(e.alternate,e,Au);e.memoizedProps=e.pendingProps,null===t?bc(e):Nu=t,Iu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Au)))return void(Nu=n)}else{if(null!==(n=Gs(n,t)))return n.flags&=32767,void(Nu=n);if(null===e)return Du=6,void(Nu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Nu=t);Nu=t=e}while(null!==t);0===Du&&(Du=5)}function _c(e,t,n){var r=kt,i=Eu.transition;try{Eu.transition=null,kt=1,function(e,t,n,r){do{wc()}while(null!==Gu);if(0!==(6&Cu))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ru&&(Nu=Ru=null,Pu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ku||(Ku=!0,Rc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Eu.transition,Eu.transition=null;var s=kt;kt=1;var u=Cu;Cu|=4,Iu.current=null,function(e,t){if(ei=Zt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var s=0,u=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(u=s+i),f!==o||0!==r&&3!==f.nodeType||(c=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(u=s),d===o&&++h===r&&(c=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Zt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}v=tu,tu=!1}(e,n),yu(n,e),pr(ti),Zt=!!ei,ti=ei=null,e.current=n,gu(n,e,i),$e(),Cu=u,kt=s,Eu.transition=o}else e.current=n;if(Ku&&(Ku=!1,Gu=e,Qu=i),0===(o=e.pendingLanes)&&(Hu=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r((i=t[n]).value,{componentStack:i.stack,digest:i.digest});if(Zu)throw Zu=!1,e=Wu,Wu=null,e;0!==(1&Qu)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Yu?$u++:($u=0,Yu=e):$u=0,qi()}(e,t,n,r)}finally{Eu.transition=i,kt=r}return null}function wc(){if(null!==Gu){var e=bt(Qu),t=Eu.transition,n=kt;try{if(Eu.transition=null,kt=16>e?16:e,null===Gu)var r=!1;else{if(e=Gu,Gu=null,Qu=0,0!==(6&Cu))throw Error(a(331));var i=Cu;for(Cu|=4,Xs=e.current;null!==Xs;){var o=Xs,s=o.child;if(0!==(16&Xs.flags)){var u=o.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Xs=l;null!==Xs;){var h=Xs;switch(h.tag){case 0:case 11:case 15:nu(8,h,o)}var f=h.child;if(null!==f)f.return=h,Xs=f;else for(;null!==Xs;){var d=(h=Xs).sibling,p=h.return;if(au(h),h===l){Xs=null;break}if(null!==d){d.return=p,Xs=d;break}Xs=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Xs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(o=Xs).flags))switch(o.tag){case 0:case 11:case 15:nu(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Xs=g;break e}Xs=o.return}}var k=e.current;for(Xs=k;null!==Xs;){var b=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Xs=b;else e:for(s=k;null!==Xs;){if(0!==(2048&(u=Xs).flags))try{switch(u.tag){case 0:case 11:case 15:ru(9,u)}}catch(w){Sc(u,u.return,w)}if(u===s){Xs=null;break e}var _=u.sibling;if(null!==_){_.return=u.return,Xs=_;break e}Xs=u.return}}if(Cu=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{kt=n,Eu.transition=t}}return!1}function xc(e,t,n){e=Da(e,t=ps(0,t=ls(n,t),1),1),t=ec(),null!==e&&(mt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Da(t,e=vs(t,e=ls(n,e),1),1),e=ec(),null!==t&&(mt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ru===e&&(Pu&n)===n&&(4===Du||3===Du&&(130023424&Pu)===Pu&&500>Ye()-zu?fc(e,0):Uu|=n),rc(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Ra(e,t))&&(mt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Rc(e,t){return Ke(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ac(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case S:s=8,i|=8;break;case T:return(e=Pc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case R:return(e=Pc(13,n,t,i)).elementType=R,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case E:s=9;break e;case C:s=11;break e;case P:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,s,u){return e=new jc(e,t,n,s,u),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function zc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qc(e){if(!e)return Ei;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ai(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ai(n))return Li(e,n,t)}return t}function Bc(e,t,n,r,i,a,o,s,u){return(e=Vc(n,r,!0,e,0,a,0,s,u)).context=qc(null),n=e.current,(a=Oa(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,mt(e,i,r),rc(e,r),e}function Zc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xu=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Ns(t),da();break;case 5:ao(t);break;case 1:Ai(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ii(so,1&so.current),null!==(e=Zs(e,t,n))?e.sibling:null);Ii(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Zs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Bs(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);Sa(t,n),i=So(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ai(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=Rs(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Bs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Es(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=xs(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Ns(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Aa(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=ls(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=ls(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Zs(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Is(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ii(ma,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ri.current){t=Zs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var u=o.dependencies;if(null!==u){s=o.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var h=(l=l.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),xa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Sa(t,n),r=r(i=Ta(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xs(e,t,r,i=ya(r.type,i),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Bs(e,t),t.tag=1,Ai(r)?(e=!0,Mi(t)):e=!1,Sa(t,n),Ba(t,r,i),Wa(t,r,i,n),Rs(null,t,r,!0,e,n);case 19:return qs(e,t,n);case 22:return Ts(e,t,n)}throw Error(a(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Wc(o);s.call(e)}}Zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wc(u);s.call(e)}}var u=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=u,e[pi]=u.current,qr(8===e.nodeType?e.parentNode:e),lc((function(){Zc(t,u,n,r)})),u}(n,t,e,i,r);return Wc(o)}$c.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zc(e,t,null,null)},$c.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Zc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Ye()),0===(6&Cu)&&(qu=Ye()+500,qi()))}break;case 13:lc((function(){var t=Ra(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Kc(e,1)}},wt=function(e){if(13===e.tag){var t=Ra(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Ra(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},St=function(){return kt},Tt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},we=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(a(90));K(r),X(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Re=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,_i,Ie,Ee,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(a(200));return zc(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(a(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!u.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:s.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,v(b,m.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===a[i]&&(a[i]=u[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return o=o(u=e),e=""===a?"."+C(u,0):a,_(o)?(i="",null!=e&&(i=e.replace(E,"$&/")+"/"),R(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||u&&u.key===o.key?"":(""+o.key).replace(E,"$&/")+"/")+e)),t.push(o)),1;if(u=0,a=""===a?".":a+":",_(e))for(var c=0;c<e.length;c++){var l=a+C(s=e[c],c);u+=R(s,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=R(s=s.value,t,i,l=a+C(s,c++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>a(u,n))c<i&&0>a(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(y=!1,b(e),!v)if(null!==r(c))v=!0,O(w);else{var t=r(l);null!==t&&D(_,t.startTime-e)}}function w(e,n){v=!1,y&&(y=!1,g(I),I=-1),p=!0;var a=d;try{for(b(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!R());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(c)&&i(c),b(n)}else i(c);f=r(c)}if(null!==f)var u=!0;else{var h=r(l);null!==h&&D(_,h.startTime-n),u=!1}return u}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,S=!1,T=null,I=-1,E=5,C=-1;function R(){return!(t.unstable_now()-C<E)}function N(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?x():(S=!1,T=null)}}else S=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,A=P.port2;P.port1.onmessage=N,x=function(){A.postMessage(null)}}else x=function(){m(N,0)};function O(e){T=e,S||(S=!0,x())}function D(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,O(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(I),I=-1):y=!0,D(_,a-o))):(e.sortIndex=s,n(c,e),v||p||(v=!0,O(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},4836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},4942:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{Z:function(){return r}})},7462:function(e,t,n){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{Z:function(){return r}})},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},3366:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}n.d(t,{Z:function(){return r}})},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var i=n(181),a=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(9199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".6ff90581.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="messaging-app-frontend:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,u;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],u=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkmessaging_app_frontend=self.webpackChunkmessaging_app_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return Ot},SDK_VERSION:function(){return tr},_DEFAULT_ENTRY_NAME:function(){return qn},_addComponent:function(){return Hn},_addOrOverwriteComponent:function(){return Kn},_apps:function(){return Zn},_clearComponents:function(){return Yn},_components:function(){return Wn},_getProvider:function(){return Qn},_registerComponent:function(){return Gn},_removeServiceInstance:function(){return $n},deleteApp:function(){return ar},getApp:function(){return rr},getApps:function(){return ir},initializeApp:function(){return nr},onLog:function(){return ur},registerVersion:function(){return sr},setLogLevel:function(){return cr}});var t=n(2791),r=n.t(t,2),i=n(1250),a=n(3433),o=n(9439),s=n(3366),u=n(7462),c=n(8182),l=n(4419),h=n(4012),f=n(2507),d=n(9201),p=n(184),v=(0,d.Z)((0,p.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),y=n(1217),m=n(5878);function g(e){return(0,y.Z)("MuiAvatar",e)}(0,m.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var k=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],b=(0,h.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],n.colorDefault&&t.colorDefault]}})((function(e){var t=e.theme,n=e.ownerState;return(0,u.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===n.variant&&{borderRadius:(t.vars||t).shape.borderRadius},"square"===n.variant&&{borderRadius:0},n.colorDefault&&(0,u.Z)({color:(t.vars||t).palette.background.default},t.vars?{backgroundColor:t.vars.palette.Avatar.defaultBg}:{backgroundColor:"light"===t.palette.mode?t.palette.grey[400]:t.palette.grey[600]}))})),_=(0,h.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(e,t){return t.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),w=(0,h.ZP)(v,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(e,t){return t.fallback}})({width:"75%",height:"75%"});var x=t.forwardRef((function(e,n){var r=(0,f.Z)({props:e,name:"MuiAvatar"}),i=r.alt,a=r.children,h=r.className,d=r.component,v=void 0===d?"div":d,y=r.imgProps,m=r.sizes,x=r.src,S=r.srcSet,T=r.variant,I=void 0===T?"circular":T,E=(0,s.Z)(r,k),C=null,R=function(e){var n=e.crossOrigin,r=e.referrerPolicy,i=e.src,a=e.srcSet,s=t.useState(!1),u=(0,o.Z)(s,2),c=u[0],l=u[1];return t.useEffect((function(){if(i||a){l(!1);var e=!0,t=new Image;return t.onload=function(){e&&l("loaded")},t.onerror=function(){e&&l("error")},t.crossOrigin=n,t.referrerPolicy=r,t.src=i,a&&(t.srcset=a),function(){e=!1}}}),[n,r,i,a]),c}((0,u.Z)({},y,{src:x,srcSet:S})),N=x||S,P=N&&"error"!==R,A=(0,u.Z)({},r,{colorDefault:!P,component:v,variant:I}),O=function(e){var t=e.classes,n={root:["root",e.variant,e.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,l.Z)(n,g,t)}(A);return C=P?(0,p.jsx)(_,(0,u.Z)({alt:i,src:x,srcSet:S,sizes:m,ownerState:A,className:O.img},y)):null!=a?a:N&&i?i[0]:(0,p.jsx)(w,{className:O.fallback}),(0,p.jsx)(b,(0,u.Z)({as:v,ownerState:A,className:(0,c.Z)(O.root,h),ref:n},E,{children:C}))})),S=x;var T=function(e){var n,r=e.messages,i=(0,t.useState)(""),a=(0,o.Z)(i,2),s=(a[0],a[1]);return(0,t.useEffect)((function(){s(Math.floor(5e3*Math.random()))}),[]),(0,p.jsxs)("div",{className:"sidebarChat",children:[(0,p.jsx)(S,{src:"https://media-exp2.licdn.com/dms/image/C4E0BAQGIlYsjeJ1xcg/company-logo_200_200/0/1620334581399?e=2147483647&v=beta&t=ILX3XXTqOao8Y5yAuBMjn9SUvkdFlaK4CiHQfhHYK_0"}),(0,p.jsxs)("div",{className:"sidebarChat_info",children:[(0,p.jsx)("h2",{children:"Group chat"}),(0,p.jsx)("p",{children:null===(n=r[r.length-1])||void 0===n?void 0:n.message})]})]})},I=(0,t.createContext)(),E=function(e){var n=e.reducer,r=e.initialState,i=e.children;return(0,p.jsx)(I.Provider,{value:(0,t.useReducer)(n,r),children:i})},C=function(){return(0,t.useContext)(I)},R=n(4942),N=n(2065),P=n(4843),A=n(6868),O=n(3031);function D(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}var F=t.createContext(null);function U(e,n){var r=Object.create(null);return e&&t.Children.map(e,(function(e){return e})).forEach((function(e){r[e.key]=function(e){return n&&(0,t.isValidElement)(e)?n(e):e}(e)})),r}function j(e,t,n){return null!=n[t]?n[t]:e.props[t]}function V(e,n,r){var i=U(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var s={};for(var u in t){if(i[u])for(r=0;r<i[u].length;r++){var c=i[u][r];s[i[u][r]]=n(c)}s[u]=n(u)}for(r=0;r<a.length;r++)s[a[r]]=n(a[r]);return s}(n,i);return Object.keys(a).forEach((function(o){var s=a[o];if((0,t.isValidElement)(s)){var u=o in n,c=o in i,l=n[o],h=(0,t.isValidElement)(l)&&!l.props.in;!c||u&&!h?c||!u||h?c&&u&&(0,t.isValidElement)(l)&&(a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:l.props.in,exit:j(s,"exit",e),enter:j(s,"enter",e)})):a[o]=(0,t.cloneElement)(s,{in:!1}):a[o]=(0,t.cloneElement)(s,{onExited:r.bind(null,s),in:!0,exit:j(s,"exit",e),enter:j(s,"enter",e)})}})),a}var z=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},q=function(e){var n,r;function i(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(L(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,M(n,r);var a=i.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},i.getDerivedStateFromProps=function(e,n){var r,i,a=n.children,o=n.handleExited;return{children:n.firstRender?(r=e,i=o,U(r.children,(function(e){return(0,t.cloneElement)(e,{onExited:i.bind(null,e),in:!0,appear:j(e,"appear",r),enter:j(e,"enter",r),exit:j(e,"exit",r)})}))):V(e,a,o),firstRender:!1}},a.handleExited=function(e,t){var n=U(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=(0,u.Z)({},t.children);return delete n[e.key],{children:n}})))},a.render=function(){var e=this.props,n=e.component,r=e.childFactory,i=(0,s.Z)(e,["component","childFactory"]),a=this.state.contextValue,o=z(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,null===n?t.createElement(F.Provider,{value:a},o):t.createElement(F.Provider,{value:a},t.createElement(n,i,o))},i}(t.Component);q.propTypes={},q.defaultProps={component:"div",childFactory:function(e){return e}};var B=q,Z=(n(76),n(2110),n(1346));r.useInsertionEffect?r.useInsertionEffect:t.useLayoutEffect;function W(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Z.O)(t)}var H=function(){var e=W.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var K=function(e){var n=e.className,r=e.classes,i=e.pulsate,a=void 0!==i&&i,s=e.rippleX,u=e.rippleY,l=e.rippleSize,h=e.in,f=e.onExited,d=e.timeout,v=t.useState(!1),y=(0,o.Z)(v,2),m=y[0],g=y[1],k=(0,c.Z)(n,r.ripple,r.rippleVisible,a&&r.ripplePulsate),b={width:l,height:l,top:-l/2+u,left:-l/2+s},_=(0,c.Z)(r.child,m&&r.childLeaving,a&&r.childPulsate);return h||m||g(!0),t.useEffect((function(){if(!h&&null!=f){var e=setTimeout(f,d);return function(){clearTimeout(e)}}}),[f,h,d]),(0,p.jsx)("span",{className:k,style:b,children:(0,p.jsx)("span",{className:_})})};var G,Q,$,Y,X,J,ee,te,ne=(0,m.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),re=["center","classes","className"],ie=H(X||(X=G||(G=D(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),ae=H(J||(J=Q||(Q=D(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),oe=H(ee||(ee=$||($=D(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),se=(0,h.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ue=(0,h.ZP)(K,{name:"MuiTouchRipple",slot:"Ripple"})(te||(te=Y||(Y=D(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),ne.rippleVisible,ie,550,(function(e){return e.theme.transitions.easing.easeInOut}),ne.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),ne.child,ne.childLeaving,ae,550,(function(e){return e.theme.transitions.easing.easeInOut}),ne.childPulsate,oe,(function(e){return e.theme.transitions.easing.easeInOut})),ce=t.forwardRef((function(e,n){var r=(0,f.Z)({props:e,name:"MuiTouchRipple"}),i=r.center,l=void 0!==i&&i,h=r.classes,d=void 0===h?{}:h,v=r.className,y=(0,s.Z)(r,re),m=t.useState([]),g=(0,o.Z)(m,2),k=g[0],b=g[1],_=t.useRef(0),w=t.useRef(null);t.useEffect((function(){w.current&&(w.current(),w.current=null)}),[k]);var x=t.useRef(!1),S=t.useRef(null),T=t.useRef(null),I=t.useRef(null);t.useEffect((function(){return function(){clearTimeout(S.current)}}),[]);var E=t.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,o=e.cb;b((function(e){return[].concat((0,a.Z)(e),[(0,p.jsx)(ue,{classes:{ripple:(0,c.Z)(d.ripple,ne.ripple),rippleVisible:(0,c.Z)(d.rippleVisible,ne.rippleVisible),ripplePulsate:(0,c.Z)(d.ripplePulsate,ne.ripplePulsate),child:(0,c.Z)(d.child,ne.child),childLeaving:(0,c.Z)(d.childLeaving,ne.childLeaving),childPulsate:(0,c.Z)(d.childPulsate,ne.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},_.current)])})),_.current+=1,w.current=o}),[d]),C=t.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,a=t.center,o=void 0===a?l||t.pulsate:a,s=t.fakeElement,u=void 0!==s&&s;if("mousedown"===(null==e?void 0:e.type)&&x.current)x.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(x.current=!0);var c,h,f,d=u?null:I.current,p=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(o||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)c=Math.round(p.width/2),h=Math.round(p.height/2);else{var v=e.touches?e.touches[0]:e,y=v.clientX,m=v.clientY;c=Math.round(y-p.left),h=Math.round(m-p.top)}if(o)(f=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(f+=1);else{var g=2*Math.max(Math.abs((d?d.clientWidth:0)-c),c)+2,k=2*Math.max(Math.abs((d?d.clientHeight:0)-h),h)+2;f=Math.sqrt(Math.pow(g,2)+Math.pow(k,2))}null!=e&&e.touches?null===T.current&&(T.current=function(){E({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})},S.current=setTimeout((function(){T.current&&(T.current(),T.current=null)}),80)):E({pulsate:i,rippleX:c,rippleY:h,rippleSize:f,cb:n})}}),[l,E]),R=t.useCallback((function(){C({},{pulsate:!0})}),[C]),N=t.useCallback((function(e,t){if(clearTimeout(S.current),"touchend"===(null==e?void 0:e.type)&&T.current)return T.current(),T.current=null,void(S.current=setTimeout((function(){N(e,t)})));T.current=null,b((function(e){return e.length>0?e.slice(1):e})),w.current=t}),[]);return t.useImperativeHandle(n,(function(){return{pulsate:R,start:C,stop:N}}),[R,C,N]),(0,p.jsx)(se,(0,u.Z)({className:(0,c.Z)(d.root,ne.root,v),ref:I},y,{children:(0,p.jsx)(B,{component:null,exit:!0,children:k})}))})),le=ce;function he(e){return(0,y.Z)("MuiButtonBase",e)}var fe,de=(0,m.Z)("MuiButtonBase",["root","disabled","focusVisible"]),pe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],ve=(0,h.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((fe={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,R.Z)(fe,"&.".concat(de.disabled),{pointerEvents:"none",cursor:"default"}),(0,R.Z)(fe,"@media print",{colorAdjust:"exact"}),fe)),ye=t.forwardRef((function(e,n){var r=(0,f.Z)({props:e,name:"MuiButtonBase"}),i=r.action,a=r.centerRipple,h=void 0!==a&&a,d=r.children,v=r.className,y=r.component,m=void 0===y?"button":y,g=r.disabled,k=void 0!==g&&g,b=r.disableRipple,_=void 0!==b&&b,w=r.disableTouchRipple,x=void 0!==w&&w,S=r.focusRipple,T=void 0!==S&&S,I=r.LinkComponent,E=void 0===I?"a":I,C=r.onBlur,R=r.onClick,N=r.onContextMenu,D=r.onDragLeave,L=r.onFocus,M=r.onFocusVisible,F=r.onKeyDown,U=r.onKeyUp,j=r.onMouseDown,V=r.onMouseLeave,z=r.onMouseUp,q=r.onTouchEnd,B=r.onTouchMove,Z=r.onTouchStart,W=r.tabIndex,H=void 0===W?0:W,K=r.TouchRippleProps,G=r.touchRippleRef,Q=r.type,$=(0,s.Z)(r,pe),Y=t.useRef(null),X=t.useRef(null),J=(0,P.Z)(X,G),ee=(0,O.Z)(),te=ee.isFocusVisibleRef,ne=ee.onFocus,re=ee.onBlur,ie=ee.ref,ae=t.useState(!1),oe=(0,o.Z)(ae,2),se=oe[0],ue=oe[1];k&&se&&ue(!1),t.useImperativeHandle(i,(function(){return{focusVisible:function(){ue(!0),Y.current.focus()}}}),[]);var ce=t.useState(!1),fe=(0,o.Z)(ce,2),de=fe[0],ye=fe[1];t.useEffect((function(){ye(!0)}),[]);var me=de&&!_&&!k;function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x;return(0,A.Z)((function(r){return t&&t(r),!n&&X.current&&X.current[e](r),!0}))}t.useEffect((function(){se&&T&&!_&&de&&X.current.pulsate()}),[_,T,se,de]);var ke=ge("start",j),be=ge("stop",N),_e=ge("stop",D),we=ge("stop",z),xe=ge("stop",(function(e){se&&e.preventDefault(),V&&V(e)})),Se=ge("start",Z),Te=ge("stop",q),Ie=ge("stop",B),Ee=ge("stop",(function(e){re(e),!1===te.current&&ue(!1),C&&C(e)}),!1),Ce=(0,A.Z)((function(e){Y.current||(Y.current=e.currentTarget),ne(e),!0===te.current&&(ue(!0),M&&M(e)),L&&L(e)})),Re=function(){var e=Y.current;return m&&"button"!==m&&!("A"===e.tagName&&e.href)},Ne=t.useRef(!1),Pe=(0,A.Z)((function(e){T&&!Ne.current&&se&&X.current&&" "===e.key&&(Ne.current=!0,X.current.stop(e,(function(){X.current.start(e)}))),e.target===e.currentTarget&&Re()&&" "===e.key&&e.preventDefault(),F&&F(e),e.target===e.currentTarget&&Re()&&"Enter"===e.key&&!k&&(e.preventDefault(),R&&R(e))})),Ae=(0,A.Z)((function(e){T&&" "===e.key&&X.current&&se&&!e.defaultPrevented&&(Ne.current=!1,X.current.stop(e,(function(){X.current.pulsate(e)}))),U&&U(e),R&&e.target===e.currentTarget&&Re()&&" "===e.key&&!e.defaultPrevented&&R(e)})),Oe=m;"button"===Oe&&($.href||$.to)&&(Oe=E);var De={};"button"===Oe?(De.type=void 0===Q?"button":Q,De.disabled=k):($.href||$.to||(De.role="button"),k&&(De["aria-disabled"]=k));var Le=(0,P.Z)(ie,Y),Me=(0,P.Z)(n,Le);var Fe=(0,u.Z)({},r,{centerRipple:h,component:m,disabled:k,disableRipple:_,disableTouchRipple:x,focusRipple:T,tabIndex:H,focusVisible:se}),Ue=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=e.classes,a={root:["root",t&&"disabled",n&&"focusVisible"]},o=(0,l.Z)(a,he,i);return n&&r&&(o.root+=" ".concat(r)),o}(Fe);return(0,p.jsxs)(ve,(0,u.Z)({as:Oe,className:(0,c.Z)(Ue.root,v),ownerState:Fe,onBlur:Ee,onClick:R,onContextMenu:be,onFocus:Ce,onKeyDown:Pe,onKeyUp:Ae,onMouseDown:ke,onMouseLeave:xe,onMouseUp:we,onDragLeave:_e,onTouchEnd:Te,onTouchMove:Ie,onTouchStart:Se,ref:Me,tabIndex:k?-1:H,type:Q},De,$,{children:[d,me?(0,p.jsx)(le,(0,u.Z)({ref:J,center:h},K)):null]}))})),me=ye,ge=n(4036);function ke(e){return(0,y.Z)("MuiIconButton",e)}var be=(0,m.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),_e=["edge","children","className","color","disabled","disableFocusRipple","size"],we=(0,h.ZP)(me,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat((0,ge.Z)(n.color))],n.edge&&t["edge".concat((0,ge.Z)(n.edge))],t["size".concat((0,ge.Z)(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return(0,u.Z)({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.active," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,N.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t=e.theme,n=e.ownerState;return(0,u.Z)({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&(0,u.Z)({color:(t.vars||t).palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,N.Fq)(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},(0,R.Z)({},"&.".concat(be.disabled),{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}))})),xe=t.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,a=n.children,o=n.className,h=n.color,d=void 0===h?"default":h,v=n.disabled,y=void 0!==v&&v,m=n.disableFocusRipple,g=void 0!==m&&m,k=n.size,b=void 0===k?"medium":k,_=(0,s.Z)(n,_e),w=(0,u.Z)({},n,{edge:i,color:d,disabled:y,disableFocusRipple:g,size:b}),x=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,a=e.size,o={root:["root",n&&"disabled","default"!==r&&"color".concat((0,ge.Z)(r)),i&&"edge".concat((0,ge.Z)(i)),"size".concat((0,ge.Z)(a))]};return(0,l.Z)(o,ke,t)}(w);return(0,p.jsx)(we,(0,u.Z)({className:(0,c.Z)(x.root,o),centerRipple:!0,focusRipple:!g,disabled:y,ref:t,ownerState:w},_,{children:a}))})),Se=n(7807),Te=n(8326),Ie=n(2898),Ee=n(7250);var Ce=function(e){var t=e.messages,n=C(),r=(0,o.Z)(n,2),i=r[0].user;return r[1],(0,p.jsxs)("div",{className:"sidebar",children:[(0,p.jsxs)("div",{className:"sidebar_header",children:[(0,p.jsx)(S,{src:null===i||void 0===i?void 0:i.photoURL}),(0,p.jsxs)("div",{className:"sidebar_headerRight",children:[(0,p.jsx)(xe,{children:(0,p.jsx)(Se.Z,{})}),(0,p.jsx)(xe,{children:(0,p.jsx)(Te.Z,{})}),(0,p.jsx)(xe,{children:(0,p.jsx)(Ie.Z,{})})]})]}),(0,p.jsx)("div",{className:"sidebar_search",children:(0,p.jsxs)("div",{className:"sidebar_searchContainer",children:[(0,p.jsx)(Ee.Z,{}),(0,p.jsx)("input",{placeholder:"Search or start new chat",type:"text"})]})}),(0,p.jsx)("div",{className:"sidebar_chats",children:(0,p.jsx)(T,{messages:t})})]})};function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Ne(){Ne=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(I){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var i=t&&t.prototype instanceof h?t:h,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return T()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=b(o,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var l={};function h(){}function f(){}function d(){}var p={};s(p,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(S([])));y&&y!==t&&n.call(y,i)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function g(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function r(i,a,o,s){var u=c(e[i],e,a);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==Re(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(u.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=d,s(m,"constructor",d),s(d,"constructor",f),f.displayName=s(d,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,o,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},g(k.prototype),s(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(u(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},g(m),s(m,o,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=S,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),u=n.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),w(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;w(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function Pe(e,t,n,r,i,a,o){try{var s=e[a](o),u=s.value}catch(td){return void n(td)}s.done?t(u):Promise.resolve(u).then(r,i)}function Ae(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Pe(a,r,i,o,s,"next",e)}function s(e){Pe(a,r,i,o,s,"throw",e)}o(void 0)}))}}var Oe=(0,d.Z)((0,p.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined"),De=(0,d.Z)((0,p.jsx)("path",{d:"M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z"}),"AttachFile"),Le=(0,d.Z)((0,p.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert"),Me=(0,d.Z)((0,p.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm3.5-9c.83 0 1.5-.67 1.5-1.5S16.33 8 15.5 8 14 8.67 14 9.5s.67 1.5 1.5 1.5zm-7 0c.83 0 1.5-.67 1.5-1.5S9.33 8 8.5 8 7 8.67 7 9.5 7.67 11 8.5 11zm3.5 6.5c2.33 0 4.31-1.46 5.11-3.5H6.89c.8 2.04 2.78 3.5 5.11 3.5z"}),"InsertEmoticon"),Fe=n(5436),Ue=n(4569),je=n.n(Ue)().create({baseURL:"https://messaging-app-mern123.herokuapp.com/"});var Ve=function(e){var n,r=e.messages,i=C(),a=(0,o.Z)(i,2),s=a[0].user,u=(a[1],(0,t.useState)("")),c=(0,o.Z)(u,2),l=(c[0],c[1]),h=(0,t.useState)(""),f=(0,o.Z)(h,2),d=f[0],v=f[1],y=function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,je.post("/messages/new",{message:d,name:s.displayName,timestamp:(new Date).toLocaleTimeString(),received:!0});case 3:v("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,t.useEffect)((function(){l(Math.floor(5e3*Math.random()))}),[]),(0,p.jsxs)("div",{className:"chat",children:[(0,p.jsxs)("div",{className:"chat_header",children:[(0,p.jsx)(S,{src:"https://media-exp2.licdn.com/dms/image/C4E0BAQGIlYsjeJ1xcg/company-logo_200_200/0/1620334581399?e=2147483647&v=beta&t=ILX3XXTqOao8Y5yAuBMjn9SUvkdFlaK4CiHQfhHYK_0"}),(0,p.jsxs)("div",{className:"chat_headerInfo",children:[(0,p.jsx)("h3",{children:"Project done by Miko\u0142aj Sodzawiczny"}),(0,p.jsxs)("p",{children:["Last seen at at ",""," ",null===(n=r[r.length-1])||void 0===n?void 0:n.timestamp]})]}),(0,p.jsxs)("div",{className:"chat_headerRight",children:[(0,p.jsx)(xe,{children:(0,p.jsx)(Oe,{})}),(0,p.jsx)(xe,{children:(0,p.jsx)(De,{})}),(0,p.jsx)(xe,{children:(0,p.jsx)(Le,{})})]})]}),(0,p.jsx)("div",{className:"chat_body",children:r.map((function(e){return(0,p.jsxs)("p",{className:"chat_message ".concat(e.name===s.displayName&&"chat_receiver"),children:[(0,p.jsx)("span",{className:"chat_name",children:e.name}),e.message,(0,p.jsx)("span",{className:"chat_timestamp",children:e.timestamp})]})}))}),(0,p.jsxs)("div",{className:"chat_footer",children:[(0,p.jsx)(Me,{}),(0,p.jsxs)("form",{children:[(0,p.jsx)("input",{placeholder:"Type a message",value:d,onChange:function(e){return v(e.target.value)},type:"text",required:!0}),(0,p.jsx)("button",{onClick:y,type:"submit",children:"Send a message"})]}),(0,p.jsx)(Fe.Z,{})]})]})},ze=n(8281),qe=n.n(ze);var Be=n(5735);function Ze(e){return(0,y.Z)("MuiButton",e)}var We=(0,m.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var He=t.createContext({}),Ke=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ge=function(e){return(0,u.Z)({},"small"===e.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===e.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===e.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},Qe=(0,h.ZP)(me,{shouldForwardProp:function(e){return(0,h.FO)(e)||"classes"===e},name:"MuiButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat((0,ge.Z)(n.color))],t["size".concat((0,ge.Z)(n.size))],t["".concat(n.variant,"Size").concat((0,ge.Z)(n.size))],"inherit"===n.color&&t.colorInherit,n.disableElevation&&t.disableElevation,n.fullWidth&&t.fullWidth]}})((function(e){var t,n,r,i=e.theme,a=e.ownerState;return(0,u.Z)({},i.typography.button,(t={minWidth:64,padding:"6px 16px",borderRadius:(i.vars||i).shape.borderRadius,transition:i.transitions.create(["background-color","box-shadow","border-color","color"],{duration:i.transitions.duration.short}),"&:hover":(0,u.Z)({textDecoration:"none",backgroundColor:i.vars?"rgba(".concat(i.vars.palette.text.primaryChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,N.Fq)(i.palette.text.primary,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===a.variant&&"inherit"!==a.color&&{backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,N.Fq)(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===a.variant&&"inherit"!==a.color&&{border:"1px solid ".concat((i.vars||i).palette[a.color].main),backgroundColor:i.vars?"rgba(".concat(i.vars.palette[a.color].mainChannel," / ").concat(i.vars.palette.action.hoverOpacity,")"):(0,N.Fq)(i.palette[a.color].main,i.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===a.variant&&{backgroundColor:(i.vars||i).palette.grey.A100,boxShadow:(i.vars||i).shadows[4],"@media (hover: none)":{boxShadow:(i.vars||i).shadows[2],backgroundColor:(i.vars||i).palette.grey[300]}},"contained"===a.variant&&"inherit"!==a.color&&{backgroundColor:(i.vars||i).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(i.vars||i).palette[a.color].main}}),"&:active":(0,u.Z)({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[8]})},(0,R.Z)(t,"&.".concat(We.focusVisible),(0,u.Z)({},"contained"===a.variant&&{boxShadow:(i.vars||i).shadows[6]})),(0,R.Z)(t,"&.".concat(We.disabled),(0,u.Z)({color:(i.vars||i).palette.action.disabled},"outlined"===a.variant&&{border:"1px solid ".concat((i.vars||i).palette.action.disabledBackground)},"outlined"===a.variant&&"secondary"===a.color&&{border:"1px solid ".concat((i.vars||i).palette.action.disabled)},"contained"===a.variant&&{color:(i.vars||i).palette.action.disabled,boxShadow:(i.vars||i).shadows[0],backgroundColor:(i.vars||i).palette.action.disabledBackground})),t),"text"===a.variant&&{padding:"6px 8px"},"text"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main},"outlined"===a.variant&&{padding:"5px 15px",border:"1px solid currentColor"},"outlined"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].main,border:i.vars?"1px solid rgba(".concat(i.vars.palette[a.color].mainChannel," / 0.5)"):"1px solid ".concat((0,N.Fq)(i.palette[a.color].main,.5))},"contained"===a.variant&&{color:i.vars?i.vars.palette.text.primary:null==(n=(r=i.palette).getContrastText)?void 0:n.call(r,i.palette.grey[300]),backgroundColor:(i.vars||i).palette.grey[300],boxShadow:(i.vars||i).shadows[2]},"contained"===a.variant&&"inherit"!==a.color&&{color:(i.vars||i).palette[a.color].contrastText,backgroundColor:(i.vars||i).palette[a.color].main},"inherit"===a.color&&{color:"inherit",borderColor:"currentColor"},"small"===a.size&&"text"===a.variant&&{padding:"4px 5px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"text"===a.variant&&{padding:"8px 11px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"outlined"===a.variant&&{padding:"3px 9px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"outlined"===a.variant&&{padding:"7px 21px",fontSize:i.typography.pxToRem(15)},"small"===a.size&&"contained"===a.variant&&{padding:"4px 10px",fontSize:i.typography.pxToRem(13)},"large"===a.size&&"contained"===a.variant&&{padding:"8px 22px",fontSize:i.typography.pxToRem(15)},a.fullWidth&&{width:"100%"})}),(function(e){var t;return e.ownerState.disableElevation&&(t={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,R.Z)(t,"&.".concat(We.focusVisible),{boxShadow:"none"}),(0,R.Z)(t,"&:active",{boxShadow:"none"}),(0,R.Z)(t,"&.".concat(We.disabled),{boxShadow:"none"}),t)})),$e=(0,h.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.startIcon,t["iconSize".concat((0,ge.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,u.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===t.size&&{marginLeft:-2},Ge(t))})),Ye=(0,h.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(e,t){var n=e.ownerState;return[t.endIcon,t["iconSize".concat((0,ge.Z)(n.size))]]}})((function(e){var t=e.ownerState;return(0,u.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===t.size&&{marginRight:-2},Ge(t))})),Xe=t.forwardRef((function(e,n){var r=t.useContext(He),i=(0,Be.Z)(r,e),a=(0,f.Z)({props:i,name:"MuiButton"}),o=a.children,h=a.color,d=void 0===h?"primary":h,v=a.component,y=void 0===v?"button":v,m=a.className,g=a.disabled,k=void 0!==g&&g,b=a.disableElevation,_=void 0!==b&&b,w=a.disableFocusRipple,x=void 0!==w&&w,S=a.endIcon,T=a.focusVisibleClassName,I=a.fullWidth,E=void 0!==I&&I,C=a.size,R=void 0===C?"medium":C,N=a.startIcon,P=a.type,A=a.variant,O=void 0===A?"text":A,D=(0,s.Z)(a,Ke),L=(0,u.Z)({},a,{color:d,component:y,disabled:k,disableElevation:_,disableFocusRipple:x,fullWidth:E,size:R,type:P,variant:O}),M=function(e){var t=e.color,n=e.disableElevation,r=e.fullWidth,i=e.size,a=e.variant,o=e.classes,s={root:["root",a,"".concat(a).concat((0,ge.Z)(t)),"size".concat((0,ge.Z)(i)),"".concat(a,"Size").concat((0,ge.Z)(i)),"inherit"===t&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,ge.Z)(i))],endIcon:["endIcon","iconSize".concat((0,ge.Z)(i))]},c=(0,l.Z)(s,Ze,o);return(0,u.Z)({},o,c)}(L),F=N&&(0,p.jsx)($e,{className:M.startIcon,ownerState:L,children:N}),U=S&&(0,p.jsx)(Ye,{className:M.endIcon,ownerState:L,children:S});return(0,p.jsxs)(Qe,(0,u.Z)({ownerState:L,className:(0,c.Z)(m,r.className),component:y,disabled:k,focusRipple:!x,focusVisibleClassName:(0,c.Z)(M.focusVisible,T),ref:n,type:P},D,{classes:M,children:[F,o,U]}))})),Je=Xe;function et(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t,n){return t&&tt(e.prototype,t),n&&tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var rt=n(181);function it(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,rt.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function at(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function st(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ut(e,t){if(t&&("object"===Re(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function ct(e){var t=st();return function(){var n,r=ot(e);if(t){var i=ot(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ut(this,n)}}function lt(e,t,n){return lt=st()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&M(i,n.prototype),i},lt.apply(null,arguments)}function ht(e){var t="function"===typeof Map?new Map:void 0;return ht=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return lt(e,arguments,ot(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),M(n,e)},ht(e)}var ft=!1,dt=!1,pt="${JSCORE_VERSION}",vt=function(e,t){if(!e)throw yt(t)},yt=function(e){return new Error("Firebase Database ("+pt+") INTERNAL ASSERT FAILED: "+e)},mt=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},gt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=a>>2,h=(3&a)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(mt(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var s=e[n++],u=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==u)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==s){var l=o<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},kt=function(e){var t=mt(e);return gt.encodeByteArray(t,!0)},bt=function(e){return kt(e).replace(/\./g,"")},_t=function(e){try{return gt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function wt(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=wt(e[n],t[n]));return e}var xt=function(){function e(){var t=this;et(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return nt(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function St(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[bt(JSON.stringify({alg:"none",type:"JWT"})),bt(JSON.stringify(a)),""].join(".")}function Tt(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function It(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function Et(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ct(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Rt(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Nt(){var e=Tt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Pt(){return!0===ft||!0===dt}function At(){return"object"===typeof indexedDB}var Ot=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(L(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(L(a),Dt.prototype.create),a}return nt(n)}(ht(Error)),Dt=function(){function e(t,n,r){et(this,e),this.service=t,this.serviceName=n,this.errors=r}return nt(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Lt(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new Ot(n,a,t);return o}}]),e}();function Lt(e,t){return e.replace(Mt,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Mt=/\{\$([^}]+)}/g;function Ft(e){return JSON.parse(e)}function Ut(e){return JSON.stringify(e)}var jt=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ft(_t(a[0])||""),n=Ft(_t(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Vt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function qt(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Bt(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Zt(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var s=e[o],u=t[o];if(Wt(s)&&Wt(u)){if(!Zt(s,u))return!1}else if(s!==u)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Wt(e){return null!==e&&"object"===typeof e}function Ht(e){for(var t=[],n=function(){var e=(0,o.Z)(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Kt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=e.split("="),r=(0,o.Z)(n,2),i=r[0],a=r[1];t[decodeURIComponent(i)]=decodeURIComponent(a)}})),t}function Gt(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Qt=function(){function e(){et(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return nt(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var s,u,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(s=f^l&(h^f),u=1518500249):(s=l^h^f,u=1859775393):p<60?(s=l&h|f&(l|h),u=2400959708):(s=l^h^f,u=3395469782);var v=(c<<5|c>>>27)+s+d+u+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function $t(e,t){var n=new Yt(e,t);return n.subscribe.bind(n)}var Yt=function(){function e(t,n){var r=this;et(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return nt(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=it(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Xt),void 0===r.error&&(r.error=Xt),void 0===r.complete&&(r.complete=Xt);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Xt(){}var Jt=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function en(e,t){return"".concat(e," failed: ").concat(t," argument ")}function tn(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(en(e,t)+"must be a valid function.")}function nn(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(en(e,t)+"must be a valid context object.")}var rn=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function an(e){return e&&e._delegate?e._delegate:e}var on=function(){function e(t,n,r){et(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return nt(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),sn="[DEFAULT]",un=function(){function e(t,n){et(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return nt(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new xt;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:sn})}catch(c){}var t,n=it(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=(0,o.Z)(t.value,2),i=r[0],a=r[1],s=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:s});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat((0,a.Z)(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),(0,a.Z)(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),s=it(this.instancesDeferred.entries());try{for(s.s();!(i=s.n()).done;){var u=(0,o.Z)(i.value,2),c=u[0],l=u[1],h=this.normalizeInstanceIdentifier(c);r===h&&l.resolve(a)}}catch(f){s.e(f)}finally{s.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(rD){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===sn?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(rD){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sn;return this.component?this.component.multipleInstances?e:sn:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var cn,ln,hn=function(){function e(t){et(this,e),this.name=t,this.providers=new Map}return nt(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new un(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),fn=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ln||(ln={}));var dn={debug:ln.DEBUG,verbose:ln.VERBOSE,info:ln.INFO,warn:ln.WARN,error:ln.ERROR,silent:ln.SILENT},pn=ln.INFO,vn=(cn={},(0,R.Z)(cn,ln.DEBUG,"log"),(0,R.Z)(cn,ln.VERBOSE,"log"),(0,R.Z)(cn,ln.INFO,"info"),(0,R.Z)(cn,ln.WARN,"warn"),(0,R.Z)(cn,ln.ERROR,"error"),cn),yn=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=vn[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},mn=function(){function e(t){et(this,e),this.name=t,this._logLevel=pn,this._logHandler=yn,this._userLogHandler=null,fn.push(this)}return nt(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ln))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?dn[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ln.DEBUG].concat(t)),this._logHandler.apply(this,[this,ln.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ln.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ln.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ln.INFO].concat(t)),this._logHandler.apply(this,[this,ln.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ln.WARN].concat(t)),this._logHandler.apply(this,[this,ln.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ln.ERROR].concat(t)),this._logHandler.apply(this,[this,ln.ERROR].concat(t))}}]),e}();function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){(0,R.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var bn,_n;var wn=new WeakMap,xn=new WeakMap,Sn=new WeakMap,Tn=new WeakMap,In=new WeakMap;var En={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return xn.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Sn.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nn(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Cn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(_n||(_n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Pn(this),n),Nn(wn.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Nn(e.apply(Pn(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Pn(this),t].concat(r));return Sn.set(a,t.sort?t.sort():[t]),Nn(a)}}function Rn(e){return"function"===typeof e?Cn(e):(e instanceof IDBTransaction&&function(e){if(!xn.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));xn.set(e,t)}}(e),t=e,(bn||(bn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,En):e);var t}function Nn(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Nn(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&wn.set(t,e)})).catch((function(){})),In.set(t,e),t}(e);if(Tn.has(e))return Tn.get(e);var t=Rn(e);return t!==e&&(Tn.set(e,t),In.set(t,e)),t}var Pn=function(e){return In.get(e)};var An,On,Dn=["get","getKey","getAll","getAllKeys","count"],Ln=["put","add","delete","clear"],Mn=new Map;function Fn(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Mn.get(t))return Mn.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ln.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Dn.includes(n))){var a=function(){var e=Ae(Ne().mark((function e(t){var a,o,s,u,c,l,h=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),s=o.store,u=h.length,c=new Array(u>1?u-1:0),l=1;l<u;l++)c[l-1]=h[l];return r&&(s=s.index(c.shift())),e.next=6,Promise.all([(a=s)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Mn.set(t,a),a}}}En=function(e){return kn(kn({},e),{},{get:function(t,n,r){return Fn(t,n)||e.get(t,n,r)},has:function(t,n){return!!Fn(t,n)||e.has(t,n)}})}(En);var Un=function(){function e(t){et(this,e),this.container=t}return nt(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var jn="@firebase/app",Vn="0.7.28",zn=new mn("@firebase/app"),qn="[DEFAULT]",Bn=(An={},(0,R.Z)(An,jn,"fire-core"),(0,R.Z)(An,"@firebase/app-compat","fire-core-compat"),(0,R.Z)(An,"@firebase/analytics","fire-analytics"),(0,R.Z)(An,"@firebase/analytics-compat","fire-analytics-compat"),(0,R.Z)(An,"@firebase/app-check","fire-app-check"),(0,R.Z)(An,"@firebase/app-check-compat","fire-app-check-compat"),(0,R.Z)(An,"@firebase/auth","fire-auth"),(0,R.Z)(An,"@firebase/auth-compat","fire-auth-compat"),(0,R.Z)(An,"@firebase/database","fire-rtdb"),(0,R.Z)(An,"@firebase/database-compat","fire-rtdb-compat"),(0,R.Z)(An,"@firebase/functions","fire-fn"),(0,R.Z)(An,"@firebase/functions-compat","fire-fn-compat"),(0,R.Z)(An,"@firebase/installations","fire-iid"),(0,R.Z)(An,"@firebase/installations-compat","fire-iid-compat"),(0,R.Z)(An,"@firebase/messaging","fire-fcm"),(0,R.Z)(An,"@firebase/messaging-compat","fire-fcm-compat"),(0,R.Z)(An,"@firebase/performance","fire-perf"),(0,R.Z)(An,"@firebase/performance-compat","fire-perf-compat"),(0,R.Z)(An,"@firebase/remote-config","fire-rc"),(0,R.Z)(An,"@firebase/remote-config-compat","fire-rc-compat"),(0,R.Z)(An,"@firebase/storage","fire-gcs"),(0,R.Z)(An,"@firebase/storage-compat","fire-gcs-compat"),(0,R.Z)(An,"@firebase/firestore","fire-fst"),(0,R.Z)(An,"@firebase/firestore-compat","fire-fst-compat"),(0,R.Z)(An,"fire-js","fire-js"),(0,R.Z)(An,"firebase","fire-js-all"),An),Zn=new Map,Wn=new Map;function Hn(e,t){try{e.container.addComponent(t)}catch(n){zn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Kn(e,t){e.container.addOrOverwriteComponent(t)}function Gn(e){var t=e.name;if(Wn.has(t))return zn.debug("There were multiple attempts to register component ".concat(t,".")),!1;Wn.set(t,e);var n,r=it(Zn.values());try{for(r.s();!(n=r.n()).done;){Hn(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Qn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function $n(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qn;Qn(e,t).clearInstance(n)}function Yn(){Wn.clear()}var Xn=(On={},(0,R.Z)(On,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,R.Z)(On,"bad-app-name","Illegal App name: '{$appName}"),(0,R.Z)(On,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),(0,R.Z)(On,"app-deleted","Firebase App named '{$appName}' already deleted"),(0,R.Z)(On,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),(0,R.Z)(On,"invalid-log-argument","First argument to `onLog` must be null or a function."),(0,R.Z)(On,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),(0,R.Z)(On,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),(0,R.Z)(On,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),(0,R.Z)(On,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),On),Jn=new Dt("app","Firebase",Xn),er=function(){function e(t,n,r){var i=this;et(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new on("app",(function(){return i}),"PUBLIC"))}return nt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Jn.create("app-deleted",{appName:this._name})}}]),e}(),tr="9.9.0";function nr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:qn,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Jn.create("bad-app-name",{appName:String(i)});var a=Zn.get(i);if(a){if(Zt(e,a.options)&&Zt(r,a.config))return a;throw Jn.create("duplicate-app",{appName:i})}var o,s=new hn(i),u=it(Wn.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s.addComponent(c)}}catch(h){u.e(h)}finally{u.f()}var l=new er(e,r,s);return Zn.set(i,l),l}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qn,t=Zn.get(e);if(!t)throw Jn.create("no-app",{appName:e});return t}function ir(){return Array.from(Zn.values())}function ar(e){return or.apply(this,arguments)}function or(){return or=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Zn.has(n)){e.next=6;break}return Zn.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),or.apply(this,arguments)}function sr(e,t,n){var r,i=null!==(r=Bn[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&s.push("and"),o&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void zn.warn(s.join(" "))}Gn(new on("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function ur(e,t){if(null!==e&&"function"!==typeof e)throw Jn.create("invalid-log-argument");!function(e,t){var n,r=it(fn);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=dn[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var s=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ln[n].toLowerCase(),message:s,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function cr(e){var t;t=e,fn.forEach((function(e){e.setLogLevel(t)}))}var lr="firebase-heartbeat-store",hr=null;function fr(){return hr||(hr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,s=indexedDB.open(e,t),u=Nn(s);return i&&s.addEventListener("upgradeneeded",(function(e){i(Nn(s.result),e.oldVersion,e.newVersion,Nn(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),u}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(lr)}}).catch((function(e){throw Jn.create("storage-open",{originalErrorMessage:e.message})}))),hr}function dr(e){return pr.apply(this,arguments)}function pr(){return pr=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fr();case 3:return r=e.sent,e.abrupt("return",r.transaction(lr).objectStore(lr).get(mr(t)));case 7:throw e.prev=7,e.t0=e.catch(0),Jn.create("storage-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),pr.apply(this,arguments)}function vr(e,t){return yr.apply(this,arguments)}function yr(){return yr=Ae(Ne().mark((function e(t,n){var r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fr();case 3:return i=e.sent,a=i.transaction(lr,"readwrite"),o=a.objectStore(lr),e.next=8,o.put(n,mr(t));case 8:return e.abrupt("return",a.done);case 11:throw e.prev=11,e.t0=e.catch(0),Jn.create("storage-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),yr.apply(this,arguments)}function mr(e){return"".concat(e.name,"!").concat(e.options.appId)}var gr=function(){function e(t){var n=this;et(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new xr(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return nt(e,[{key:"triggerHeartbeat",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=kr(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=kr(),n=br(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=bt(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function kr(){return(new Date).toISOString().substring(0,10)}function br(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=it(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Sr(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Sr(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var s=o();if("break"===s)break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var _r,wr,xr=function(){function e(t){et(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return nt(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(At()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(td){t(td)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,dr(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vr(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat((0,a.Z)(r.heartbeats),(0,a.Z)(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Sr(e){return bt(JSON.stringify({version:2,heartbeats:e})).length}_r="",Gn(new on("platform-logger",(function(e){return new Un(e)}),"PRIVATE")),Gn(new on("heartbeat",(function(e){return new gr(e)}),"PRIVATE")),sr(jn,Vn,_r),sr(jn,Vn,"esm2017"),sr("fire-js","");var Tr=function(){function e(t,n){var r=this;et(this,e),this._delegate=t,this.firebase=n,Hn(t,new on("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return nt(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),ar(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qn;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Hn(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Kn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Ir=(wr={},(0,R.Z)(wr,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),(0,R.Z)(wr,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),wr),Er=new Dt("app-compat","Firebase",Ir);var Cr=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=nr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Vt(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:sr,setLogLevel:cr,onLog:ur,apps:null,SDK_VERSION:tr,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Gn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Er.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&wt(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Vt(n,e=e||qn))throw Er.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Tr);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){wt(n,e)},createSubscribe:$t,ErrorFactory:Dt,deepExtend:wt}),n}(),Rr=new mn("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Rr.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Nr=self.firebase.SDK_VERSION;Nr&&Nr.indexOf("LITE")>=0&&Rr.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Pr=Cr;!function(e){sr("@firebase/app-compat","0.1.29",e)}();Pr.registerVersion("firebase","9.9.0","app-compat");var Ar=n(3878),Or=n(9199),Dr=n(5267);function Lr(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ot(e)););return e}function Mr(){return Mr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=Lr(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Mr.apply(this,arguments)}function Fr(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Ur;Object.create;var jr="facebook.com",Vr="github.com",zr="google.com",qr="password",Br="twitter.com",Zr="EMAIL_SIGNIN",Wr="PASSWORD_RESET",Hr="RECOVER_EMAIL",Kr="REVERT_SECOND_FACTOR_ADDITION",Gr="VERIFY_AND_CHANGE_EMAIL",Qr="VERIFY_EMAIL";function $r(){return(0,R.Z)({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Yr=function(){var e;return e={},(0,R.Z)(e,"admin-restricted-operation","This operation is restricted to administrators only."),(0,R.Z)(e,"argument-error",""),(0,R.Z)(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),(0,R.Z)(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),(0,R.Z)(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),(0,R.Z)(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),(0,R.Z)(e,"cordova-not-ready","Cordova framework is not ready."),(0,R.Z)(e,"cors-unsupported","This browser is not supported."),(0,R.Z)(e,"credential-already-in-use","This credential is already associated with a different user account."),(0,R.Z)(e,"custom-token-mismatch","The custom token corresponds to a different audience."),(0,R.Z)(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),(0,R.Z)(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),(0,R.Z)(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),(0,R.Z)(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),(0,R.Z)(e,"email-already-in-use","The email address is already in use by another account."),(0,R.Z)(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),(0,R.Z)(e,"expired-action-code","The action code has expired."),(0,R.Z)(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),(0,R.Z)(e,"internal-error","An internal AuthError has occurred."),(0,R.Z)(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),(0,R.Z)(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),(0,R.Z)(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),(0,R.Z)(e,"invalid-auth-event","An internal AuthError has occurred."),(0,R.Z)(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),(0,R.Z)(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),(0,R.Z)(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),(0,R.Z)(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),(0,R.Z)(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),(0,R.Z)(e,"invalid-email","The email address is badly formatted."),(0,R.Z)(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),(0,R.Z)(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),(0,R.Z)(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),(0,R.Z)(e,"invalid-credential","The supplied auth credential is malformed or has expired."),(0,R.Z)(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),(0,R.Z)(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),(0,R.Z)(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),(0,R.Z)(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),(0,R.Z)(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),(0,R.Z)(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),(0,R.Z)(e,"wrong-password","The password is invalid or the user does not have a password."),(0,R.Z)(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),(0,R.Z)(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),(0,R.Z)(e,"invalid-provider-id","The specified provider ID is invalid."),(0,R.Z)(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),(0,R.Z)(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),(0,R.Z)(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),(0,R.Z)(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),(0,R.Z)(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),(0,R.Z)(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),(0,R.Z)(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),(0,R.Z)(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),(0,R.Z)(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),(0,R.Z)(e,"missing-continue-uri","A continue URL must be provided in the request."),(0,R.Z)(e,"missing-iframe-start","An internal AuthError has occurred."),(0,R.Z)(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),(0,R.Z)(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),(0,R.Z)(e,"missing-multi-factor-info","No second factor identifier is provided."),(0,R.Z)(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),(0,R.Z)(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),(0,R.Z)(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),(0,R.Z)(e,"app-deleted","This instance of FirebaseApp has been deleted."),(0,R.Z)(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),(0,R.Z)(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),(0,R.Z)(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),(0,R.Z)(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),(0,R.Z)(e,"no-auth-event","An internal AuthError has occurred."),(0,R.Z)(e,"no-such-provider","User was not linked to an account with the given provider."),(0,R.Z)(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),(0,R.Z)(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),(0,R.Z)(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),(0,R.Z)(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),(0,R.Z)(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),(0,R.Z)(e,"provider-already-linked","User can only be linked to one identity for the given provider."),(0,R.Z)(e,"quota-exceeded","The project's quota for this operation has been exceeded."),(0,R.Z)(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),(0,R.Z)(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),(0,R.Z)(e,"rejected-credential","The request contains malformed or mismatching credentials."),(0,R.Z)(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),(0,R.Z)(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),(0,R.Z)(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),(0,R.Z)(e,"timeout","The operation has timed out."),(0,R.Z)(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),(0,R.Z)(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),(0,R.Z)(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),(0,R.Z)(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),(0,R.Z)(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),(0,R.Z)(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),(0,R.Z)(e,"unverified-email","The operation requires a verified email."),(0,R.Z)(e,"user-cancelled","The user did not grant your application the permissions it requested."),(0,R.Z)(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),(0,R.Z)(e,"user-disabled","The user account has been disabled by an administrator."),(0,R.Z)(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),(0,R.Z)(e,"user-signed-out",""),(0,R.Z)(e,"weak-password","The password must be 6 characters long or more."),(0,R.Z)(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),(0,R.Z)(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Xr=$r,Jr=new Dt("auth","Firebase",$r()),ei=new mn("@firebase/auth");function ti(e){if(ei.logLevel<=ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ei.error.apply(ei,["Auth (".concat(tr,"): ").concat(e)].concat(n))}}function ni(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw oi.apply(void 0,[e].concat(n))}function ri(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return oi.apply(void 0,[e].concat(n))}function ii(e,t,n){var r=Object.assign(Object.assign({},Xr()),(0,R.Z)({},t,n));return new Dt("auth","Firebase",r).create(t,{appName:e.name})}function ai(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ni(e,"argument-error"),ii(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function oi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,o=n[0],s=(0,a.Z)(n.slice(1));return s[0]&&(s[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat((0,a.Z)(s)))}return Jr.create.apply(Jr,[e].concat(n))}function si(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw oi.apply(void 0,[t].concat(r))}}function ui(e){var t="INTERNAL ASSERTION FAILED: "+e;throw ti(t),new Error(t)}function ci(e,t){e||ui(t)}var li=new Map;function hi(e){ci(e instanceof Function,"Expected a class definition");var t=li.get(e);return t?(ci(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,li.set(e,t),t)}function fi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function di(){return"http:"===pi()||"https:"===pi()}function pi(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var vi=function(){function e(t,n){et(this,e),this.shortDelay=t,this.longDelay=n,ci(n>t,"Short delay should be less than long delay!"),this.isMobile=It()||Rt()}return nt(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(di()||Ct()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function yi(e,t){ci(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var mi=function(){function e(){et(this,e)}return nt(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),gi=(Ur={},(0,R.Z)(Ur,"CREDENTIAL_MISMATCH","custom-token-mismatch"),(0,R.Z)(Ur,"MISSING_CUSTOM_TOKEN","internal-error"),(0,R.Z)(Ur,"INVALID_IDENTIFIER","invalid-email"),(0,R.Z)(Ur,"MISSING_CONTINUE_URI","internal-error"),(0,R.Z)(Ur,"INVALID_PASSWORD","wrong-password"),(0,R.Z)(Ur,"MISSING_PASSWORD","internal-error"),(0,R.Z)(Ur,"EMAIL_EXISTS","email-already-in-use"),(0,R.Z)(Ur,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),(0,R.Z)(Ur,"INVALID_IDP_RESPONSE","invalid-credential"),(0,R.Z)(Ur,"INVALID_PENDING_TOKEN","invalid-credential"),(0,R.Z)(Ur,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),(0,R.Z)(Ur,"MISSING_REQ_TYPE","internal-error"),(0,R.Z)(Ur,"EMAIL_NOT_FOUND","user-not-found"),(0,R.Z)(Ur,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),(0,R.Z)(Ur,"EXPIRED_OOB_CODE","expired-action-code"),(0,R.Z)(Ur,"INVALID_OOB_CODE","invalid-action-code"),(0,R.Z)(Ur,"MISSING_OOB_CODE","internal-error"),(0,R.Z)(Ur,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),(0,R.Z)(Ur,"INVALID_ID_TOKEN","invalid-user-token"),(0,R.Z)(Ur,"TOKEN_EXPIRED","user-token-expired"),(0,R.Z)(Ur,"USER_NOT_FOUND","user-token-expired"),(0,R.Z)(Ur,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),(0,R.Z)(Ur,"INVALID_CODE","invalid-verification-code"),(0,R.Z)(Ur,"INVALID_SESSION_INFO","invalid-verification-id"),(0,R.Z)(Ur,"INVALID_TEMPORARY_PROOF","invalid-credential"),(0,R.Z)(Ur,"MISSING_SESSION_INFO","missing-verification-id"),(0,R.Z)(Ur,"SESSION_EXPIRED","code-expired"),(0,R.Z)(Ur,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),(0,R.Z)(Ur,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),(0,R.Z)(Ur,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),(0,R.Z)(Ur,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),(0,R.Z)(Ur,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),(0,R.Z)(Ur,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),(0,R.Z)(Ur,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),(0,R.Z)(Ur,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),(0,R.Z)(Ur,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),(0,R.Z)(Ur,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),(0,R.Z)(Ur,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Ur),ki=new vi(3e4,6e4);function bi(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function _i(e,t,n,r){return wi.apply(this,arguments)}function wi(){return wi=Ae(Ne().mark((function e(t,n,r,i){var a,o=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",xi(t,a,Ae(Ne().mark((function e(){var a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),s=Ht(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(u=e.sent)["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",mi.fetch()(Ei(t,t.config.apiHost,r,s),Object.assign({method:n,headers:u,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),wi.apply(this,arguments)}function xi(e,t,n){return Si.apply(this,arguments)}function Si(){return Si=Ae(Ne().mark((function e(t,n,r){var i,a,s,u,c,l,h,f,d,p;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},gi),n),e.prev=2,a=new Ci(t),e.next=6,Promise.race([r(),a.promise]);case 6:return s=e.sent,a.clearNetworkTimeout(),e.next=10,s.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Ri(t,"account-exists-with-different-credential",u);case 13:if(!s.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(c=s.ok?u.errorMessage:u.error.message,l=c.split(" : "),h=(0,o.Z)(l,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Ri(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Ri(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Ri(t,"user-disabled",u);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw ii(t,p,d);case 34:ni(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Ot)){e.next=41;break}throw e.t0;case 41:ni(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Si.apply(this,arguments)}function Ti(e,t,n,r){return Ii.apply(this,arguments)}function Ii(){return Ii=Ae(Ne().mark((function e(t,n,r,i){var a,o,s=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,_i(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&ni(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Ei(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?yi(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Ci=function(){function e(t){var n=this;et(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ri(n.auth,"network-request-failed"))}),ki.get())}))}return nt(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Ri(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ri(e,t,r);return i.customData._tokenResponse=n,i}function Ni(e,t){return Pi.apply(this,arguments)}function Pi(){return Pi=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Pi.apply(this,arguments)}function Ai(e,t){return Oi.apply(this,arguments)}function Oi(){return Oi=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Oi.apply(this,arguments)}function Di(e,t){return Li.apply(this,arguments)}function Li(){return Li=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Li.apply(this,arguments)}function Mi(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Fi(){return Fi=Ae(Ne().mark((function e(t){var n,r,i,a,o,s,u=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],r=an(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,si((a=ji(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Mi(Ui(a.auth_time)),issuedAtTime:Mi(Ui(a.iat)),expirationTime:Mi(Ui(a.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}function Ui(e){return 1e3*Number(e)}function ji(e){var t,n=e.split("."),r=(0,o.Z)(n,3),i=r[0],a=r[1],s=r[2];if(void 0===i||void 0===a||void 0===s)return ti("JWT malformed, contained fewer than 3 sections"),null;try{var u=_t(a);return u?JSON.parse(u):(ti("Failed to decode base64 JWT payload"),null)}catch(c){return ti("Caught error parsing JWT payload as JSON",null===(t=c)||void 0===t?void 0:t.toString()),null}}function Vi(e,t){return zi.apply(this,arguments)}function zi(){return zi=Ae(Ne().mark((function e(t,n){var r=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Ot&&qi(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),zi.apply(this,arguments)}function qi(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var Bi=function(){function e(t){et(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return nt(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ae(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zi=function(){function e(t,n){et(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return nt(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Mi(this.lastLoginAt),this.creationTime=Mi(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Wi(e){return Hi.apply(this,arguments)}function Hi(){return Hi=Ae(Ne().mark((function e(t){var n,r,i,a,o,s,u,c,l,h,f;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Vi(t,Di(r,{idToken:i}));case 6:si(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),s=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Qi(o.providerUserInfo):[],u=Gi(t.providerData,s),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===u||void 0===u?void 0:u.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Zi(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}function Ki(){return(Ki=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=an(t),e.next=3,Wi(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gi(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat((0,a.Z)(n),(0,a.Z)(t))}function Qi(e){return e.map((function(e){var t=e.providerId,n=Fr(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function $i(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xi(t,{},Ae(Ne().mark((function e(){var r,i,a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ht({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,s=Ei(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(u=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",mi.fetch()(s,{method:"POST",headers:u,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}var Xi=function(){function e(){et(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return nt(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){si(e.idToken,"internal-error"),si("undefined"!==typeof e.idToken,"internal-error"),si("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=ji(e);return si(t,"internal-error"),si("undefined"!==typeof t.exp,"internal-error"),si("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ae(Ne().mark((function e(t){var n,r=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],si(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ae(Ne().mark((function e(t,n){var r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$i(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ui("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(si("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(si("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(si("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Ji(e,t){si("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var ea=function(){function e(t){et(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=Fr(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bi(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?(0,a.Z)(o.providerData):[],this.metadata=new Zi(o.createdAt||void 0,o.lastLoginAt||void 0)}return nt(e,[{key:"getIdToken",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vi(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(si(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Fi.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Ki.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(si(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){si(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ae(Ne().mark((function e(t){var n,r,i=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Wi(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Vi(this,Ni(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,s,u,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(s=n.tenantId)&&void 0!==s?s:void 0,y=null!==(u=n._redirectEventId)&&void 0!==u?u:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,_=n.isAnonymous,w=n.providerData,x=n.stsTokenManager;si(k&&x,t,"internal-error");var S=Xi.fromJSON(this.name,x);si("string"===typeof k,t,"internal-error"),Ji(h,t.name),Ji(f,t.name),si("boolean"===typeof b,t,"internal-error"),si("boolean"===typeof _,t,"internal-error"),Ji(d,t.name),Ji(p,t.name),Ji(v,t.name),Ji(y,t.name),Ji(m,t.name),Ji(g,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:b,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:S,createdAt:m,lastLoginAt:g});return w&&Array.isArray(w)&&(T.providerData=w.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=Ae(Ne().mark((function t(n,r){var i,a,o,s=arguments;return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(a=new Xi).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Wi(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),ta=function(){function e(){et(this,e),this.type="NONE",this.storage={}}return nt(e,[{key:"_isAvailable",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();ta.type="NONE";var na=ta;function ra(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ia=function(){function e(t,n,r){et(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ra(this.userKey,a.apiKey,o),this.fullPersistenceKey=ra("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return nt(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?ea._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ae(Ne().mark((function t(n,r){var i,a,o,s,u,c,l,h,f,d,p,v=arguments;return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(hi(na),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||hi(na),s=ra(i,n.config.apiKey,n.name),u=null,c=it(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(s);case 17:if(!(f=t.sent)){t.next=23;break}return d=ea._fromJSON(n,f),h!==o&&(u=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!u){t.next=44;break}return t.next=44,o._set(s,u.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(s);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function aa(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ca(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oa(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ha(t))return"Blackberry";if(fa(t))return"Webos";if(sa(t))return"Safari";if((t.includes("chrome/")||ua(t))&&!t.includes("edge/"))return"Chrome";if(la(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function oa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/firefox\//i.test(e)}function sa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ua(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/crios\//i.test(e)}function ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/iemobile/i.test(e)}function la(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/android/i.test(e)}function ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/blackberry/i.test(e)}function fa(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/webos/i.test(e)}function da(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pa(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return da(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function va(){return Nt()&&10===document.documentMode}function ya(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return da(e)||la(e)||fa(e)||ha(e)||/windows phone/i.test(e)||ca(e)}function ma(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=aa(Tt());break;case"Worker":t="".concat(aa(Tt()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(tr,"/").concat(r)}var ga=function(){function e(t){et(this,e),this.auth=t,this.queue=[]}return nt(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Ae(Ne().mark((function e(t){var n,r,i,a,o,s,u,c;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=it(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),s=it(r);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c()}catch(l){}}}catch(h){s.e(h)}finally{s.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),ka=function(){function e(t,n,r){et(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _a(this),this.idTokenSubscription=new _a(this),this.beforeStateQueue=new ga(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Jr,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return nt(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=hi(t)),this._initializationPromise=this.queue(Ae(Ne().mark((function r(){var i,a;return Ne().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ia.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ae(Ne().mark((function e(t){var n,r,i,a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:u=e.sent,o&&o!==s||!(null===u||void 0===u?void 0:u.user)||(i=u.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return si(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Wi(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?an(t):null)&&si(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ae(Ne().mark((function e(t){var n,r=this,i=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&si(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ae(Ne().mark((function n(){return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(hi(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Dt("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return si(n=t&&hi(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ia.create(this,[hi(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ae(Ne().mark((function e(t){var n=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return si(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return si(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ma(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,R.Z)({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ba(e){return an(e)}var _a=function(){function e(t){var n=this;et(this,e),this.auth=t,this.observer=null,this.addObserver=$t((function(e){return n.observer=e}))}return nt(e,[{key:"next",get:function(){return si(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function wa(e,t,n){var r=ba(e);si(r._canInitEmulator,r,"emulator-config-failed"),si(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=xa(t),s=function(e){var t=xa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Sa(r.substr(a.length+1))}}var s=r.split(":"),u=(0,o.Z)(s,2);return{host:u[0],port:Sa(u[1])}}(t),u=s.host,c=s.port,l=null===c?"":":".concat(c);r.config.emulator={url:"".concat(a,"//").concat(u).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function xa(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Sa(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ta=function(){function e(t,n){et(this,e),this.providerId=t,this.signInMethod=n}return nt(e,[{key:"toJSON",value:function(){return ui("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ui("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ui("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ui("not implemented")}}]),e}();function Ia(e,t){return Ea.apply(this,arguments)}function Ea(){return Ea=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:resetPassword",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ea.apply(this,arguments)}function Ca(e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Na(e,t){return Pa.apply(this,arguments)}function Pa(){return Pa=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:update",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),Pa.apply(this,arguments)}function Aa(e,t){return Oa.apply(this,arguments)}function Oa(){return Oa=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(t,"POST","/v1/accounts:signInWithPassword",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),Oa.apply(this,arguments)}function Da(e,t){return La.apply(this,arguments)}function La(){return La=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:sendOobCode",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),La.apply(this,arguments)}function Ma(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Da(t,n));case 1:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(e,t){return ja.apply(this,arguments)}function ja(){return ja=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Da(t,n));case 1:case"end":return e.stop()}}),e)}))),ja.apply(this,arguments)}function Va(e,t){return za.apply(this,arguments)}function za(){return za=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Da(t,n));case 1:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function qa(e,t){return Ba.apply(this,arguments)}function Ba(){return Ba=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Da(t,n));case 1:case"end":return e.stop()}}),e)}))),Ba.apply(this,arguments)}function Za(e,t){return Wa.apply(this,arguments)}function Wa(){return Wa=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ha(e,t){return Ka.apply(this,arguments)}function Ka(){return Ka=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(t,"POST","/v1/accounts:signInWithEmailLink",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}var Ga=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return et(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return nt(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Aa(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Za(t,{email:this._email,oobCode:this._password}));case 5:ni(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ca(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Ha(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:ni(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ta);function Qa(e,t){return $a.apply(this,arguments)}function $a(){return $a=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(t,"POST","/v1/accounts:signInWithIdp",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),$a.apply(this,arguments)}var Ya=function(e){at(n,e);var t=ct(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return nt(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Qa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ht(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Fr(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Ta);function Xa(e,t){return Ja.apply(this,arguments)}function Ja(){return Ja=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:sendVerificationCode",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function eo(){return eo=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(t,"POST","/v1/accounts:signInWithPhoneNumber",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(){return to=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ti(t,"POST","/v1/accounts:signInWithPhoneNumber",bi(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Ri(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),to.apply(this,arguments)}var no=(0,R.Z)({},"USER_NOT_FOUND","user-not-found");function ro(){return ro=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Ti(t,"POST","/v1/accounts:signInWithPhoneNumber",bi(t,r),no));case 2:case"end":return e.stop()}}),e)}))),ro.apply(this,arguments)}var io=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this,"phone","phone")).params=e,r}return nt(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return eo.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return to.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return ro.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Ta);var ao=function(){function e(t){var n,r,i,a,o,s;et(this,e);var u=Kt(Gt(t)),c=null!==(n=u.apiKey)&&void 0!==n?n:null,l=null!==(r=u.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=u.mode)&&void 0!==i?i:null);si(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=u.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=u.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=u.tenantId)&&void 0!==s?s:null}return nt(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Kt(Gt(e)).link,n=t?Kt(Gt(t)).deep_link_id:null,r=Kt(Gt(e)).deep_link_id;return(r?Kt(Gt(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(rD){return null}}}]),e}();var oo=function(){function e(){et(this,e),this.providerId=e.PROVIDER_ID}return nt(e,null,[{key:"credential",value:function(e,t){return Ga._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ao.parseLink(t);return si(n,"argument-error"),Ga._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();oo.PROVIDER_ID="password",oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var so=function(){function e(t){et(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return nt(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),uo=function(e){at(n,e);var t=ct(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments)).scopes=[],e}return nt(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return(0,a.Z)(this.scopes)}}]),n}(so),co=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return si(e.idToken||e.accessToken,"argument-error"),Ya._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return si("providerId"in t&&"signInMethod"in t,"argument-error"),Ya._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,s=t.nonce,u=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!u)return null;try{return new n(u)._credential({idToken:r,accessToken:i,nonce:s,pendingToken:o})}catch(c){return null}}}]),n}(uo),lo=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.call(this,"facebook.com")}return nt(n,null,[{key:"credential",value:function(e){return Ya._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(rD){return null}}}]),n}(uo);lo.FACEBOOK_SIGN_IN_METHOD="facebook.com",lo.PROVIDER_ID="facebook.com";var ho=function(e){at(n,e);var t=ct(n);function n(){var e;return et(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return nt(n,null,[{key:"credential",value:function(e,t){return Ya._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(rD){return null}}}]),n}(uo);ho.GOOGLE_SIGN_IN_METHOD="google.com",ho.PROVIDER_ID="google.com";var fo=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.call(this,"github.com")}return nt(n,null,[{key:"credential",value:function(e){return Ya._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(rD){return null}}}]),n}(uo);fo.GITHUB_SIGN_IN_METHOD="github.com",fo.PROVIDER_ID="github.com";var po=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return nt(n,[{key:"_getIdTokenResponse",value:function(e){return Qa(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Qa(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ta),vo=function(e){at(n,e);var t=ct(n);function n(e){return et(this,n),si(e.startsWith("saml."),"argument-error"),t.call(this,e)}return nt(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=po.fromJSON(e);return si(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return po._create(r,n)}catch(i){return null}}}]),n}(so),yo=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.call(this,"twitter.com")}return nt(n,null,[{key:"credential",value:function(e,t){return Ya._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(rD){return null}}}]),n}(uo);function mo(e,t){return go.apply(this,arguments)}function go(){return go=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(t,"POST","/v1/accounts:signUp",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}yo.TWITTER_SIGN_IN_METHOD="twitter.com",yo.PROVIDER_ID="twitter.com";var ko=function(){function e(t){et(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return nt(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ae(Ne().mark((function t(n,r,i){var a,o,s,u,c=arguments;return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,ea._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,s=bo(i),u=new e({user:o,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ae(Ne().mark((function t(n,r,i){var a;return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=bo(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function bo(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function _o(){return _o=Ae(Ne().mark((function e(t){var n,r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ba(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new ko({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,mo(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,ko._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),_o.apply(this,arguments)}var wo=function(e){at(n,e);var t=ct(n);function n(e,r,i,a){var o,s;return et(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(L(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return nt(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Ot);function xo(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw wo._fromErrorAndOperation(e,n,t,r);throw n}))}function So(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function To(e,t){return Io.apply(this,arguments)}function Io(){return Io=Ae(Ne().mark((function e(t,n){var r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=an(t),e.next=3,Ro(!0,r,n);case 3:return e.t0=Ai,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=So(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Io.apply(this,arguments)}function Eo(e,t){return Co.apply(this,arguments)}function Co(){return Co=Ae(Ne().mark((function e(t,n){var r,i,a=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Vi,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",ko._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),Co.apply(this,arguments)}function Ro(e,t,n){return No.apply(this,arguments)}function No(){return No=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wi(n);case 2:i=So(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",si(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)}))),No.apply(this,arguments)}function Po(e,t){return Ao.apply(this,arguments)}function Ao(){return Ao=Ae(Ne().mark((function e(t,n){var r,i,a,o,s,u,c,l=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Vi(t,xo(a,o,n,t),r);case 6:return si((s=e.sent).idToken,a,"internal-error"),si(u=ji(s.idToken),a,"internal-error"),c=u.sub,si(t.uid===c,a,"user-mismatch"),e.abrupt("return",ko._forOperation(t,o,s));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&ni(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ao.apply(this,arguments)}function Oo(e,t){return Do.apply(this,arguments)}function Do(){return Do=Ae(Ne().mark((function e(t,n){var r,i,a,o,s=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,xo(t,i,n);case 4:return a=e.sent,e.next=7,ko._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Do.apply(this,arguments)}function Lo(e,t){return Mo.apply(this,arguments)}function Mo(){return Mo=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo(ba(t),n));case 1:case"end":return e.stop()}}),e)}))),Mo.apply(this,arguments)}function Fo(e,t){return Uo.apply(this,arguments)}function Uo(){return(Uo=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=an(t),e.next=3,Ro(!1,r,n.providerId);case 3:return e.abrupt("return",Eo(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e,t){return Vo.apply(this,arguments)}function Vo(){return(Vo=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Po(an(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zo(e,t){return qo.apply(this,arguments)}function qo(){return qo=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ti(t,"POST","/v1/accounts:signInWithCustomToken",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),qo.apply(this,arguments)}function Bo(){return Bo=Ae(Ne().mark((function e(t,n){var r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ba(t),e.next=3,zo(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,ko._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Bo.apply(this,arguments)}var Zo=function(){function e(t,n){et(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return nt(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Wo._fromServerResponse(e,t):ni(e,"internal-error")}}]),e}(),Wo=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return nt(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(Zo);function Ho(e,t,n){var r;si((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),si("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(si(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(si(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function Ko(){return Ko=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=an(t),a={requestType:"PASSWORD_RESET",email:n},r&&Ho(i,a,r),e.next=5,Ua(i,a);case 5:case"end":return e.stop()}}),e)}))),Ko.apply(this,arguments)}function Go(){return Go=Ae(Ne().mark((function e(t,n,r){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ia(an(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),Go.apply(this,arguments)}function Qo(){return Qo=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na(an(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function $o(e,t){return Yo.apply(this,arguments)}function Yo(){return Yo=Ae(Ne().mark((function e(t,n){var r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=an(t),e.next=3,Ia(r,{oobCode:n});case 3:i=e.sent,si(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return si(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:si(i.mfaInfo,r,"internal-error");case 13:si(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=Zo._fromServerResponse(ba(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Yo.apply(this,arguments)}function Xo(){return Xo=Ae(Ne().mark((function e(t,n){var r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$o(an(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}function Jo(e,t,n){return es.apply(this,arguments)}function es(){return es=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ba(t),e.next=3,mo(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,ko._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),es.apply(this,arguments)}function ts(){return ts=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=an(t),a={requestType:"EMAIL_SIGNIN",email:n},si(r.handleCodeInApp,i,"argument-error"),r&&Ho(i,a,r),e.next=6,Va(i,a);case 6:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(){return ns=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=an(t),si((a=oo.credentialWithLink(n,r||fi()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Lo(i,a));case 4:case"end":return e.stop()}}),e)}))),ns.apply(this,arguments)}function rs(e,t){return is.apply(this,arguments)}function is(){return is=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:createAuthUri",bi(t,n)));case 1:case"end":return e.stop()}}),e)}))),is.apply(this,arguments)}function as(){return as=Ae(Ne().mark((function e(t,n){var r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=di()?fi():"http://localhost",i={identifier:n,continueUri:r},e.next=4,rs(an(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),as.apply(this,arguments)}function os(){return(os=Ae(Ne().mark((function e(t,n){var r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=an(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Ho(r.auth,a,n),e.next=8,Ma(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ss(){return(ss=Ae(Ne().mark((function e(t,n,r){var i,a,o,s;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=an(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Ho(i.auth,o,r),e.next=8,qa(i.auth,o);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function us(e,t){return cs.apply(this,arguments)}function cs(){return cs=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),cs.apply(this,arguments)}function ls(){return(ls=Ae(Ne().mark((function e(t,n){var r,i,a,o,s,u,c;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=an(t),e.next=6,a.getIdToken();case 6:return o=e.sent,s={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Vi(a,us(a.auth,s));case 10:return u=e.sent,a.displayName=u.displayName||null,a.photoURL=u.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(u);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hs(e,t,n){return fs.apply(this,arguments)}function fs(){return fs=Ae(Ne().mark((function e(t,n,r){var i,a,o,s;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Vi(t,Ca(i,o));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),fs.apply(this,arguments)}var ds=nt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};et(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),ps=function(e){at(n,e);var t=ct(n);function n(e,r,i,a){var o;return et(this,n),(o=t.call(this,e,r,i)).username=a,o}return nt(n)}(ds),vs=function(e){at(n,e);var t=ct(n);function n(e,r){return et(this,n),t.call(this,e,"facebook.com",r)}return nt(n)}(ds),ys=function(e){at(n,e);var t=ct(n);function n(e,r){return et(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return nt(n)}(ps),ms=function(e){at(n,e);var t=ct(n);function n(e,r){return et(this,n),t.call(this,e,"google.com",r)}return nt(n)}(ds),gs=function(e){at(n,e);var t=ct(n);function n(e,r,i){return et(this,n),t.call(this,e,"twitter.com",r,i)}return nt(n)}(ps);function ks(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=ji(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new ds(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new vs(a,i);case"github.com":return new ys(a,i);case"google.com":return new ms(a,i);case"twitter.com":return new gs(a,i,e.screenName||null);case"custom":case"anonymous":return new ds(a,null);default:return new ds(a,r,i)}}(n)}var bs=function(){function e(t,n){et(this,e),this.type=t,this.credential=n}return nt(e,[{key:"toJSON",value:function(){var e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:(0,R.Z)({},e,this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),_s=function(){function e(t,n,r){et(this,e),this.session=t,this.hints=n,this.signInResolver=r}return nt(e,[{key:"resolveSignIn",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=ba(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return Zo._fromServerResponse(r,e)}));si(i.mfaPendingCredential,r,"internal-error");var o=bs._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ae(Ne().mark((function e(t){var a,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,s=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,ko._fromIdTokenResponse(r,n.operationType,s);case 11:return u=e.sent,e.next=14,r._updateCurrentUser(u.user);case 14:return e.abrupt("return",u);case 15:return si(n.user,r,"internal-error"),e.abrupt("return",ko._forOperation(n.user,n.operationType,s));case 17:ni(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function ws(e,t){return _i(e,"POST","/v2/accounts/mfaEnrollment:start",bi(e,t))}function xs(e,t){return _i(e,"POST","/v2/accounts/mfaEnrollment:withdraw",bi(e,t))}var Ss=function(){function e(t){var n=this;et(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return Zo._fromServerResponse(t.auth,e)})))}))}return nt(e,[{key:"getSession",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=bs,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ae(Ne().mark((function e(t,n){var r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Vi(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ae(Ne().mark((function e(t){var n,r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Vi(this.user,xs(this.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),Ts=new WeakMap;var Is="__sak",Es=function(){function e(t,n){et(this,e),this.storageRetriever=t,this.type=n}return nt(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(Is,"1"),this.storage.removeItem(Is),Promise.resolve(!0)):Promise.resolve(!1)}catch(rD){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var Cs=function(e){at(n,e);var t=ct(n);function n(){var e;return et(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Tt();return sa(e)||da(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=ya(),e._shouldAllowMigration=!0,e}return nt(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);va()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ae(Ne().mark((function e(t,r){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mr(ot(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ae(Ne().mark((function e(t){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mr(ot(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mr(ot(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Es);Cs.type="LOCAL";var Rs=Cs,Ns=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return nt(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Es);Ns.type="SESSION";var Ps=Ns;function As(e){return Promise.all(e.map(function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Os=function(){function e(t){et(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return nt(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ae(Ne().mark((function e(t){var n,r,i,a,o,s,u,c;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(s=this.handlersMap[a])||void 0===s?void 0:s.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),u=Array.from(s).map(function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,As(u);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ds(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Os.receivers=[];var Ls=function(){function e(t){et(this,e),this.target=t,this.handlers=new Set}return nt(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ae(Ne().mark((function e(t,n){var r,i,a,o,s=this,u=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,u){var c=Ds("",20);i.port1.start();var l=setTimeout((function(){u(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){u(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),u(new Error("invalid_response"))}}},s.handlers.add(o),i.port1.addEventListener("message",o.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&s.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ms(){return window}function Fs(){return"undefined"!==typeof Ms().WorkerGlobalScope&&"function"===typeof Ms().importScripts}function Us(){return js.apply(this,arguments)}function js(){return(js=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Vs(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var zs="firebaseLocalStorageDb",qs="firebaseLocalStorage",Bs="fbase_key",Zs=function(){function e(t){et(this,e),this.request=t}return nt(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function Ws(e,t){return e.transaction([qs],t?"readwrite":"readonly").objectStore(qs)}function Hs(){var e=indexedDB.deleteDatabase(zs);return new Zs(e).toPromise()}function Ks(){var e=indexedDB.open(zs,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(qs,{keyPath:Bs})}catch(r){n(r)}})),e.addEventListener("success",Ae(Ne().mark((function n(){var r;return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(qs)){n.next=12;break}return r.close(),n.next=5,Hs();case 5:return n.t0=t,n.next=8,Ks();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Gs(e,t,n){return Qs.apply(this,arguments)}function Qs(){return Qs=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ws(t,!0).put((i={},(0,R.Z)(i,Bs,n),(0,R.Z)(i,"value",r),i)),e.abrupt("return",new Zs(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Qs.apply(this,arguments)}function $s(e,t){return Ys.apply(this,arguments)}function Ys(){return Ys=Ae(Ne().mark((function e(t,n){var r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ws(t,!1).get(n),e.next=3,new Zs(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Ys.apply(this,arguments)}function Xs(e,t){var n=Ws(e,!0).delete(t);return new Zs(n).toPromise()}var Js=function(){function e(){et(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return nt(e,[{key:"_openDb",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Ks();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fs()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ae(Ne().mark((function e(){var t=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Os._getInstance(Fs()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ae(Ne().mark((function e(n,r){var i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Us();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Ls(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Vs()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Ks();case 5:return t=e.sent,e.next=8,Gs(t,Is,"1");case 8:return e.next=10,Xs(t,Is);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ae(Ne().mark((function e(t,n){var r=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Gs(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return $s(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ae(Ne().mark((function e(t){var n=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Xs(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=Ws(e,!1).getAll();return new Zs(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=it(t);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.fbase_key,u=o.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(u)&&(this.notifyListeners(s,u),n.push(s))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ae(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Js.type="LOCAL";var eu=Js;function tu(e,t){return _i(e,"POST","/v2/accounts/mfaSignIn:start",bi(e,t))}function nu(e){return ru.apply(this,arguments)}function ru(){return ru=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),ru.apply(this,arguments)}function iu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ri("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function au(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ou=1e12,su=function(){function e(t){et(this,e),this.auth=t,this.counter=ou,this._widgets=new Map}return nt(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new uu(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ou;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ou;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ou,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),uu=function(){function e(t,n,r){var i=this;et(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;si(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return nt(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var cu=au("rcb"),lu=new vi(3e4,6e4),hu="https://www.google.com/recaptcha/api.js?",fu=function(){function e(){var t;et(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Ms().grecaptcha)||void 0===t?void 0:t.render)}return nt(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return si(du(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ms().grecaptcha):new Promise((function(r,i){var a=Ms().setTimeout((function(){i(ri(e,"network-request-failed"))}),lu.get());Ms()[cu]=function(){Ms().clearTimeout(a),delete Ms()[cu];var o=Ms().grecaptcha;if(o){var s=o.render;o.render=function(e,n){var r=s(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(ri(e,"internal-error"))},iu("".concat(hu,"?").concat(Ht({onload:cu,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(ri(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Ms().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function du(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var pu=function(){function e(){et(this,e)}return nt(e,[{key:"load",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new su(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),vu="recaptcha",yu={theme:"light",type:"image"},mu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},yu),r=arguments.length>2?arguments[2]:void 0;et(this,e),this.parameters=n,this.type=vu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ba(r),this.isInvisible="invisible"===this.parameters.size,si("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;si(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new pu:new fu,this.validateStartingState()}return nt(e,[{key:"verify",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r,i=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){si(!this.parameters.sitekey,this.auth,"argument-error"),si(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),si("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ms()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){si(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ae(Ne().mark((function e(){var t,n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return si(di()&&!Fs(),this.auth,"internal-error"),e.next=3,gu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,nu(this.auth);case 8:si(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return si(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function gu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var ku=function(){function e(t,n){et(this,e),this.verificationId=t,this.onConfirmation=n}return nt(e,[{key:"confirm",value:function(e){var t=io._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function bu(){return bu=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ba(t),e.next=3,Su(i,n,an(r));case 3:return a=e.sent,e.abrupt("return",new ku(a,(function(e){return Lo(i,e)})));case 5:case"end":return e.stop()}}),e)}))),bu.apply(this,arguments)}function _u(e,t,n){return wu.apply(this,arguments)}function wu(){return(wu=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=an(t),e.next=3,Ro(!1,i,"phone");case 3:return e.next=5,Su(i.auth,n,an(r));case 5:return a=e.sent,e.abrupt("return",new ku(a,(function(e){return Fo(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xu(){return(xu=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=an(t),e.next=3,Su(i.auth,n,an(r));case 3:return a=e.sent,e.abrupt("return",new ku(a,(function(e){return jo(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Su(e,t,n){return Tu.apply(this,arguments)}function Tu(){return Tu=Ae(Ne().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,si("string"===typeof a,t,"argument-error"),si(r.type===vu,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=o.session,!("phoneNumber"in o)){e.next=17;break}return si("enroll"===s.type,t,"internal-error"),e.next=13,ws(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return u=e.sent,e.abrupt("return",u.phoneSessionInfo.sessionInfo);case 17:return si("signin"===s.type,t,"internal-error"),si(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,tu(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Xa(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),Tu.apply(this,arguments)}function Iu(){return(Iu=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Eo(an(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Eu=function(){function e(t){et(this,e),this.providerId=e.PROVIDER_ID,this.auth=ba(t)}return nt(e,[{key:"verifyPhoneNumber",value:function(e,t){return Su(this.auth,e,an(t))}}],[{key:"credential",value:function(e,t){return io._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?io._fromTokenResponse(n,r):null}}]),e}();function Cu(e,t){return t?hi(t):(si(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Eu.PROVIDER_ID="phone",Eu.PHONE_SIGN_IN_METHOD="phone";var Ru=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this,"custom","custom")).params=e,r}return nt(n,[{key:"_getIdTokenResponse",value:function(e){return Qa(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Qa(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Qa(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ta);function Nu(e){return Oo(e.auth,new Ru(e),e.bypassAuthState)}function Pu(e){var t=e.auth,n=e.user;return si(n,t,"internal-error"),Po(n,new Ru(e),e.bypassAuthState)}function Au(e){return Ou.apply(this,arguments)}function Ou(){return Ou=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,si(r=t.user,n,"internal-error"),e.abrupt("return",Eo(r,new Ru(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Ou.apply(this,arguments)}var Du=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];et(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return nt(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ae(Ne().mark((function t(n,r){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ae(Ne().mark((function e(t){var n,r,i,a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,s=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(u);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Nu;case"linkViaPopup":case"linkViaRedirect":return Au;case"reauthViaPopup":case"reauthViaRedirect":return Pu;default:ni(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Lu=new vi(2e3,1e4);function Mu(e,t,n){return Fu.apply(this,arguments)}function Fu(){return Fu=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ba(t),ai(t,n,so),a=Cu(i,r),o=new zu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Fu.apply(this,arguments)}function Uu(){return Uu=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ai((i=an(t)).auth,n,so),a=Cu(i.auth,r),o=new zu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Uu.apply(this,arguments)}function ju(e,t,n){return Vu.apply(this,arguments)}function Vu(){return Vu=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ai((i=an(t)).auth,n,so),a=Cu(i.auth,r),o=new zu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Vu.apply(this,arguments)}var zu=function(e){at(n,e);var t=ct(n);function n(e,r,i,a,o){var s;return et(this,n),(s=t.call(this,e,r,a,o)).provider=i,s.authWindow=null,s.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=L(s),s}return nt(n,[{key:"executeNotNull",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return si(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ae(Ne().mark((function e(){var t,n=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ci(1===this.filter.length,"Popup operations only handle one event"),t=Ds(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ri(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ri(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ri(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Lu.get())}()}}]),n}(Du);zu.currentPopupAction=null;var qu=new Map,Bu=function(e){at(n,e);var t=ct(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return et(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return nt(n,[{key:"execute",value:function(){var e=Ae(Ne().mark((function e(){var t,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=qu.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Zu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Mr(ot(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:qu.set(this.auth._key(),t);case 21:return this.bypassAuthState||qu.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ae(Ne().mark((function e(t){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Mr(ot(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Mr(ot(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Du);function Zu(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=Ae(Ne().mark((function e(t,n){var r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=$u(n),i=Qu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Hu(e,t){return Ku.apply(this,arguments)}function Ku(){return Ku=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Qu(t)._set($u(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Ku.apply(this,arguments)}function Gu(e,t){qu.set(e._key(),t)}function Qu(e){return hi(e._redirectPersistence)}function $u(e){return ra("pendingRedirect",e.config.apiKey,e.name)}function Yu(e,t,n){return function(e,t,n){return Xu.apply(this,arguments)}(e,t,n)}function Xu(){return Xu=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ba(t),ai(t,n,so),a=Cu(i,r),e.next=5,Hu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Xu.apply(this,arguments)}function Ju(e,t,n){return function(e,t,n){return ec.apply(this,arguments)}(e,t,n)}function ec(){return ec=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ai((i=an(t)).auth,n,so),a=Cu(i.auth,r),e.next=5,Hu(a,i.auth);case 5:return e.next=7,sc(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)}))),ec.apply(this,arguments)}function tc(e,t,n){return function(e,t,n){return nc.apply(this,arguments)}(e,t,n)}function nc(){return nc=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ai((i=an(t)).auth,n,so),a=Cu(i.auth,r),e.next=5,Ro(!1,i,n.providerId);case 5:return e.next=7,Hu(a,i.auth);case 7:return e.next=9,sc(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)}))),nc.apply(this,arguments)}function rc(e,t){return ic.apply(this,arguments)}function ic(){return ic=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ba(t)._initializationPromise;case 2:return e.abrupt("return",ac(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),ic.apply(this,arguments)}function ac(e,t){return oc.apply(this,arguments)}function oc(){return oc=Ae(Ne().mark((function e(t,n){var r,i,a,o,s,u=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=ba(t),a=Cu(i,n),o=new Bu(i,a,r),e.next=6,o.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),oc.apply(this,arguments)}function sc(e){return uc.apply(this,arguments)}function uc(){return(uc=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ds("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cc=function(){function e(t){et(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return nt(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!hc(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ri(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(lc(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(lc(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function lc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function hc(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function fc(e){return dc.apply(this,arguments)}function dc(){return dc=Ae(Ne().mark((function e(t){var n,r=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",_i(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),dc.apply(this,arguments)}var pc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vc=/^https?/;function yc(){return yc=Ae(Ne().mark((function e(t){var n,r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fc(t);case 4:n=e.sent,r=n.authorizedDomains,i=it(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!mc(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:ni(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),yc.apply(this,arguments)}function mc(e){var t=fi(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!vc.test(r))return!1;if(pc.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var gc=new vi(3e4,6e4);function kc(){var e=Ms().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=(0,a.Z)(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var bc=null;function _c(e){return bc=bc||function(e){return new Promise((function(t,n){var r,i,a;function o(){kc(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){kc(),n(ri(e,"network-request-failed"))},timeout:gc.get()})}if(null===(i=null===(r=Ms().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ms().gapi)||void 0===a?void 0:a.load)){var s=au("iframefcb");return Ms()[s]=function(){gapi.load?o():n(ri(e,"network-request-failed"))},iu("https://apis.google.com/js/api.js?onload=".concat(s)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw bc=null,e}))}(e),bc}var wc=new vi(5e3,15e3),xc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Sc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tc(e){var t=e.config;si(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?yi(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:tr},i=Sc.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ht(r).slice(1))}function Ic(e){return Ec.apply(this,arguments)}function Ec(){return Ec=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_c(t);case 2:return n=e.sent,si(r=Ms().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:Tc(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xc,dontclear:!0},(function(e){return new Promise(function(){var n=Ae(Ne().mark((function n(r,i){var a,o,s;return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){Ms().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ri(t,"network-request-failed"),o=Ms().setTimeout((function(){i(a)}),wc.get()),e.ping(s).then(s,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Ec.apply(this,arguments)}var Cc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rc="_blank",Nc="http://localhost",Pc=function(){function e(t){et(this,e),this.window=t,this.associatedEvent=null}return nt(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ac(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",c=Object.assign(Object.assign({},Cc),{width:r.toString(),height:i.toString(),top:a,left:s}),l=Tt().toLowerCase();n&&(u=ua(l)?Rc:n),oa(l)&&(t=t||Nc,c.scrollbars="yes");var h=Object.entries(c).reduce((function(e,t){var n=(0,o.Z)(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(pa(l)&&"_self"!==u)return Oc(t||"",u),new Pc(null);var f=window.open(t||"",u,h);si(f,e,"popup-blocked");try{f.focus()}catch(d){}return new Pc(f)}function Oc(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Dc="__/auth/handler",Lc="emulator/auth/handler";function Mc(e,t,n,r,i,a){si(e.config.authDomain,e,"auth-domain-config-required"),si(e.config.apiKey,e,"invalid-api-key");var s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:tr,eventId:i};if(t instanceof so){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",qt(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,c=Object.entries(a||{});u<c.length;u++){var l=(0,o.Z)(c[u],2),h=l[0],f=l[1];s[h]=f}}if(t instanceof uo){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(s.scopes=d.join(","))}e.tenantId&&(s.tid=e.tenantId);for(var p=s,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Dc);return yi(t,Lc)}(e),"?").concat(Ht(p).slice(1))}var Fc="webStorageSupport",Uc=function(){function e(){et(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ps,this._completeRedirectFn=ac,this._overrideRedirectResult=Gu}return nt(e,[{key:"_openPopup",value:function(){var e=Ae(Ne().mark((function e(t,n,r,i){var a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ci(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Mc(t,n,r,fi(),i),e.abrupt("return",Ac(t,o,Ds()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ae(Ne().mark((function e(t,n,r,i){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Mc(t,n,r,fi(),i),Ms().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ci(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ic(t);case 2:return n=e.sent,r=new cc(t),n.register("authEvent",(function(e){return si(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Fc,{type:Fc},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),ni(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return yc.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return ya()||sa()||da()}}]),e}(),jc=Uc,Vc=function(){function e(t){et(this,e),this.factorId=t}return nt(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ui("unexpected MultiFactorSessionType")}}}]),e}(),zc=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this,"phone")).credential=e,r}return nt(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return _i(e,"POST","/v2/accounts/mfaEnrollment:finalize",bi(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return _i(e,"POST","/v2/accounts/mfaSignIn:finalize",bi(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Vc),qc=function(){function e(){et(this,e)}return nt(e,null,[{key:"assertion",value:function(e){return zc._fromCredential(e)}}]),e}();qc.FACTOR_ID="phone";var Bc,Zc="@firebase/auth",Wc="0.20.5",Hc=function(){function e(t){et(this,e),this.auth=t,this.internalListeners=new Map}return nt(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){si(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Kc(){return window}Bc="Browser",Gn(new on("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,s=a.authDomain;return function(e,t){si(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),si(!(null===s||void 0===s?void 0:s.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:s,clientPlatform:Bc,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ma(Bc)},i=new ka(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(hi);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Gn(new on("auth-internal",(function(e){return function(e){return new Hc(e)}(ba(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),sr(Zc,Wc,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Bc)),sr(Zc,Wc,"esm2017");function Gc(e,t,n){return Qc.apply(this,arguments)}function Qc(){return Qc=Ae(Ne().mark((function e(t,n,r){var i,a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Kc(),o=a.BuildInfo,ci(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,tl(n.sessionId);case 4:return s=e.sent,u={},da()?u.ibi=o.packageName:la()?u.apn=o.packageName:ni(t,"operation-not-supported-in-this-environment"),o.displayName&&(u.appDisplayName=o.displayName),u.sessionId=s,e.abrupt("return",Mc(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,u));case 10:case"end":return e.stop()}}),e)}))),Qc.apply(this,arguments)}function $c(){return $c=Ae(Ne().mark((function e(t){var n,r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Kc(),r=n.BuildInfo,i={},da()?i.iosBundleId=r.packageName:la()?i.androidPackageName=r.packageName:ni(t,"operation-not-supported-in-this-environment"),e.next=5,fc(t,i);case 5:case"end":return e.stop()}}),e)}))),$c.apply(this,arguments)}function Yc(e){var t=Kc().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function Xc(e,t,n){return Jc.apply(this,arguments)}function Jc(){return Jc=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Kc(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var s=null;function u(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){s||(s=window.setTimeout((function(){i(ri(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(u),document.addEventListener("resume",c,!1),la()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(u),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),s&&window.clearTimeout(s)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Jc.apply(this,arguments)}function el(e){var t,n,r,i,a,o,s,u,c,l,h=Kc();si("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),si("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),si("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),si("function"===typeof(null===(u=null===(s=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===s?void 0:s.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),si("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function tl(e){return nl.apply(this,arguments)}function nl(){return(nl=Ae(Ne().mark((function e(t){var n,r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rl(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rl(e){if(ci(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var il=function(e){at(n,e);var t=ct(n);function n(){var e;return et(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return nt(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Mr(ot(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(cc);function al(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:ll(),postBody:null,tenantId:e.tenantId,error:ri(e,"no-auth-event")}}function ol(e,t){return hl()._set(fl(e),t)}function sl(e){return ul.apply(this,arguments)}function ul(){return ul=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hl()._get(fl(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,hl()._remove(fl(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),ul.apply(this,arguments)}function cl(e,t){var n,r,i=function(e){var t=dl(e),n=t.link?decodeURIComponent(t.link):void 0,r=dl(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return dl(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=dl(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,s=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=s?ri(s):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function ll(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function hl(){return hi(Rs)}function fl(e){return ra("authEvent",e.config.apiKey,e.name)}function dl(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=(t=n,(0,Ar.Z)(t)||(0,Or.Z)(t)||(0,rt.Z)(t)||(0,Dr.Z)());r[0];return Kt(r.slice(1).join("?"))}var pl=function(){function e(){et(this,e),this._redirectPersistence=Ps,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ac,this._overrideRedirectResult=Gu}return nt(e,[{key:"_initialize",value:function(){var e=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new il(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){ni(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ae(Ne().mark((function e(t,n,r,i){var a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return el(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),qu.clear(),e.next=10,this._originValidation(t);case 10:return o=al(t,r,i),e.next=13,ol(t,o);case 13:return e.next=15,Gc(t,o,n);case 15:return s=e.sent,e.next=18,Yc(s);case 18:return u=e.sent,e.abrupt("return",Xc(t,a,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return $c.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Kc(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ae(Ne().mark((function n(){return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,sl(e);case 2:t.onEvent(yl());case 3:case"end":return n.stop()}}),n)}))),500),s=function(){var n=Ae(Ne().mark((function n(r){var i,a;return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,sl(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=cl(i,r.url)),t.onEvent(a||yl());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,s);var u=i,c="".concat(a.packageName.toLowerCase(),"://");Kc().handleOpenURL=function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&s({url:t}),"function"===typeof u)try{u(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),vl=pl;function yl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ri("no-auth-event")}}function ml(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function gl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return!("file:"!==ml()&&"ionic:"!==ml()&&"capacitor:"!==ml()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function kl(){return Nt()&&11===(null===document||void 0===document?void 0:document.documentMode)}function bl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return/Edge\/\d+/.test(e)}function _l(){try{var e=self.localStorage,t=Ds();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt();return kl()||bl(e)}()||At()}catch(n){return wl()&&At()}return!1}function wl(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function xl(){return("http:"===ml()||"https:"===ml()||Ct()||gl())&&!(Rt()||Et())&&_l()&&!wl()}function Sl(){return gl()&&"undefined"!==typeof document}function Tl(){return Il.apply(this,arguments)}function Il(){return(Il=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Sl()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var El={LOCAL:"local",NONE:"none",SESSION:"session"},Cl=si,Rl="persistence";function Nl(e,t){Cl(Object.values(El).includes(t),e,"invalid-persistence-type"),Rt()?Cl(t!==El.SESSION,e,"unsupported-persistence-type"):Et()?Cl(t===El.NONE,e,"unsupported-persistence-type"):wl()?Cl(t===El.NONE||t===El.LOCAL&&At(),e,"unsupported-persistence-type"):Cl(t===El.NONE||_l(),e,"unsupported-persistence-type")}function Pl(e){return Al.apply(this,arguments)}function Al(){return Al=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Ol(),r=ra(Rl,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),Al.apply(this,arguments)}function Ol(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Dl=si,Ll=function(){function e(){et(this,e),this.browserResolver=hi(jc),this.cordovaResolver=hi(vl),this.underlyingResolver=null,this._redirectPersistence=Ps,this._completeRedirectFn=ac,this._overrideRedirectResult=Gu}return nt(e,[{key:"_initialize",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ae(Ne().mark((function e(t,n,r,i){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ae(Ne().mark((function e(t,n,r,i){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return Sl()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Dl(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Tl();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ml(e){return e.unwrap()}function Fl(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new ql(e,function(e,t){var n,r=an(e),i=t;return si(t.customData.operationType,r,"argument-error"),si(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),_s._fromError(r,i)}(e,t));else if(i){var a=Ul(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function Ul(e){var t=(e instanceof Ot?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Ot)&&"temporaryProof"in t&&"phoneNumber"in t)return Eu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===qr)return null;switch(r){case zr:n=ho;break;case jr:n=lo;break;case Vr:n=fo;break;case Br:n=yo;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,s=t.pendingToken,u=t.nonce;return a||o||i||s?s?r.startsWith("saml.")?po._create(r,s):Ya._fromParams({providerId:r,signInMethod:r,pendingToken:s,idToken:i,accessToken:a}):new co(r).credential({idToken:i,accessToken:a,rawNonce:u}):null}return e instanceof Ot?n.credentialFromError(e):n.credentialFromResult(e)}function jl(e,t){return t.catch((function(t){throw t instanceof Ot&&Fl(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Ul(t)),additionalUserInfo:ks(e),user:Bl.getOrCreate(r)}}))}function Vl(e,t){return zl.apply(this,arguments)}function zl(){return zl=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return jl(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),zl.apply(this,arguments)}var ql=function(){function e(t,n){et(this,e),this.resolver=n,this.auth=t.wrapped()}return nt(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return jl(Ml(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Bl=function(){function e(t){et(this,e),this._delegate=t,this.multiFactor=function(e){var t=an(e);return Ts.has(t)||Ts.set(t,Ss._fromUser(t)),Ts.get(t)}(t)}return nt(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jl(this.auth,Fo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Vl(this.auth,_u(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jl(this.auth,ju(this._delegate,t,Ll)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pl(ba(this.auth));case 2:return e.abrupt("return",tc(this._delegate,t,Ll));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jl(this.auth,jo(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Vl(this.auth,function(e,t,n){return xu.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return jl(this.auth,function(e,t,n){return Uu.apply(this,arguments)}(this._delegate,e,Ll))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pl(ba(this.auth));case 2:return e.abrupt("return",Ju(this._delegate,t,Ll));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return os.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,To(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return hs(an(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return hs(an(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return Iu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ls.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ss.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Bl.USER_MAP=new WeakMap;var Zl=si,Wl=function(){function e(t,n){if(et(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Zl(r,"invalid-api-key",{appName:t.name}),Zl(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ll:void 0;this._delegate=n.initialize({options:{persistence:Kl(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Yr),this.linkUnderlyingAuth()}return nt(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Bl.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){wa(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Qo.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return $o(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return Go.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jl(this._delegate,Jo(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return as.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ao.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zl(xl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,rc(this._delegate,Ll);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",jl(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){ba(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Hl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Hl(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return ts.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return Ko.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Nl(this._delegate,t),e.t0=t,e.next=e.t0===El.SESSION?4:e.t0===El.LOCAL?6:e.t0===El.NONE?11:13;break;case 4:return n=Ps,e.abrupt("break",14);case 6:return e.next=8,hi(eu)._isAvailable();case 8:return r=e.sent,n=r?eu:Rs,e.abrupt("break",14);case 11:return n=na,e.abrupt("break",14);case 13:return e.abrupt("return",ni("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return jl(this._delegate,function(e){return _o.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return jl(this._delegate,Lo(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return jl(this._delegate,function(e,t){return Bo.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return jl(this._delegate,function(e,t,n){return Lo(an(e),oo.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return jl(this._delegate,function(e,t,n){return ns.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Vl(this._delegate,function(e,t,n){return bu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zl(xl(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",jl(this._delegate,Mu(this._delegate,t,Ll)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Zl(xl(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Pl(this._delegate);case 3:return e.abrupt("return",Yu(this._delegate,t,Ll));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Xo.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Hl(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Bl.getOrCreate(e))},error:t,complete:n}}function Kl(e,t){var n=function(e,t){var n=Ol();if(!n)return[];var r=ra(Rl,e,t);switch(n.getItem(r)){case El.NONE:return[na];case El.LOCAL:return[eu,Ps];case El.SESSION:return[Ps];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(eu)||n.push(eu),"undefined"!==typeof window)for(var r=0,i=[Rs,Ps];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(na)||n.push(na),n}Wl.Persistence=El;var Gl=function(){function e(){et(this,e),this.providerId="phone",this._delegate=new Eu(Ml(Pr.auth()))}return nt(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Eu.credential(e,t)}}]),e}();Gl.PHONE_SIGN_IN_METHOD=Eu.PHONE_SIGN_IN_METHOD,Gl.PROVIDER_ID=Eu.PROVIDER_ID;var Ql=si,$l=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pr.app();et(this,e),Ql(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new mu(t,n,i.auth()),this.type=this._delegate.type}return nt(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new on("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Wl(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zr,PASSWORD_RESET:Wr,RECOVER_EMAIL:Hr,REVERT_SECOND_FACTOR_ADDITION:Kr,VERIFY_AND_CHANGE_EMAIL:Gr,VERIFY_EMAIL:Qr}},EmailAuthProvider:oo,FacebookAuthProvider:lo,GithubAuthProvider:fo,GoogleAuthProvider:ho,OAuthProvider:co,SAMLAuthProvider:vo,PhoneAuthProvider:Gl,PhoneMultiFactorGenerator:qc,RecaptchaVerifier:$l,TwitterAuthProvider:yo,Auth:Wl,AuthCredential:Ta,Error:Ot}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.18")}(Pr);var Yl="firebasestorage.googleapis.com",Xl=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,Jl(e),"Firebase Storage: ".concat(r," (").concat(Jl(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(L(i),n.prototype),i}return nt(n,[{key:"_codeEquals",value:function(e){return Jl(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Ot);function Jl(e){return"storage/"+e}function eh(){return new Xl("unknown","An unknown error occurred, please check the error payload for server response.")}function th(){return new Xl("canceled","User canceled the upload/download.")}function nh(){return new Xl("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function rh(e){return new Xl("invalid-argument",e)}function ih(){return new Xl("app-deleted","The Firebase app was deleted.")}function ah(e){return new Xl("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oh(e,t){return new Xl("invalid-format","String does not match format '"+e+"': "+t)}function sh(e){throw new Xl("internal-error","Internal error: "+e)}var uh,ch=function(){function e(t,n){et(this,e),this.bucket=t,this.path_=n}return nt(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Xl("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Yl?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new Xl("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),lh=function(){function e(t){et(this,e),this.promise_=Promise.reject(t)}return nt(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function hh(e){return"string"===typeof e||e instanceof String}function fh(e){return dh()&&e instanceof Blob}function dh(){return"undefined"!==typeof Blob}function ph(e,t,n,r){if(r<t)throw rh("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw rh("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function vh(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function yh(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(uh||(uh={}));var mh=function(){function e(t,n,r,i,a,o,s,u,c,l,h){var f=this;et(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return nt(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(u){i(u)}else if(null!==a){var s=eh();s.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,s)):i(s)}else{if(n.canceled)i(e.appDelete_?ih():th());else i(new Xl("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new gh(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,s=0;function u(){return 2===s}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,u())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(u()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===s?(s=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(s=2),clearTimeout(i),h(0)):e||(s=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new gh(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===uh.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new gh(o,r))}else{var s=r.getErrorCode()===uh.ABORT;t(!1,new gh(!1,null,s))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),gh=nt((function e(t,n,r){et(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function kh(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function bh(){for(var e=kh(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(dh())return new Blob(n);throw new Xl("unsupported-environment","This browser doesn't seem to support creating Blobs")}var _h={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},wh=nt((function e(t,n){et(this,e),this.data=t,this.contentType=n||null}));function xh(e,t){switch(e){case _h.RAW:return new wh(Sh(t));case _h.BASE64:case _h.BASE64URL:return new wh(Th(e,t));case _h.DATA_URL:return new wh(function(e){var t=new Ih(e);return t.base64?Th(_h.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw oh(_h.DATA_URL,"Malformed data URL.")}return Sh(t)}(t.rest)}(t),new Ih(t).contentType)}throw eh()}function Sh(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Th(e,t){switch(e){case _h.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw oh(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case _h.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw oh(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=atob(t)}catch(c){throw oh(e,"Invalid character found")}for(var s=new Uint8Array(o.length),u=0;u<o.length;u++)s[u]=o.charCodeAt(u);return s}var Ih=nt((function e(t){et(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw oh(_h.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var Eh=function(){function e(t,n){et(this,e);var r=0,i="";fh(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return nt(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(fh(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(dh()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(bh.apply(null,i))}var a=n.map((function(e){return hh(e)?xh(_h.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var s=new Uint8Array(o),u=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)s[u++]=e[t]})),new e(s,!0)}}]),e}();function Ch(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Rh(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Nh(e,t){return t}var Ph=nt((function e(t,n,r,i){et(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||Nh})),Ah=null;function Oh(){if(Ah)return Ah;var e=[];e.push(new Ph("bucket")),e.push(new Ph("generation")),e.push(new Ph("metageneration")),e.push(new Ph("name","fullPath",!0));var t=new Ph("name");t.xform=function(e,t){return function(e){return!hh(e)||e.length<2?e:Rh(e)}(t)},e.push(t);var n=new Ph("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ph("timeCreated")),e.push(new Ph("updated")),e.push(new Ph("md5Hash",null,!0)),e.push(new Ph("cacheControl",null,!0)),e.push(new Ph("contentDisposition",null,!0)),e.push(new Ph("contentEncoding",null,!0)),e.push(new Ph("contentLanguage",null,!0)),e.push(new Ph("contentType",null,!0)),e.push(new Ph("metadata","customMetadata",!0)),Ah=e}function Dh(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new ch(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Lh(e,t,n){var r=Ch(t);return null===r?null:Dh(e,r,n)}function Mh(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function Fh(e,t,n){var r=Ch(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=it(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),s=e._makeStorageReference(new ch(t,o));r.prefixes.push(s)}}catch(f){a.e(f)}finally{a.f()}}if(n.items){var u,c=it(n.items);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=e._makeStorageReference(new ch(t,l.name));r.items.push(h)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var Uh=nt((function e(t,n,r,i){et(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function jh(e){if(!e)throw eh()}function Vh(e,t){return function(n,r){var i=Lh(e,r,t);return jh(null!==i),i}}function zh(e,t){return function(n,r){var i=Lh(e,r,t);return jh(null!==i),function(e,t,n,r){var i=Ch(t);if(null===i)return null;if(!hh(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return vh("/b/"+o(i)+"/o/"+o(a),n,r)+yh({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function qh(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Xl("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Xl("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Xl("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Xl("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Bh(e){var t=qh(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Xl("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Zh(e,t,n){var r=vh(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Uh(r,"GET",Vh(e,n),i);return a.errorHandler=Bh(t),a}function Wh(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=vh(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,u=new Uh(o,"GET",function(e,t){return function(n,r){var i=Fh(e,t,r);return jh(null!==i),i}}(e,t.bucket),s);return u.urlParams=a,u.errorHandler=qh(t),u}function Hh(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Kh(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+s;var u=Hh(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Mh(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=Eh.getBlob(c,r,l);if(null===h)throw nh();var f={name:u.fullPath},d=vh(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Uh(d,"POST",Vh(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=qh(t),v}var Gh=nt((function e(t,n,r,i){et(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function Qh(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){jh(!1)}return jh(!!n&&-1!==(t||["active"]).indexOf(n)),n}var $h=262144;function Yh(e,t,n,r,i,a,o,s){var u=new Gh(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Xl("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(u.current)},p=r.slice(h,f);if(null===p)throw nh();var v=t.maxUploadRetryTime,y=new Uh(n,"POST",(function(e,n){var i,o=Qh(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===o?Vh(t,a)(e,n):null,new Gh(s,c,"final"===o,i)}),v);return y.headers=d,y.body=p.uploadData(),y.progressCallback=s||null,y.errorHandler=qh(e),y}var Xh={STATE_CHANGED:"state_changed"},Jh={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ef(e){switch(e){case"running":case"pausing":case"canceling":return Jh.RUNNING;case"paused":return Jh.PAUSED;case"success":return Jh.SUCCESS;case"canceled":return Jh.CANCELED;default:return Jh.ERROR}}var tf=nt((function e(t,n,r){et(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function nf(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var rf=function(){function e(){var t=this;et(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=uh.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=uh.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=uh.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return nt(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw sh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw sh("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw sh("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw sh("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw sh("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),af=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(rf);function of(){return new af}var sf=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;et(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=Oh(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return nt(e,[{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=(0,o.Z)(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Hh(t,r,i),s={name:o.fullPath},u=vh(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=Mh(o,n),h=e.maxUploadRetryTime,f=new Uh(u,"POST",(function(e){var t;Qh(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){jh(!1)}return jh(hh(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=qh(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,of,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Uh(n,"POST",(function(e){var t=Qh(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){jh(!1)}n||jh(!1);var i=Number(n);return jh(!isNaN(i)),new Gh(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=qh(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,of,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=$h*this._chunkMultiplier,n=new Gh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Yh(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(o,of,i,a);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){$h*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Zh(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,of,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Kh(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,of,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=th(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=ef(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new tf(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(ef(this._state)){case Jh.SUCCESS:nf(this._resolve.bind(null,this.snapshot))();break;case Jh.CANCELED:case Jh.ERROR:nf(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(ef(this._state)){case Jh.RUNNING:case Jh.PAUSED:e.next&&nf(e.next.bind(e,this.snapshot))();break;case Jh.SUCCESS:e.complete&&nf(e.complete.bind(e))();break;default:e.error&&nf(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),uf=function(){function e(t,n){et(this,e),this._service=t,this._location=n instanceof ch?n:ch.makeFromUrl(n,t.host)}return nt(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new ch(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return Rh(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new ch(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw ah(e)}}]),e}();function cf(e,t,n){return lf.apply(this,arguments)}function lf(){return(lf=Ae(Ne().mark((function e(t,n,r){var i,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={pageToken:r},e.next=3,hf(t,s);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,(0,a.Z)(u.prefixes)),(o=n.items).push.apply(o,(0,a.Z)(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,cf(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hf(e,t){null!=t&&"number"===typeof t.maxResults&&ph("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Wh(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,of)}function ff(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=vh(t.fullServerUrl(),e.host,e._protocol),a=Mh(n,r),o=e.maxOperationRetryTime,s=new Uh(i,"PATCH",Vh(e,r),o);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=a,s.errorHandler=Bh(t),s}(e.storage,e._location,t,Oh());return e.storage.makeRequestWithTokens(n,of)}function df(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=vh(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Uh(r,"GET",zh(e,n),i);return a.errorHandler=Bh(t),a}(e.storage,e._location,Oh());return e.storage.makeRequestWithTokens(t,of).then((function(e){if(null===e)throw new Xl("no-download-url","The given file does not have any download URLs.");return e}))}function pf(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=vh(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Uh(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Bh(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,of)}function vf(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ch(e._location.bucket,n);return new uf(e.storage,r)}function yf(e,t){if(e instanceof bf){var n=e;if(null==n._bucket)throw new Xl("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new uf(n,n._bucket);return null!=t?yf(r,t):r}return void 0!==t?vf(e,t):e}function mf(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof bf)return new uf(e,t);throw rh("To use ref(service, url), the first argument must be a Storage instance.")}return yf(e,t)}function gf(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:ch.makeFromBucketSpec(n,e)}function kf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:St(i,e.app.options.projectId))}var bf=function(){function e(t,n,r,i,a){et(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Yl,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ch.makeFromBucketSpec(i,this._host):gf(this._host,this.app.options)}return nt(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=ch.makeFromBucketSpec(this._url,e):this._bucket=gf(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){ph("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){ph("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Ae(Ne().mark((function e(){var t,n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Ae(Ne().mark((function e(){var t,n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new uf(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new lh(ih());var a=function(e,t,n,r,i,a){var o=yh(e.urlParams),s=e.url+o,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new mh(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=Ae(Ne().mark((function e(t,n){var r,i,a,s;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=(0,o.Z)(r,2),a=i[0],s=i[1],e.abrupt("return",this._makeRequest(t,n,a,s).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),_f="@firebase/storage",wf="0.9.9",xf="storage";function Sf(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new sf(e,new Eh(t),n)}(e=an(e),t,n)}function Tf(e){return function(e){e._throwIfRoot("getMetadata");var t=Zh(e.storage,e._location,Oh());return e.storage.makeRequestWithTokens(t,of)}(e=an(e))}function If(e){return function(e){var t={prefixes:[],items:[]};return cf(e,t).then((function(){return t}))}(e=an(e))}function Ef(e,t){return mf(e=an(e),t)}function Cf(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};kf(e,t,n,r)}function Rf(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new bf(r,i,a,n,tr)}Gn(new on(xf,Rf,"PUBLIC").setMultipleInstances(!0)),sr(_f,wf,""),sr(_f,wf,"esm2017");var Nf=function(){function e(t,n,r){et(this,e),this._delegate=t,this.task=n,this.ref=r}return nt(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),Pf=function(){function e(t,n){et(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return nt(e,[{key:"snapshot",get:function(){return new Nf(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new Nf(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new Nf(e,i,i._ref))}:{next:t.next?function(e){return t.next(new Nf(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),Af=function(){function e(t,n){et(this,e),this._delegate=t,this._service=n}return nt(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Of(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new Of(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),Of=function(){function e(t,n){et(this,e),this._delegate=t,this.storage=n}return nt(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return vf(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new Pf(Sf(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_h.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=xh(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Pf(new sf(this._delegate,new Eh(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return If(this._delegate).then((function(t){return new Af(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return hf(e=an(e),t)}(this._delegate,e||void 0).then((function(e){return new Af(e,t.storage)}))}},{key:"getMetadata",value:function(){return Tf(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return ff(e=an(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return df(an(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),pf(an(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw ah(e)}}]),e}(),Df=function(){function e(t,n){et(this,e),this.app=t,this._delegate=n}return nt(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(Lf(e))throw rh("ref() expected a child path but got a URL, use refFromURL instead.");return new Of(Ef(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!Lf(e))throw rh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ch.makeFromUrl(e,this._delegate.host)}catch(t){throw rh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Of(Ef(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Cf(this._delegate,e,t,n)}}]),e}();function Lf(e){return/^[A-Za-z]+:\/\//.test(e)}function Mf(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Df(r,i)}!function(e){var t={TaskState:Jh,TaskEvent:Xh,StringFormat:_h,Storage:Df,Reference:Of};e.INTERNAL.registerComponent(new on("storage-compat",Mf,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.1.17")}(Pr);var Ff="@firebase/database",Uf="0.13.3",jf="";function Vf(e){jf=e}var zf=function(){function e(t){et(this,e),this.domStorage_=t,this.prefix_="firebase:"}return nt(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ut(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ft(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),qf=function(){function e(){et(this,e),this.cache_={},this.isInMemoryStorage=!0}return nt(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Vt(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),Bf=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new zf(t)}}catch(n){}return new qf},Zf=Bf("localStorage"),Wf=Bf("sessionStorage"),Hf=new mn("@firebase/database"),Kf=function(){var e=1;return function(){return e++}}(),Gf=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,vt(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Qt;n.update(t);var r=n.digest();return gt.encodeByteArray(r)},Qf=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Ut(r):r,t+=" "}return t},$f=null,Yf=!0,Xf=function(e,t){vt(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Hf.logLevel=ln.VERBOSE,$f=Hf.log.bind(Hf),t&&Wf.set("logging_enabled",!0)):"function"===typeof e?$f=e:($f=null,Wf.remove("logging_enabled"))},Jf=function(){if(!0===Yf&&(Yf=!1,null===$f&&!0===Wf.get("logging_enabled")&&Xf(!0)),$f){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Qf.apply(null,t);$f(r)}},ed=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Jf.apply(void 0,[e].concat(n))}},td=function(){var e="FIREBASE INTERNAL ERROR: "+Qf.apply(void 0,arguments);Hf.error(e)},nd=function(){var e="FIREBASE FATAL ERROR: ".concat(Qf.apply(void 0,arguments));throw Hf.error(e),new Error(e)},rd=function(){var e="FIREBASE WARNING: "+Qf.apply(void 0,arguments);Hf.warn(e)},id=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},ad="[MIN_NAME]",od="[MAX_NAME]",sd=function(e,t){if(e===t)return 0;if(e===ad||t===od)return-1;if(t===ad||e===od)return 1;var n=md(e),r=md(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},ud=function(e,t){return e===t?0:e<t?-1:1},cd=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Ut(t))},ld=function e(t){if("object"!==typeof t||null===t)return Ut(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Ut(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},hd=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function fd(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var dd=function(e){vt(!id(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(t?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var pd=new RegExp("^-?(0*)\\d{1,10}$"),vd=-2147483648,yd=2147483647,md=function(e){if(pd.test(e)){var t=Number(e);if(t>=vd&&t<=yd)return t}return null},gd=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw rd("Exception was thrown by user callback.",e),t}),Math.floor(0))}},kd=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},bd=function(){function e(t,n){var r=this;et(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return nt(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){rd('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),_d=function(){function e(t,n,r){var i=this;et(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return nt(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Jf("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rd(e)}}]),e}(),wd=function(){function e(t){et(this,e),this.accessToken=t}return nt(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();wd.OWNER="owner";var xd="5",Sd=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Td="websocket",Id="long_polling",Ed=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];et(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Zf.get("host:"+t)||this._host}return nt(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Zf.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function Cd(e,t,n){var r;if(vt("string"===typeof t,"typeof type must == string"),vt("object"===typeof n,"typeof params must == object"),t===Td)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==Id)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return fd(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var Rd=function(){function e(){et(this,e),this.counters_={}}return nt(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Vt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return wt(void 0,this.counters_)}}]),e}(),Nd={},Pd={};function Ad(e){var t=e.toString();return Nd[t]||(Nd[t]=new Rd),Nd[t]}var Od=function(){function e(t){et(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return nt(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&gd((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),Dd="start",Ld="close",Md=function(){function e(t,n,r,i,a,o,s){var u=this;et(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ed(t),this.stats_=Ad(n),this.urlFn=function(e){return u.appCheckToken&&(e.ac=u.appCheckToken),Cd(n,Id,e)}}return nt(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Od(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Pt()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Fd((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===Dd)n.id=a,n.password=o;else{if(i!==Ld)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=xd,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Sd.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=kt(t),r=hd(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Pt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Ut(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Pt()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),Fd=function(){function e(t,n,r,i){if(et(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Pt())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Kf(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(s){Jf("frame writing exception"),s.stack&&Jf(s.stack),Jf(s)}}}return nt(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Pt()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Jf("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Jf("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),Ud=null;"undefined"!==typeof MozWebSocket?Ud=MozWebSocket:"undefined"!==typeof WebSocket&&(Ud=WebSocket);var jd=function(){function e(t,n,r,i,a,o,s){et(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ed(this.connId),this.stats_=Ad(n),this.connURL=e.connectionURL_(n,o,s,i,r),this.nodeAdmin=n.nodeAdmin}return nt(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Zf.set("previous_websocket_failure",!0);try{var r;if(Pt()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(xd,"/").concat(jf,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new Ud(this.connURL,[],r)}catch(u){this.log_("Error instantiating WebSocket.");var s=u.message||u.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){Zf.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ft(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(vt(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=hd(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=xd,!Pt()&&"undefined"!==typeof location&&location.hostname&&Sd.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),Cd(e,Td,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==Ud&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return Zf.isInMemoryStorage||!0===Zf.get("previous_websocket_failure")}}]),e}();jd.responsesRequiredToBeHealthy=2,jd.healthyTimeout=3e4;var Vd=function(){function e(t){et(this,e),this.initTransports_(t)}return nt(e,[{key:"initTransports_",value:function(t){var n=jd&&jd.isAvailable(),r=n&&!jd.previouslyFailed();if(t.webSocketOnly&&(n||rd("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jd];else{var i,a=this.transports_=[],o=it(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var s=i.value;s&&s.isAvailable()&&a.push(s)}}catch(u){o.e(u)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[Md,jd]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();Vd.globalTransportInitialized_=!1;var zd=function(){function e(t,n,r,i,a,o,s,u,c,l){et(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=u,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ed("c:"+this.id+":"),this.transportManager_=new Vd(n),this.log_("Connection created"),this.start_()}return nt(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=kd((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=cd("t",e),n=cd("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=cd("t",e),n=cd("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=cd("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?td("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):td("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),xd!==n&&rd("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),kd((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):kd((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Zf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),qd=function(){function e(){et(this,e)}return nt(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),Bd=function(){function e(t){et(this,e),this.allowedEvents_=t,this.listeners_={},vt(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return nt(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=(0,a.Z)(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].callback.apply(t[o].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){vt(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),Zd=function(e){at(n,e);var t=ct(n);function n(){var e;return et(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||It()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return nt(n,[{key:"getInitialEvent",value:function(e){return vt("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(Bd),Wd=function(){function e(t,n){if(et(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return nt(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function Hd(){return new Wd("")}function Kd(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Gd(e){return e.pieces_.length-e.pieceNum_}function Qd(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new Wd(e.pieces_,t)}function $d(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Yd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Xd(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Wd(t,0)}function Jd(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof Wd)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new Wd(n,0)}function ep(e){return e.pieceNum_>=e.pieces_.length}function tp(e,t){var n=Kd(e),r=Kd(t);if(null===n)return t;if(n===r)return tp(Qd(e),Qd(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function np(e,t){for(var n=Yd(e,0),r=Yd(t,0),i=0;i<n.length&&i<r.length;i++){var a=sd(n[i],r[i]);if(0!==a)return a}return n.length===r.length?0:n.length<r.length?-1:1}function rp(e,t){if(Gd(e)!==Gd(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function ip(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(Gd(e)>Gd(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var ap=nt((function e(t,n){et(this,e),this.errorPrefix_=n,this.parts_=Yd(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=rn(this.parts_[r]);op(this)}));function op(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+sp(e))}function sp(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var up=function(e){at(n,e);var t=ct(n);function n(){var e,r,i;return et(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return nt(n,[{key:"getInitialEvent",value:function(e){return vt("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(Bd),cp=1e3,lp=function(e){at(n,e);var t=ct(n);function n(e,r,i,a,o,s,u,c){var l;if(et(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=ed("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=cp,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Pt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return up.getInstance().on("visible",l.onVisible_,L(l)),-1===e.host.indexOf("fblocal")&&Zd.getInstance().on("online",l.onOnline_,L(l)),l}return nt(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Ut(i)),vt(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new xt,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),vt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),vt(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var s=o.d,u=o.s;n.warnOnListenWarnings_(s,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==u&&t.removeListen_(i,a),e.onComplete&&e.onComplete(u,s))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=jt(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=jt(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),vt(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Ut(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):td("Unrecognized action received from server: "+Ut(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;vt(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cp,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=cp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=cp),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ae(Ne().mark((function e(){var t,r,i,a,s,u,c,l,h,f,d,p,v,y,m=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,i())},h=function(e){vt(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=(0,o.Z)(d,2),v=p[0],y=p[1],u?Jf("getToken() completed but was canceled"):(Jf("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,c=new zd(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){rd(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),s)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&rd(e.t0),l());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Jf("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Jf("Resuming connection for reason: "+e),delete this.interruptReasons_[e],qt(this.interruptReasons_)&&(this.reconnectDelay_=cp,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return ld(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new Wd(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Jf("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Jf("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=it(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=it(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(u){r.e(u)}finally{r.f()}}}catch(u){t.e(u)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var s=0;s<this.outstandingGets_.length;s++)this.outstandingGets_[s]&&this.sendGet_(s)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Pt()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+jf.replace(/\./g,"-")]=1,It()?e["framework.cordova"]=1:Rt()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=Zd.getInstance().currentlyOnline();return qt(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Vt(e,"w")){var n=zt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();rd("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(qd);lp.nextPersistentConnectionId_=0,lp.nextConnectionId_=0;var hp,fp=function(){function e(t,n){et(this,e),this.name=t,this.node=n}return nt(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),dp=function(){function e(){et(this,e)}return nt(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new fp(ad,e),r=new fp(ad,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return fp.MIN}}]),e}(),pp=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"compare",value:function(e,t){return sd(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw yt("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return fp.MIN}},{key:"maxPost",value:function(){return new fp(od,hp)}},{key:"makePost",value:function(e,t){return vt("string"===typeof e,"KeyIndex indexValue must always be a string."),new fp(e,hp)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return hp},set:function(e){hp=e}}]),n}(dp),vp=new pp,yp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;et(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return nt(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),mp=function(){function e(t,n,r,i,a){et(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:bp.EMPTY_NODE,this.right=null!=a?a:bp.EMPTY_NODE}return nt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return bp.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return bp.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();mp.RED=!0,mp.BLACK=!1;var gp,kp=function(){function e(){et(this,e)}return nt(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new mp(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),bp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;et(this,e),this.comparator_=t,this.root_=n}return nt(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,mp.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,mp.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new yp(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new yp(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new yp(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new yp(this.root_,null,this.comparator_,!0,e)}}]),e}();function _p(e,t){return sd(e.name,t.name)}function wp(e,t){return sd(e,t)}bp.EMPTY_NODE=new kp;var xp,Sp,Tp,Ip=function(e){return"number"===typeof e?"number:"+dd(e):"string:"+e},Ep=function(e){if(e.isLeafNode()){var t=e.val();vt("string"===typeof t||"number"===typeof t||"object"===typeof t&&Vt(t,".sv"),"Priority must be a string or number.")}else vt(e===gp||e.isEmpty(),"priority of unexpected type.");vt(e===gp||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Cp=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;et(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,vt(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Ep(this.priorityNode_)}return nt(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return ep(t)?this:".priority"===Kd(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=Kd(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(vt(".priority"!==r||1===Gd(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Qd(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ip(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?dd(this.value_):this.value_,this.lazyHash_=Gf(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(vt(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return vt(i>=0,"Unknown leaf type: "+n),vt(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return xp},set:function(e){xp=e}}]),e}();Cp.VALUE_TYPE_ORDER=["object","boolean","number","string"];var Rp,Np,Pp=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?sd(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return fp.MIN}},{key:"maxPost",value:function(){return new fp(od,new Cp("[PRIORITY-POST]",Tp))}},{key:"makePost",value:function(e,t){var n=Sp(e);return new fp(t,new Cp("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(dp),Ap=new Pp,Op=Math.log(2),Dp=function(){function e(t){et(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/Op,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return nt(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),Lp=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,s=i-r;if(0===s)return null;if(1===s)return a=e[r],o=n?n(a):a,new mp(o,a.node,mp.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return a=e[u],o=n?n(a):a,new mp(o,a.node,mp.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,s=function(t,r){var a=o-t,s=o;o-=t;var c=i(a+1,s),l=e[a],h=n?n(l):l;u(new mp(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,mp.BLACK):(s(h,mp.BLACK),s(h,mp.RED))}return a}(new Dp(e.length));return new bp(r||t,a)},Mp={},Fp=function(){function e(t,n){et(this,e),this.indexes_=t,this.indexSet_=n}return nt(e,[{key:"get",value:function(e){var t=zt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bp?t:null}},{key:"hasIndex",value:function(e){return Vt(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){vt(t!==vp,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(fp.Wrap),s=o.getNext();s;)a=a||t.isDefinedOn(s.node),i.push(s),s=o.getNext();r=a?Lp(i,t.getCompare()):Mp;var u=t.toString(),c=Object.assign({},this.indexSet_);c[u]=t;var l=Object.assign({},this.indexes_);return l[u]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Bt(this.indexes_,(function(e,i){var a=zt(r.indexSet_,i);if(vt(a,"Missing index implementation for "+i),e===Mp){if(a.isDefinedOn(t.node)){for(var o=[],s=n.getIterator(fp.Wrap),u=s.getNext();u;)u.name!==t.name&&o.push(u),u=s.getNext();return o.push(t),Lp(o,a.getCompare())}return Mp}var c=n.get(t.name),l=e;return c&&(l=l.remove(new fp(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Bt(this.indexes_,(function(e){if(e===Mp)return e;var r=n.get(t.name);return r?e.remove(new fp(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return vt(Mp&&Ap,"ChildrenNode.ts has not been loaded"),Rp=Rp||new e({".priority":Mp},{".priority":Ap})}}]),e}(),Up=function(){function e(t,n,r){et(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Ep(this.priorityNode_),this.children_.isEmpty()&&vt(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return nt(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||Np}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Np:t}},{key:"getChild",value:function(e){var t=Kd(e);return null===t?this:this.getImmediateChild(t).getChild(Qd(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(vt(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new fp(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?Np:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=Kd(e);if(null===n)return t;vt(".priority"!==Kd(e)||1===Gd(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Qd(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(Ap,(function(o,s){n[o]=s.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var s in n)o[s]=n[s];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Ip(this.getPriority().val())+":"),this.forEachChild(Ap,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Gf(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new fp(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new fp(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new fp(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,fp.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,fp.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===jp?-1:0}},{key:"withIndex",value:function(t){if(t===vp||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===vp||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Ap),r=t.getIterator(Ap),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===vp?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return Np||(Np=new e(new bp(wp),null,Fp.Default))}}]),e}();Up.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var jp=new(function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.call(this,new bp(wp),Up.EMPTY_NODE,Fp.Default)}return nt(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return Up.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(Up));Object.defineProperties(fp,{MIN:{value:new fp(ad,Up.EMPTY_NODE)},MAX:{value:new fp(od,jp)}}),pp.__EMPTY_NODE=Up.EMPTY_NODE,Cp.__childrenNodeConstructor=Up,gp=jp,function(e){Tp=e}(jp);function Vp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return Up.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),vt(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new Cp(n,Vp(t))}if(e instanceof Array){var r=Up.EMPTY_NODE;return fd(e,(function(t,n){if(Vt(e,t)&&"."!==t.substring(0,1)){var i=Vp(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(Vp(t))}var i=[],a=!1,o=e;if(fd(o,(function(e,t){if("."!==e.substring(0,1)){var n=Vp(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new fp(e,n)))}})),0===i.length)return Up.EMPTY_NODE;var s=Lp(i,_p,(function(e){return e.name}),wp);if(a){var u=Lp(i,Ap.getCompare());return new Up(s,Vp(t),new Fp({".priority":u},{".priority":Ap}))}return new Up(s,Vp(t),Fp.Default)}!function(e){Sp=e}(Vp);var zp=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this)).indexPath_=e,vt(!ep(e)&&".priority"!==Kd(e),"Can't create PathIndex with empty path or .priority key"),r}return nt(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?sd(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=Vp(e),r=Up.EMPTY_NODE.updateChild(this.indexPath_,n);return new fp(t,r)}},{key:"maxPost",value:function(){var e=Up.EMPTY_NODE.updateChild(this.indexPath_,jp);return new fp(od,e)}},{key:"toString",value:function(){return Yd(this.indexPath_,0).join("/")}}]),n}(dp),qp=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?sd(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return fp.MIN}},{key:"maxPost",value:function(){return fp.MAX}},{key:"makePost",value:function(e,t){var n=Vp(e);return new fp(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(dp),Bp=new qp,Zp="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wp=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=Zp.charAt(n%64),n=Math.floor(n/64);vt(0===n,"Cannot push at time == 0");var o=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=Zp.charAt(t[r]);return vt(20===o.length,"nextPushId: Length should be 20."),o}}(),Hp=function(e){if("2147483647"===e)return"-";var t=md(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return od;var a=n[i],o=Zp.charAt(Zp.indexOf(a)+1);return n[i]=o,n.slice(0,i+1).join("")},Kp=function(e){if("-2147483648"===e)return ad;var t=md(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=Zp.charAt(Zp.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function Gp(e){return{type:"value",snapshotNode:e}}function Qp(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function $p(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Yp(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Xp=function(){function e(t){et(this,e),this.index_=t}return nt(e,[{key:"updateChild",value:function(e,t,n,r,i,a){vt(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange($p(t,o)):vt(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(Qp(t,n)):a.trackChildChange(Yp(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ap,(function(e,r){t.hasChild(e)||n.trackChildChange($p(e,r))})),t.isLeafNode()||t.forEachChild(Ap,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Yp(t,r,i))}else n.trackChildChange(Qp(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?Up.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),Jp=function(){function e(t){et(this,e),this.indexedFilter_=new Xp(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return nt(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new fp(t,n))||(n=Up.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=Up.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(Up.EMPTY_NODE);var i=this;return t.forEachChild(Ap,(function(e,t){i.matches(new fp(e,t))||(r=r.updateImmediateChild(e,Up.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),ev=function(){function e(t){et(this,e),this.rangedFilter_=new Jp(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return nt(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new fp(t,n))||(n=Up.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=Up.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=Up.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var s,u,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(Up.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(s,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,u)<=0?f++:r=r.updateImmediateChild(p.name,Up.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var s=e;vt(s.numChildren()===this.limit_,"");var u=new fp(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,u);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(Yp(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange($p(t,h));var p=s.updateImmediateChild(t,Up.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Qp(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,u)>=0?(null!=i&&(i.trackChildChange($p(c.name,c.node)),i.trackChildChange(Qp(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,Up.EMPTY_NODE)):e}}]),e}(),tv=function(){function e(){et(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ap}return nt(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return vt(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return vt(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ad}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return vt(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return vt(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:od}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return vt(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===Ap}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function nv(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function rv(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function iv(e,t){var n=e.copy();return n.index_=t,n}function av(e){var t,n={};return e.isDefault()||(e.index_===Ap?t="$priority":e.index_===Bp?t="$value":e.index_===vp?t="$key":(vt(e.index_ instanceof zp,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Ut(t),e.startSet_&&(n.startAt=Ut(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Ut(e.indexStartName_))),e.endSet_&&(n.endAt=Ut(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Ut(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function ov(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ap&&(t.i=e.index_.toString()),t}var sv=function(e){at(n,e);var t=ct(n);function n(e,r,i,a){var o;return et(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=ed("p:rest:"),o.listens_={},o}return nt(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var s=n.getListenId_(e,r),u={};this.listens_[s]=u;var c=av(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),zt(a.listens_,s)===u)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=av(e._queryParams),r=e._path.toString(),i=new xt;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=(0,o.Z)(i,2),s=a[0],u=a[1];s&&s.accessToken&&(n.auth=s.accessToken),u&&u.token&&(n.ac=u.token);var c=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ht(n);t.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(r&&4===l.readyState){t.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=Ft(l.responseText)}catch(n){rd("Failed to parse JSON response for "+c+": "+l.responseText)}r(null,e)}else 401!==l.status&&404!==l.status&&rd("Got unsuccessful REST response for "+c+" Status: "+l.status),r(l.status);r=null}},l.open("GET",c,!0),l.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(vt(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(qd),uv=function(){function e(){et(this,e),this.rootNode_=Up.EMPTY_NODE}return nt(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function cv(){return{value:null,children:new Map}}function lv(e,t,n){if(ep(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=Kd(t);e.children.has(r)||e.children.set(r,cv()),lv(e.children.get(r),t=Qd(t),n)}}function hv(e,t){if(ep(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Ap,(function(t,n){lv(e,new Wd(t),n)})),hv(e,t)}if(e.children.size>0){var r=Kd(t);if(t=Qd(t),e.children.has(r))hv(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function fv(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){fv(r,new Wd(t.toString()+"/"+e),n)}))}var dv,pv=function(){function e(t){et(this,e),this.collection_=t,this.last_=null}return nt(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&fd(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),vv=function(){function e(t,n){et(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new pv(t);var r=1e4+2e4*Math.random();kd(this.reportStats_.bind(this),Math.floor(r))}return nt(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;fd(t,(function(t,i){i>0&&Vt(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),kd(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function yv(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(dv||(dv={}));var mv,gv=function(){function e(t,n,r){et(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=dv.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return nt(e,[{key:"operationForChild",value:function(t){if(ep(this.path)){if(null!=this.affectedTree.value)return vt(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new Wd(t));return new e(Hd(),n,this.revert)}return vt(Kd(this.path)===t,"operationForChild called for unrelated child."),new e(Qd(this.path),this.affectedTree,this.revert)}}]),e}(),kv=function(){function e(t,n){et(this,e),this.source=t,this.path=n,this.type=dv.LISTEN_COMPLETE}return nt(e,[{key:"operationForChild",value:function(t){return ep(this.path)?new e(this.source,Hd()):new e(this.source,Qd(this.path))}}]),e}(),bv=function(){function e(t,n,r){et(this,e),this.source=t,this.path=n,this.snap=r,this.type=dv.OVERWRITE}return nt(e,[{key:"operationForChild",value:function(t){return ep(this.path)?new e(this.source,Hd(),this.snap.getImmediateChild(t)):new e(this.source,Qd(this.path),this.snap)}}]),e}(),_v=function(){function e(t,n,r){et(this,e),this.source=t,this.path=n,this.children=r,this.type=dv.MERGE}return nt(e,[{key:"operationForChild",value:function(t){if(ep(this.path)){var n=this.children.subtree(new Wd(t));return n.isEmpty()?null:n.value?new bv(this.source,Hd(),n.value):new e(this.source,Hd(),n)}return vt(Kd(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Qd(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),wv=function(){function e(t,n,r){et(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return nt(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(ep(e))return this.isFullyInitialized()&&!this.filtered_;var t=Kd(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),xv=nt((function e(t){et(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function Sv(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw yt("Should only compare child_ events.");var r=new fp(t.childName,t.snapshotNode),i=new fp(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Tv(e,t){return{eventCache:e,serverCache:t}}function Iv(e,t,n,r){return Tv(new wv(t,n,r),e.serverCache)}function Ev(e,t,n,r){return Tv(e.eventCache,new wv(t,n,r))}function Cv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Rv(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Nv=function(){return mv||(mv=new bp(ud)),mv},Pv=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nv();et(this,e),this.value=t,this.children=n}return nt(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:Hd(),value:this.value};if(ep(e))return null;var n=Kd(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Qd(e),t);return null!=i?{path:Jd(new Wd(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(ep(t))return this;var n=Kd(t),r=this.children.get(n);return null!==r?r.subtree(Qd(t)):new e(null)}},{key:"set",value:function(t,n){if(ep(t))return new e(n,this.children);var r=Kd(t),i=(this.children.get(r)||new e(null)).set(Qd(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(ep(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=Kd(t),r=this.children.get(n);if(r){var i,a=r.remove(Qd(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(ep(e))return this.value;var t=Kd(e),n=this.children.get(t);return n?n.get(Qd(e)):null}},{key:"setTree",value:function(t,n){if(ep(t))return n;var r,i=Kd(t),a=(this.children.get(i)||new e(null)).setTree(Qd(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(Hd(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Jd(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,Hd(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(ep(e))return null;var i=Kd(e),a=this.children.get(i);return a?a.findOnPath_(Qd(e),Jd(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,Hd(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(ep(t))return this;this.value&&r(n,this.value);var i=Kd(t),a=this.children.get(i);return a?a.foreachOnPath_(Qd(t),Jd(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(Hd(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Jd(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return fd(t,(function(e,t){n=n.set(new Wd(e),t)})),n}}]),e}(),Av=function(){function e(t){et(this,e),this.writeTree_=t}return nt(e,null,[{key:"empty",value:function(){return new e(new Pv(null))}}]),e}();function Ov(e,t,n){if(ep(t))return new Av(new Pv(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=tp(i,t);return a=a.updateChild(o,n),new Av(e.writeTree_.set(i,a))}var s=new Pv(n),u=e.writeTree_.setTree(t,s);return new Av(u)}function Dv(e,t,n){var r=e;return fd(n,(function(e,n){r=Ov(r,Jd(t,e),n)})),r}function Lv(e,t){if(ep(t))return Av.empty();var n=e.writeTree_.setTree(t,new Pv(null));return new Av(n)}function Mv(e,t){return null!=Fv(e,t)}function Fv(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(tp(n.path,t)):null}function Uv(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ap,(function(e,n){t.push(new fp(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new fp(e,n.value))})),t}function jv(e,t){if(ep(t))return e;var n=Fv(e,t);return new Av(null!=n?new Pv(n):e.writeTree_.subtree(t))}function Vv(e){return e.writeTree_.isEmpty()}function zv(e,t){return qv(Hd(),e.writeTree_,t)}function qv(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(vt(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=qv(Jd(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Jd(e,".priority"),r)),n}function Bv(e,t){return ry(t,e)}function Zv(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Wv(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));vt(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var s=e.allWrites[o];s.visible&&(o>=n&&Hv(s,r.path)?i=!1:ip(r.path,s.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=Gv(e.allWrites,Kv,Hd()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Lv(e.visibleWrites,r.path):fd(r.children,(function(t){e.visibleWrites=Lv(e.visibleWrites,Jd(r.path,t))}));return!0}return!1}function Hv(e,t){if(e.snap)return ip(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&ip(Jd(e.path,n),t))return!0;return!1}function Kv(e){return e.visible}function Gv(e,t,n){for(var r=Av.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,s=void 0;if(a.snap)ip(n,o)?r=Ov(r,s=tp(n,o),a.snap):ip(o,n)&&(s=tp(o,n),r=Ov(r,Hd(),a.snap.getChild(s)));else{if(!a.children)throw yt("WriteRecord should have .snap or .children");if(ip(n,o))r=Dv(r,s=tp(n,o),a.children);else if(ip(o,n))if(ep(s=tp(o,n)))r=Dv(r,Hd(),a.children);else{var u=zt(a.children,Kd(s));if(u){var c=u.getChild(Qd(s));r=Ov(r,Hd(),c)}}}}}return r}function Qv(e,t,n,r,i){if(r||i){var a=jv(e.visibleWrites,t);if(!i&&Vv(a))return n;if(i||null!=n||Mv(a,Hd())){return zv(Gv(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(ip(e.path,t)||ip(t,e.path))}),t),n||Up.EMPTY_NODE)}return null}var o=Fv(e.visibleWrites,t);if(null!=o)return o;var s=jv(e.visibleWrites,t);return Vv(s)?n:null!=n||Mv(s,Hd())?zv(s,n||Up.EMPTY_NODE):null}function $v(e,t,n,r){return Qv(e.writeTree,e.treePath,t,n,r)}function Yv(e,t){return function(e,t,n){var r=Up.EMPTY_NODE,i=Fv(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ap,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=jv(e.visibleWrites,t);return n.forEachChild(Ap,(function(e,t){var n=zv(jv(a,new Wd(e)),t);r=r.updateImmediateChild(e,n)})),Uv(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Uv(jv(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Xv(e,t,n,r){return function(e,t,n,r,i){vt(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Jd(t,n);if(Mv(e.visibleWrites,a))return null;var o=jv(e.visibleWrites,a);return Vv(o)?i.getChild(n):zv(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Jv(e,t){return function(e,t){return Fv(e.visibleWrites,t)}(e.writeTree,Jd(e.treePath,t))}function ey(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var s,u=jv(e.visibleWrites,t),c=Fv(u,Hd());if(null!=c)s=c;else{if(null==n)return[];s=zv(u,n)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?s.getReverseIteratorFrom(r,o):s.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function ty(e,t,n){return function(e,t,n,r){var i=Jd(t,n),a=Fv(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?zv(jv(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function ny(e,t){return ry(Jd(e.treePath,t),e.writeTree)}function ry(e,t){return{treePath:e,writeTree:t}}var iy=function(){function e(){et(this,e),this.changeMap=new Map}return nt(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;vt("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),vt(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Yp(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,$p(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Qp(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw yt("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Yp(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),ay=new(function(){function e(){et(this,e)}return nt(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),oy=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;et(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return nt(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new wv(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ty(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Rv(this.viewCache_),i=ey(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function sy(e,t,n,r,i){var a,o,s=new iy;if(n.type===dv.OVERWRITE){var u=n;u.source.fromUser?a=ly(e,t,u.path,u.snap,r,i,s):(vt(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.serverCache.isFiltered()&&!ep(u.path),a=cy(e,t,u.path,u.snap,r,i,o,s))}else if(n.type===dv.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var s=t;return r.foreach((function(r,u){var c=Jd(n,r);hy(t,Kd(c))&&(s=ly(e,s,c,u,i,a,o))})),r.foreach((function(r,u){var c=Jd(n,r);hy(t,Kd(c))||(s=ly(e,s,c,u,i,a,o))})),s}(e,t,c.path,c.children,r,i,s):(vt(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=dy(e,t,c.path,c.children,r,i,o,s))}else if(n.type===dv.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=Jv(r,n))return t;var s,u=new oy(r,t,i),c=t.eventCache.getNode();if(ep(n)||".priority"===Kd(n)){var l;if(t.serverCache.isFullyInitialized())l=$v(r,Rv(t));else{var h=t.serverCache.getNode();vt(h instanceof Up,"serverChildren would be complete if leaf node"),l=Yv(r,h)}s=e.filter.updateFullNode(c,l,a)}else{var f=Kd(n),d=ty(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(s=null!=d?e.filter.updateChild(c,f,d,Qd(n),u,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,Up.EMPTY_NODE,Qd(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=$v(r,Rv(t))).isLeafNode()&&(s=e.filter.updateFullNode(s,o,a))}return o=t.serverCache.isFullyInitialized()||null!=Jv(r,Hd()),Iv(t,s,o,e.filter.filtersNodes())}(e,t,l.path,r,i,s):function(e,t,n,r,i,a,o){if(null!=Jv(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(ep(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return cy(e,t,n,u.getNode().getChild(n),i,a,s,o);if(ep(n)){var c=new Pv(null);return u.getNode().forEachChild(vp,(function(e,t){c=c.set(new Wd(e),t)})),dy(e,t,n,c,i,a,s,o)}return t}var l=new Pv(null);return r.foreach((function(e,t){var r=Jd(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),dy(e,t,n,l,i,a,s,o)}(e,t,l.path,l.affectedTree,r,i,s)}else{if(n.type!==dv.LISTEN_COMPLETE)throw yt("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Ev(t,a.getNode(),a.isFullyInitialized()||ep(n),a.isFiltered());return uy(e,o,n,r,ay,i)}(e,t,n.path,r,s)}var h=s.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Cv(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(Gp(Cv(t)))}}(t,a,h),{viewCache:a,changes:h}}function uy(e,t,n,r,i,a){var o,s,u=t.eventCache;if(null!=Jv(r,n))return t;if(ep(n))if(vt(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Rv(t),l=Yv(r,c instanceof Up?c:Up.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=$v(r,Rv(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Kd(n);if(".priority"===f){vt(1===Gd(n),"Can't have a priority with additional path components");var d=u.getNode(),p=Xv(r,n,d,s=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):u.getNode()}else{var v,y=Qd(n);if(u.isCompleteForChild(f)){s=t.serverCache.getNode();var m=Xv(r,n,u.getNode(),s);v=null!=m?u.getNode().getImmediateChild(f).updateChild(y,m):u.getNode().getImmediateChild(f)}else v=ty(r,f,t.serverCache);o=null!=v?e.filter.updateChild(u.getNode(),f,v,y,i,a):u.getNode()}}return Iv(t,o,u.isFullyInitialized()||ep(n),e.filter.filtersNodes())}function cy(e,t,n,r,i,a,o,s){var u,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(ep(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Kd(n);if(!c.isCompleteForPath(n)&&Gd(n)>1)return t;var d=Qd(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,ay,null)}var v=Ev(t,u,c.isFullyInitialized()||ep(n),l.filtersNodes());return uy(e,v,n,i,new oy(i,v,a),s)}function ly(e,t,n,r,i,a,o){var s,u,c=t.eventCache,l=new oy(i,t,a);if(ep(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),s=Iv(t,u,!0,e.filter.filtersNodes());else{var h=Kd(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Iv(t,u,c.isFullyInitialized(),c.isFiltered());else{var f,d=Qd(n),p=c.getNode().getImmediateChild(h);if(ep(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===$d(d)&&v.getChild(Xd(d)).isEmpty()?v:v.updateChild(d,r):Up.EMPTY_NODE}if(p.equals(f))s=t;else s=Iv(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function hy(e,t){return e.eventCache.isCompleteForChild(t)}function fy(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function dy(e,t,n,r,i,a,o,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=ep(n)?r:new Pv(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=fy(0,t.serverCache.getNode().getImmediateChild(n),r);c=cy(e,c,new Wd(n),u,i,a,o,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=fy(0,t.serverCache.getNode().getImmediateChild(n),r);c=cy(e,c,new Wd(n),h,i,a,o,s)}})),c}var py,vy=function(){function e(t,n){et(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new Xp(i.getIndex()),o=(r=i).loadsAllData()?new Xp(r.getIndex()):r.hasLimit()?new ev(r):new Jp(r);this.processor_=function(e){return{filter:e}}(o);var s=n.serverCache,u=n.eventCache,c=a.updateFullNode(Up.EMPTY_NODE,s.getNode(),null),l=o.updateFullNode(Up.EMPTY_NODE,u.getNode(),null),h=new wv(c,s.isFullyInitialized(),a.filtersNodes()),f=new wv(l,u.isFullyInitialized(),o.filtersNodes());this.viewCache_=Tv(f,h),this.eventGenerator_=new xv(this.query_)}return nt(e,[{key:"query",get:function(){return this.query_}}]),e}();function yy(e,t){var n=Rv(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!ep(t)&&!n.getImmediateChild(Kd(t)).isEmpty())?n.getChild(t):null}function my(e){return 0===e.eventRegistrations_.length}function gy(e,t,n){var r=[];if(n){vt(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var s=e.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(s)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function ky(e,t,n,r){t.type===dv.MERGE&&null!==t.source.queryId&&(vt(Rv(e.viewCache_),"We should always have a full cache before handling merges"),vt(Cv(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,s=sy(e.processor_,o,t,n,r);return i=e.processor_,a=s.viewCache,vt(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),vt(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),vt(s.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,by(e,s.changes,s.viewCache.eventCache.getNode(),null)}function by(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),Sv(e,i,"child_removed",t,r,n),Sv(e,i,"child_added",t,r,n),Sv(e,i,"child_moved",a,r,n),Sv(e,i,"child_changed",t,r,n),Sv(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var _y,wy=nt((function e(){et(this,e),this.views=new Map}));function xy(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return vt(null!=a,"SyncTree gave us an op for an invalid query."),ky(a,t,n,r)}var o,s=[],u=it(e.views.values());try{for(u.s();!(o=u.n()).done;){var c=o.value;s=s.concat(ky(c,t,n,r))}}catch(l){u.e(l)}finally{u.f()}return s}function Sy(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var s=$v(n,i?r:null),u=!1;s?u=!0:r instanceof Up?(s=Yv(n,r),u=!1):(s=Up.EMPTY_NODE,u=!1);var c=Tv(new wv(s,u,!1),new wv(r,i,!1));return new vy(t,c)}return o}function Ty(e,t,n,r,i,a){var o=Sy(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ap,(function(e,t){r.push(Qp(e,t))})),n.isFullyInitialized()&&r.push(Gp(n.getNode())),by(e,r,n.getNode(),t)}(o,n)}function Iy(e,t,n,r){var i=t._queryIdentifier,a=[],s=[],u=Py(e);if("default"===i){var c,l=it(e.views.entries());try{for(l.s();!(c=l.n()).done;){var h=(0,o.Z)(c.value,2),f=h[0],d=h[1];s=s.concat(gy(d,n,r)),my(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){l.e(v)}finally{l.f()}}else{var p=e.views.get(i);p&&(s=s.concat(gy(p,n,r)),my(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!Py(e)&&a.push(new(vt(py,"Reference.ts has not been loaded"),py)(t._repo,t._path)),{removed:a,events:s}}function Ey(e){var t,n=[],r=it(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function Cy(e,t){var n,r=null,i=it(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||yy(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function Ry(e,t){if(t._queryParams.loadsAllData())return Ay(e);var n=t._queryIdentifier;return e.views.get(n)}function Ny(e,t){return null!=Ry(e,t)}function Py(e){return null!=Ay(e)}function Ay(e){var t,n=it(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var Oy=1,Dy=nt((function e(t){et(this,e),this.listenProvider_=t,this.syncPointTree_=new Pv(null),this.pendingWriteTree_={visibleWrites:Av.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Ly(e,t,n,r,i){return function(e,t,n,r,i){vt(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Ov(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Wy(e,new bv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function My(e,t,n,r){!function(e,t,n,r){vt(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Dv(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=Pv.fromObject(n);return Wy(e,new _v({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Fy(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Zv(e.pendingWriteTree_,t),i=Wv(e.pendingWriteTree_,t);if(i){var a=new Pv(null);return null!=r.snap?a=a.set(Hd(),!0):fd(r.children,(function(e){a=a.set(new Wd(e),!0)})),Wy(e,new gv(r.path,a,n))}return[]}function Uy(e,t,n){return Wy(e,new bv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function jy(e,t,n,r){var i=t._path,a=e.syncPointTree_.get(i),o=[];if(a&&("default"===t._queryIdentifier||Ny(a,t))){var s=Iy(a,t,n,r);0===a.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;o=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return Py(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&Py(t))return[Ay(t)];var r=[];return t&&(r=Ey(t)),fd(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,y=Gy(e,p);e.listenProvider_.startListening(em(v),Qy(e,v),y.hashFn,y.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(em(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get($y(t));e.listenProvider_.stopListening(em(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=$y(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}(e,u)}return o}function Vy(e,t,n,r){var i=Yy(e,r);if(null!=i){var a=Xy(i),o=a.path,s=a.queryId,u=tp(o,t);return Jy(e,o,new bv(yv(s),u,n))}return[]}function zy(e,t){var n=e._path,r=null,i=!1;t.syncPointTree_.foreachOnPath(n,(function(e,t){var a=tp(e,n);r=r||Cy(t,a),i=i||Py(t)}));var a,o=t.syncPointTree_.get(n);(o?(i=i||Py(o),r=r||Cy(o,Hd())):(o=new wy,t.syncPointTree_=t.syncPointTree_.set(n,o)),null!=r)?a=!0:(a=!1,r=Up.EMPTY_NODE,t.syncPointTree_.subtree(n).foreachChild((function(e,t){var n=Cy(t,Hd());n&&(r=r.updateImmediateChild(e,n))})));var s=Ny(o,e);if(!s&&!e._queryParams.loadsAllData()){var u=$y(e);vt(!t.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=Oy++;t.queryToTagMap.set(u,c),t.tagToQueryMap.set(c,u)}return{syncPoint:o,writesCache:Bv(t.pendingWriteTree_,n),serverCache:r,serverCacheComplete:a,foundAncestorDefaultView:i,viewAlreadyExists:s}}function qy(e,t,n){var r=zy(t,e),i=r.syncPoint,a=r.serverCache,o=r.writesCache,s=r.serverCacheComplete,u=r.viewAlreadyExists,c=r.foundAncestorDefaultView,l=Ty(i,t,n,o,a,s);if(!u&&!c){var h=Ry(i,t);l=l.concat(function(e,t,n){var r=t._path,i=Qy(e,t),a=Gy(e,n),o=e.listenProvider_.startListening(em(t),i,a.hashFn,a.onComplete),s=e.syncPointTree_.subtree(r);if(i)vt(!Py(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(e,t,n){if(!ep(e)&&t&&Py(t))return[Ay(t).query];var r=[];return t&&(r=r.concat(Ey(t).map((function(e){return e.query})))),fd(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<u.length;++c){var l=u[c];e.listenProvider_.stopListening(em(l),Qy(e,l))}return o}(e,t,h))}return l}function By(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Cy(n,tp(e,t));if(r)return r}));return Qv(r,t,i,n,!0)}function Zy(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=tp(e,n);r=r||Cy(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Cy(i,Hd()):(i=new wy,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new wv(r,!0,!1):null;return function(e){return Cv(e.viewCache_)}(Sy(i,t,Bv(e.pendingWriteTree_,t._path),a?o.getNode():Up.EMPTY_NODE,a))}function Wy(e,t){return Hy(t,e.syncPointTree_,null,Bv(e.pendingWriteTree_,Hd()))}function Hy(e,t,n,r){if(ep(e.path))return Ky(e,t,n,r);var i=t.get(Hd());null==n&&null!=i&&(n=Cy(i,Hd()));var a=[],o=Kd(e.path),s=e.operationForChild(o),u=t.children.get(o);if(u&&s){var c=n?n.getImmediateChild(o):null,l=ny(r,o);a=a.concat(Hy(s,u,c,l))}return i&&(a=a.concat(xy(i,e,r,n))),a}function Ky(e,t,n,r){var i=t.get(Hd());null==n&&null!=i&&(n=Cy(i,Hd()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,s=ny(r,t),u=e.operationForChild(t);u&&(a=a.concat(Ky(u,i,o,s)))})),i&&(a=a.concat(xy(i,e,r,n))),a}function Gy(e,t){var n=t.query,r=Qy(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||Up.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=Yy(e,n);if(r){var i=Xy(r),a=i.path,o=i.queryId,s=tp(a,t);return Jy(e,a,new kv(yv(o),s))}return[]}(e,n._path,r):function(e,t){return Wy(e,new kv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return jy(e,n,null,i)}}}function Qy(e,t){var n=$y(t);return e.queryToTagMap.get(n)}function $y(e){return e._path.toString()+"$"+e._queryIdentifier}function Yy(e,t){return e.tagToQueryMap.get(t)}function Xy(e){var t=e.indexOf("$");return vt(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Wd(e.substr(0,t))}}function Jy(e,t,n){var r=e.syncPointTree_.get(t);return vt(r,"Missing sync point for query tag that we're tracking"),xy(r,n,Bv(e.pendingWriteTree_,t),null)}function em(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(vt(_y,"Reference.ts has not been loaded"),_y)(e._repo,e._path):e}var tm=function(){function e(t){et(this,e),this.node_=t}return nt(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),nm=function(){function e(t,n){et(this,e),this.syncTree_=t,this.path_=n}return nt(e,[{key:"getImmediateChild",value:function(t){var n=Jd(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return By(this.syncTree_,this.path_)}}]),e}(),rm=function(e,t,n){return e&&"object"===typeof e?(vt(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?im(e[".sv"],t,n):"object"===typeof e[".sv"]?am(e[".sv"],t):void vt(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},im=function(e,t,n){if("timestamp"===e)return n.timestamp;vt(!1,"Unexpected server value: "+e)},am=function(e,t,n){e.hasOwnProperty("increment")||vt(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&vt(!1,"Unexpected increment value: "+r);var i=t.node();if(vt(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},om=function(e,t,n,r){return um(t,new nm(n,e),r)},sm=function(e,t,n){return um(e,new tm(t),n)};function um(e,t,n){var r,i=e.getPriority().val(),a=rm(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,s=rm(o.getValue(),t,n);return s!==o.getValue()||a!==o.getPriority().val()?new Cp(s,Vp(a)):e}var u=e;return r=u,a!==u.getPriority().val()&&(r=r.updatePriority(new Cp(a))),u.forEachChild(Ap,(function(e,i){var a=um(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var cm=nt((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};et(this,e),this.name=t,this.parent=n,this.node=r}));function lm(e,t){for(var n=t instanceof Wd?t:new Wd(t),r=e,i=Kd(n);null!==i;){var a=zt(r.node.children,i)||{children:{},childCount:0};r=new cm(i,r,a),i=Kd(n=Qd(n))}return r}function hm(e){return e.node.value}function fm(e,t){e.node.value=t,mm(e)}function dm(e){return e.node.childCount>0}function pm(e,t){fd(e.node.children,(function(n,r){t(new cm(n,e,r))}))}function vm(e,t,n,r){n&&!r&&t(e),pm(e,(function(e){vm(e,t,!0,r)})),n&&r&&t(e)}function ym(e){return new Wd(null===e.parent?e.name:ym(e.parent)+"/"+e.name)}function mm(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===hm(e)&&!dm(e)}(n),i=Vt(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,mm(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,mm(e))}(e.parent,e.name,e)}var gm=/[\[\].#$\/\u0000-\u001F\u007F]/,km=/[\[\].#$\u0000-\u001F\u007F]/,bm=10485760,_m=function(e){return"string"===typeof e&&0!==e.length&&!gm.test(e)},wm=function(e){return"string"===typeof e&&0!==e.length&&!km.test(e)},xm=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!id(e)||e&&"object"===typeof e&&Vt(e,".sv")},Sm=function(e,t,n,r){r&&void 0===t||Tm(en(e,"value"),t,n)},Tm=function e(t,n,r){var i=r instanceof Wd?new ap(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+sp(i));if("function"===typeof n)throw new Error(t+"contains a function "+sp(i)+" with contents = "+n.toString());if(id(n))throw new Error(t+"contains "+n.toString()+" "+sp(i));if("string"===typeof n&&n.length>bm/3&&rn(n)>bm)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+sp(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(fd(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!_m(n)))throw new Error(t+" contains an invalid key ("+n+") "+sp(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=rn(t),op(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=rn(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+sp(i)+" in addition to actual children.")}},Im=function(e,t,n,r){if(!r||void 0!==t){var i=en(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];fd(t,(function(e,t){var r=new Wd(e);if(Tm(i,t,Jd(n,r)),".priority"===$d(r)&&!xm(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=Yd(r=t[n]),a=0;a<i.length;a++)if(".priority"===i[a]&&a===i.length-1);else if(!_m(i[a]))throw new Error(e+"contains an invalid key ("+i[a]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(np);var o=null;for(n=0;n<t.length;n++){if(r=t[n],null!==o&&ip(o,r))throw new Error(e+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(i,a)}},Em=function(e,t,n){if(!n||void 0!==t){if(id(t))throw new Error(en(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xm(t))throw new Error(en(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Cm=function(e,t,n,r){if((!r||void 0!==n)&&!_m(n))throw new Error(en(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Rm=function(e,t,n,r){if((!r||void 0!==n)&&!wm(n))throw new Error(en(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Nm=function(e,t){if(".info"===Kd(t))throw new Error(e+" failed = Can't modify data under /.info/")},Pm=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!_m(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),wm(e)}(n))throw new Error(en(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Am=nt((function e(){et(this,e),this.eventLists_=[],this.recursionDepth_=0}));function Om(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||rp(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function Dm(e,t,n){Om(e,n),Mm(e,(function(e){return rp(e,t)}))}function Lm(e,t,n){Om(e,n),Mm(e,(function(e){return ip(e,t)||ip(t,e)}))}function Mm(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Fm(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Fm(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();$f&&Jf("event: "+n.toString()),gd(r)}}}var Um="repo_interrupt",jm=function(){function e(t,n,r,i){et(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Am,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cv(),this.transactionQueueTree_=new cm,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return nt(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function Vm(e,t,n){if(e.stats_=Ad(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new sv(e.repoInfo_,(function(t,n,r,i){Bm(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Zm(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ut(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new lp(e.repoInfo_,t,(function(t,n,r,i){Bm(e,t,n,r,i)}),(function(t){Zm(e,t)}),(function(t){!function(e,t){fd(t,(function(t,n){Wm(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return Pd[n]||(Pd[n]=t()),Pd[n]}(e.repoInfo_,(function(){return new vv(e.stats_,e.server_)})),e.infoData_=new uv,e.infoSyncTree_=new Dy({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=Uy(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),Wm(e,"connected",!1),e.serverSyncTree_=new Dy({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);Lm(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function zm(e){var t=e.infoData_.getNode(new Wd(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function qm(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:zm(e)})}function Bm(e,t,n,r,i){e.dataUpdateCount++;var a=new Wd(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var s=Bt(n,(function(e){return Vp(e)}));o=function(e,t,n,r){var i=Yy(e,r);if(i){var a=Xy(i),o=a.path,s=a.queryId,u=tp(o,t),c=Pv.fromObject(n);return Jy(e,o,new _v(yv(s),u,c))}return[]}(e.serverSyncTree_,a,s,i)}else{var u=Vp(n);o=Vy(e.serverSyncTree_,a,u,i)}else if(r){var c=Bt(n,(function(e){return Vp(e)}));o=function(e,t,n){var r=Pv.fromObject(n);return Wy(e,new _v({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=Vp(n);o=Uy(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=ig(e,a)),Lm(e.eventQueue_,h,o)}function Zm(e,t){Wm(e,"connected",t),!1===t&&function(e){Jm(e,"onDisconnectEvents");var t=qm(e),n=cv();fv(e.onDisconnect_,Hd(),(function(r,i){var a=om(r,i,e.serverSyncTree_,t);lv(n,r,a)}));var r=[];fv(n,Hd(),(function(t,n){r=r.concat(Uy(e.serverSyncTree_,t,n));var i=cg(e,t);ig(e,i)})),e.onDisconnect_=cv(),Lm(e.eventQueue_,Hd(),r)}(e)}function Wm(e,t,n){var r=new Wd("/.info/"+t),i=Vp(n);e.infoData_.updateSnapshot(r,i);var a=Uy(e.infoSyncTree_,r,i);Lm(e.eventQueue_,r,a)}function Hm(e){return e.nextWriteId_++}function Km(e,t){var n=Zy(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=Vp(n).withIndex(t._queryParams.getIndex());if(t._queryParams.loadsAllData())Uy(e.serverSyncTree_,t._path,r);else{var i=function(e,t){var n=zy(t,e),r=n.syncPoint,i=n.serverCache,a=Sy(r,t,n.writesCache,i,n.serverCacheComplete);return r.views.has(t._queryIdentifier)||r.views.set(t._queryIdentifier,a),t._queryParams.loadsAllData()?null:Qy(e,t)}(e.serverSyncTree_,t);Vy(e.serverSyncTree_,t._path,r,i)}return jy(e.serverSyncTree_,t,null).length>0&&Jm(e,"unexpected cancel events in repoGetValue"),r}),(function(n){return Jm(e,"get for query "+Ut(t)+" failed: "+n),Promise.reject(new Error(n))}))}function Gm(e,t,n,r,i){Jm(e,"set",{path:t.toString(),value:n,priority:r});var a=qm(e),o=Vp(n,r),s=By(e.serverSyncTree_,t),u=sm(o,s,a),c=Hm(e),l=Ly(e.serverSyncTree_,t,u,c,!0);Om(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||rd("set at "+t+" failed: "+n);var o=Fy(e.serverSyncTree_,c,!a);Lm(e.eventQueue_,t,o),eg(e,i,n,r)}));var h=cg(e,t);ig(e,h),Lm(e.eventQueue_,h,[])}function Qm(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&hv(e.onDisconnect_,t),eg(e,n,r,i)}))}function $m(e,t,n,r){var i=Vp(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,a){"ok"===n&&lv(e.onDisconnect_,t,i),eg(e,r,n,a)}))}function Ym(e,t,n){var r;r=".info"===Kd(t._path)?jy(e.infoSyncTree_,t,n):jy(e.serverSyncTree_,t,n),Dm(e.eventQueue_,t._path,r)}function Xm(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Um)}function Jm(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Jf.apply(void 0,[t].concat(r))}function eg(e,t,n,r){t&&gd((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function tg(e,t,n){return By(e.serverSyncTree_,t,n)||Up.EMPTY_NODE}function ng(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||ug(e,t),hm(t)){var n=og(e,t);vt(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&rg(e,ym(t),n)}else dm(t)&&pm(t,(function(t){ng(e,t)}))}function rg(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=tg(e,t,r),a=i,o=i.hash(),s=0;s<n.length;s++){var u=n[s];vt(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=tp(t,u.path);a=a.updateChild(c,u.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){Jm(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Fy(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)o(s);ug(e,lm(e.transactionQueueTree_,t)),ng(e,e.transactionQueueTree_),Lm(e.eventQueue_,t,i);for(var u=0;u<a.length;u++)gd(a[u])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{rd("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}ig(e,t)}}),o)}function ig(e,t){var n=ag(e,t),r=ym(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),s=function(a){var s,u=t[a],c=tp(n,u.path),l=!1,h=void 0;if(vt(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Fy(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Fy(e.serverSyncTree_,u.currentWriteId,!0));else{var f=tg(e,u.path,o);u.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){Tm("transaction failed: Data returned ",d,u.path);var p=Vp(d);"object"===typeof d&&null!=d&&Vt(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,y=qm(e),m=sm(p,f,y);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=m,u.currentWriteId=Hm(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Ly(e.serverSyncTree_,u.path,m,u.currentWriteId,u.applyLocally))).concat(Fy(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Fy(e.serverSyncTree_,u.currentWriteId,!0))}Lm(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},u=0;u<t.length;u++)s(u);ug(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)gd(r[c]);ng(e,e.transactionQueueTree_)}(e,og(e,n),r),r}function ag(e,t){var n,r=e.transactionQueueTree_;for(n=Kd(t);null!==n&&void 0===hm(r);)r=lm(r,n),n=Kd(t=Qd(t));return r}function og(e,t){var n=[];return sg(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function sg(e,t,n){var r=hm(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);pm(t,(function(t){sg(e,t,n)}))}function ug(e,t){var n=hm(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,fm(t,n.length>0?n:void 0)}pm(t,(function(t){ug(e,t)}))}function cg(e,t){var n=ym(ag(e,t)),r=lm(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){lg(e,t)})),lg(e,r),vm(r,(function(t){lg(e,t)})),n}function lg(e,t){var n=hm(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(vt(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(vt(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Fy(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?fm(t,void 0):n.length=a+1,Lm(e.eventQueue_,ym(t),i);for(var s=0;s<r.length;s++)gd(r[s])}}var hg=function(e,t){var n=fg(e),r=n.namespace;"firebase.com"===n.domain&&nd(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||nd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rd("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ed(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new Wd(n.pathString)}},fg=function(e){var t="",n="",r="",i="",a="",o=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=it(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):rd("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:o,scheme:s,pathString:i,namespace:a}},dg=function(){function e(t,n,r,i){et(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return nt(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+Ut(this.snapshot.exportVal())}}]),e}(),pg=function(){function e(t,n,r){et(this,e),this.eventRegistration=t,this.error=n,this.path=r}return nt(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),vg=function(){function e(t,n){et(this,e),this.snapshotCallback=t,this.cancelCallback=n}return nt(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return vt(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),yg=function(){function e(t,n){et(this,e),this._repo=t,this._path=n}return nt(e,[{key:"cancel",value:function(){var e=new xt;return Qm(this._repo,this._path,e.wrapCallback((function(){}))),e.promise}},{key:"remove",value:function(){Nm("OnDisconnect.remove",this._path);var e=new xt;return $m(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise}},{key:"set",value:function(e){Nm("OnDisconnect.set",this._path),Sm("OnDisconnect.set",e,this._path,!1);var t=new xt;return $m(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}},{key:"setWithPriority",value:function(e,t){Nm("OnDisconnect.setWithPriority",this._path),Sm("OnDisconnect.setWithPriority",e,this._path,!1),Em("OnDisconnect.setWithPriority",t,!1);var n=new xt;return function(e,t,n,r,i){var a=Vp(n,r);e.server_.onDisconnectPut(t.toString(),a.val(!0),(function(n,r){"ok"===n&&lv(e.onDisconnect_,t,a),eg(0,i,n,r)}))}(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise}},{key:"update",value:function(e){Nm("OnDisconnect.update",this._path),Im("OnDisconnect.update",e,this._path,!1);var t=new xt;return function(e,t,n,r){if(qt(n))return Jf("onDisconnect().update() called with empty data.  Don't do anything."),void eg(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,a){"ok"===i&&fd(n,(function(n,r){var i=Vp(r);lv(e.onDisconnect_,Jd(t,n),i)})),eg(0,r,i,a)}))}(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise}}]),e}(),mg=function(){function e(t,n,r,i){et(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return nt(e,[{key:"key",get:function(){return ep(this._path)?null:$d(this._path)}},{key:"ref",get:function(){return new _g(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=ov(this._queryParams),t=ld(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return ov(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=an(t))instanceof e))return!1;var n=this._repo===t._repo,r=rp(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();function gg(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function kg(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===vp){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==ad)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==od)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Ap){if(null!=t&&!xm(t)||null!=n&&!xm(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(vt(e.getIndex()instanceof zp||e.getIndex()===Bp,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function bg(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var _g=function(e){at(n,e);var t=ct(n);function n(e,r){return et(this,n),t.call(this,e,r,new tv,!1)}return nt(n,[{key:"parent",get:function(){var e=Xd(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(mg),wg=function(){function e(t,n,r){et(this,e),this._node=t,this.ref=n,this._index=r}return nt(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new Wd(t),r=Tg(this.ref,t);return new e(this._node.getChild(n),r,Ap)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,Tg(n.ref,r),Ap))}))}},{key:"hasChild",value:function(e){var t=new Wd(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function xg(e,t){return(e=an(e))._checkNotDeleted("ref"),void 0!==t?Tg(e._root,t):e._root}function Sg(e,t){(e=an(e))._checkNotDeleted("refFromURL");var n=hg(t,e._repo.repoInfo_.nodeAdmin);Pm("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||nd("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),xg(e,n.path.toString())}function Tg(e,t){var n,r,i,a;return null===Kd((e=an(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Rm(n,r,i,a)):Rm("child","path",t,!1),new _g(e._repo,Jd(e._path,t))}function Ig(e,t){e=an(e),Nm("push",e._path),Sm("push",t,e._path,!0);var n,r=zm(e._repo),i=Wp(r),a=Tg(e,i),o=Tg(e,i);return n=null!=t?Cg(o,t).then((function(){return o})):Promise.resolve(o),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function Eg(e){return Nm("remove",e._path),Cg(e,null)}function Cg(e,t){e=an(e),Nm("set",e._path),Sm("set",t,e._path,!1);var n=new xt;return Gm(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Rg(e,t){e=an(e),Nm("setPriority",e._path),Em("setPriority",t,!1);var n=new xt;return Gm(e._repo,Jd(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Ng(e,t,n){if(Nm("setWithPriority",e._path),Sm("setWithPriority",t,e._path,!1),Em("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new xt;return Gm(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Pg(e,t){Im("update",t,e._path,!1);var n=new xt;return function(e,t,n,r){Jm(e,"update",{path:t.toString(),value:n});var i=!0,a=qm(e),o={};if(fd(n,(function(n,r){i=!1,o[n]=om(Jd(t,n),Vp(r),e.serverSyncTree_,a)})),i)Jf("update() called with empty data.  Don't do anything."),eg(0,r,"ok",void 0);else{var s=Hm(e),u=My(e.serverSyncTree_,t,o,s);Om(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var a="ok"===n;a||rd("update at "+t+" failed: "+n);var o=Fy(e.serverSyncTree_,s,!a),u=o.length>0?ig(e,t):t;Lm(e.eventQueue_,u,o),eg(0,r,n,i)})),fd(n,(function(n){var r=cg(e,Jd(t,n));ig(e,r)})),Lm(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}var Ag=function(){function e(t){et(this,e),this.callbackContext=t}return nt(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new dg("value",this,new wg(e.snapshotNode,new _g(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new pg(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}(),Og=function(){function e(t,n){et(this,e),this.eventType=t,this.callbackContext=n}return nt(e,[{key:"respondsTo",value:function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new pg(this,e,t):null}},{key:"createEvent",value:function(e,t){vt(null!=e.childName,"Child events should have a childName.");var n=Tg(new _g(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new dg(e.type,this,new wg(e.snapshotNode,n,r),e.prevName)}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}}},{key:"matches",value:function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))}},{key:"hasAnyCallback",value:function(){return!!this.callbackContext}}]),e}();function Dg(e,t,n,r,i){var a;if("object"===typeof r&&(a=void 0,i=r),"function"===typeof r&&(a=r),i&&i.onlyOnce){var o=n,s=function(t,n){Ym(e._repo,e,c),o(t,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new vg(n,a||void 0),c="value"===t?new Ag(u):new Og(t,u);return function(e,t,n){var r;r=".info"===Kd(t._path)?qy(e.infoSyncTree_,t,n):qy(e.serverSyncTree_,t,n),Dm(e.eventQueue_,t._path,r)}(e._repo,e,c),function(){return Ym(e._repo,e,c)}}function Lg(e,t,n,r){return Dg(e,"value",t,n,r)}function Mg(e,t,n,r){return Dg(e,"child_added",t,n,r)}function Fg(e,t,n,r){return Dg(e,"child_changed",t,n,r)}function Ug(e,t,n,r){return Dg(e,"child_moved",t,n,r)}function jg(e,t,n,r){return Dg(e,"child_removed",t,n,r)}function Vg(e,t,n){var r=null,i=n?new vg(n):null;"value"===t?r=new Ag(i):t&&(r=new Og(t,i)),Ym(e._repo,e,r)}var zg=nt((function e(){et(this,e)})),qg=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this))._value=e,i._key=r,i}return nt(n,[{key:"_apply",value:function(e){Sm("endAt",this._value,e._path,!0);var t=rv(e._queryParams,this._value,this._key);if(bg(t),kg(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mg(e._repo,e._path,t,e._orderByCalled)}}]),n}(zg);function Bg(e,t){return Cm("endAt","key",t,!0),new qg(e,t)}var Zg=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this))._value=e,i._key=r,i}return nt(n,[{key:"_apply",value:function(e){Sm("endBefore",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===vp?("string"===typeof t&&(t=Kp(t)),r=rv(e,t,n)):r=rv(e,t,null==n?ad:Kp(n)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(bg(t),kg(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new mg(e._repo,e._path,t,e._orderByCalled)}}]),n}(zg);function Wg(e,t){return Cm("endBefore","key",t,!0),new Zg(e,t)}var Hg=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this))._value=e,i._key=r,i}return nt(n,[{key:"_apply",value:function(e){Sm("startAt",this._value,e._path,!0);var t=nv(e._queryParams,this._value,this._key);if(bg(t),kg(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new mg(e._repo,e._path,t,e._orderByCalled)}}]),n}(zg);function Kg(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return Cm("startAt","key",t,!0),new Hg(e,t)}var Gg=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this))._value=e,i._key=r,i}return nt(n,[{key:"_apply",value:function(e){Sm("startAfter",this._value,e._path,!1);var t=function(e,t,n){var r;return e.index_===vp?("string"===typeof t&&(t=Hp(t)),r=nv(e,t,n)):r=nv(e,t,null==n?od:Hp(n)),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(bg(t),kg(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new mg(e._repo,e._path,t,e._orderByCalled)}}]),n}(zg);function Qg(e,t){return Cm("startAfter","key",t,!0),new Gg(e,t)}var $g=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this))._limit=e,r}return nt(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new mg(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(zg);function Yg(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new $g(e)}var Xg=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this))._limit=e,r}return nt(n,[{key:"_apply",value:function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new mg(e._repo,e._path,function(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}]),n}(zg);function Jg(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Xg(e)}var ek=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this))._path=e,r}return nt(n,[{key:"_apply",value:function(e){gg(e,"orderByChild");var t=new Wd(this._path);if(ep(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new zp(t),r=iv(e._queryParams,n);return kg(r),new mg(e._repo,e._path,r,!0)}}]),n}(zg);function tk(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Rm("orderByChild","path",e,!1),new ek(e)}var nk=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"_apply",value:function(e){gg(e,"orderByKey");var t=iv(e._queryParams,vp);return kg(t),new mg(e._repo,e._path,t,!0)}}]),n}(zg);function rk(){return new nk}var ik=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"_apply",value:function(e){gg(e,"orderByPriority");var t=iv(e._queryParams,Ap);return kg(t),new mg(e._repo,e._path,t,!0)}}]),n}(zg);function ak(){return new ik}var ok=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"_apply",value:function(e){gg(e,"orderByValue");var t=iv(e._queryParams,Bp);return kg(t),new mg(e._repo,e._path,t,!0)}}]),n}(zg);function sk(){return new ok}var uk=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this))._value=e,i._key=r,i}return nt(n,[{key:"_apply",value:function(e){if(Sm("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qg(this._value,this._key)._apply(new Hg(this._value,this._key)._apply(e))}}]),n}(zg);function ck(e,t){return Cm("equalTo","key",t,!0),new uk(e,t)}function lk(e){for(var t=an(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];t=s._apply(t)}return t}!function(e){vt(!py,"__referenceConstructor has already been defined"),py=e}(_g),function(e){vt(!_y,"__referenceConstructor has already been defined"),_y=e}(_g);var hk={},fk=!1;function dk(e,t,n,r){e.repoInfo_=new Ed("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function pk(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||nd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jf("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,s=hg(a,i),u=s.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(u.namespace),u=(s=hg(a,i)).repoInfo):o=!s.repoInfo.secure;var l=i&&o?new wd(wd.OWNER):new _d(e.name,e.options,t);Pm("Invalid Firebase Database URL",s),ep(s.path)||nd("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=hk[t.name];i||(i={},hk[t.name]=i);var a=i[e.toURLString()];a&&nd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new jm(e,fk,n,r),i[e.toURLString()]=a,a}(u,e,l,new bd(e.name,n));return new vk(h,e)}var vk=function(){function e(t,n){et(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return nt(e,[{key:"_repo",get:function(){return this._instanceStarted||(Vm(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new _g(this._repo,Hd())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=hk[t];n&&n[e.key]===e||nd("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),Xm(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&nd("Cannot call "+e+" on a deleted database.")}}]),e}();function yk(){Vd.IS_TRANSPORT_INITIALIZED&&rd("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function mk(){yk(),Md.forceDisallow()}function gk(){yk(),jd.forceDisallow(),Md.forceAllow()}function kk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=an(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&nd("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&nd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new wd(wd.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:St(r.mockUserToken,e.app.options.projectId);a=new wd(o)}dk(i,t,n,a)}function bk(e){(e=an(e))._checkNotDeleted("goOffline"),Xm(e._repo)}function _k(e){var t;(e=an(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(Um)}function wk(e,t){Xf(e,t)}var xk={".sv":"timestamp"};var Sk=function(){function e(t,n){et(this,e),this.committed=t,this.snapshot=n}return nt(e,[{key:"toJSON",value:function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}();function Tk(e,t,n){var r;if(e=an(e),Nm("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new xt,o=Lg(e,(function(){}));return function(e,t,n,r,i,a){Jm(e,"transaction on "+t);var o={path:t,update:n,onComplete:r,status:null,order:Kf(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=tg(e,t,void 0);o.currentInputSnapshot=s;var u=o.update(s.val());if(void 0===u)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Tm("transaction failed: Data returned ",u,o.path),o.status=0;var c,l=lm(e.transactionQueueTree_,t),h=hm(l)||[];h.push(o),fm(l,h),"object"===typeof u&&null!==u&&Vt(u,".priority")?(c=zt(u,".priority"),vt(xm(c),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):c=(By(e.serverSyncTree_,t)||Up.EMPTY_NODE).getPriority().val();var f=qm(e),d=Vp(u,c),p=sm(d,s,f);o.currentOutputSnapshotRaw=d,o.currentOutputSnapshotResolved=p,o.currentWriteId=Hm(e);var v=Ly(e.serverSyncTree_,t,p,o.currentWriteId,o.applyLocally);Lm(e.eventQueue_,t,v),ng(e,e.transactionQueueTree_)}}(e._repo,e._path,t,(function(t,n,r){var i=null;t?a.reject(t):(i=new wg(r,new _g(e._repo,e._path),Ap),a.resolve(new Sk(n,i)))}),o,i),a.promise}lp.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},lp.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Vf(tr),Gn(new on("database",(function(e,t){var n=t.instanceIdentifier;return pk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),sr(Ff,Uf,e),sr(Ff,Uf,"esm2017")}();var Ik=new mn("@firebase/database-compat"),Ek=function(e){var t="FIREBASE WARNING: "+e;Ik.warn(t)},Ck=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(en(e,t)+"must be a boolean.")},Rk=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(en(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Nk=function(){function e(t){et(this,e),this._delegate=t}return nt(e,[{key:"cancel",value:function(e){Jt("OnDisconnect.cancel",0,1,arguments.length),tn("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"remove",value:function(e){Jt("OnDisconnect.remove",0,1,arguments.length),tn("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"set",value:function(e,t){Jt("OnDisconnect.set",1,2,arguments.length),tn("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"setWithPriority",value:function(e,t,n){Jt("OnDisconnect.setWithPriority",2,3,arguments.length),tn("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"update",value:function(e,t){if(Jt("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Ek("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tn("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}}]),e}(),Pk=function(){function e(t,n){et(this,e),this.committed=t,this.snapshot=n}return nt(e,[{key:"toJSON",value:function(){return Jt("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}]),e}(),Ak=function(){function e(t,n){et(this,e),this._database=t,this._delegate=n}return nt(e,[{key:"val",value:function(){return Jt("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}},{key:"exportVal",value:function(){return Jt("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}},{key:"toJSON",value:function(){return Jt("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"exists",value:function(){return Jt("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}},{key:"child",value:function(t){return Jt("DataSnapshot.child",0,1,arguments.length),t=String(t),Rm("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))}},{key:"hasChild",value:function(e){return Jt("DataSnapshot.hasChild",1,1,arguments.length),Rm("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}},{key:"getPriority",value:function(){return Jt("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}},{key:"forEach",value:function(t){var n=this;return Jt("DataSnapshot.forEach",1,1,arguments.length),tn("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))}},{key:"hasChildren",value:function(){return Jt("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}},{key:"key",get:function(){return this._delegate.key}},{key:"numChildren",value:function(){return Jt("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}},{key:"getRef",value:function(){return Jt("DataSnapshot.ref",0,0,arguments.length),new Dk(this._database,this._delegate.ref)}},{key:"ref",get:function(){return this.getRef()}}]),e}(),Ok=function(){function e(t,n){et(this,e),this.database=t,this._delegate=n}return nt(e,[{key:"on",value:function(t,n,r,i){var a,o=this;Jt("Query.on",2,4,arguments.length),tn("Query.on","callback",n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=function(e,t){n.call(s.context,new Ak(o.database,e),t)};u.userCallback=n,u.context=s.context;var c=null===(a=s.cancel)||void 0===a?void 0:a.bind(s.context);switch(t){case"value":return Lg(this._delegate,u,c),n;case"child_added":return Mg(this._delegate,u,c),n;case"child_removed":return jg(this._delegate,u,c),n;case"child_changed":return Fg(this._delegate,u,c),n;case"child_moved":return Ug(this._delegate,u,c),n;default:throw new Error(en("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}},{key:"off",value:function(e,t,n){if(Jt("Query.off",0,3,arguments.length),Rk("Query.off",e,!0),tn("Query.off","callback",t,!0),nn("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Vg(this._delegate,e,r)}else Vg(this._delegate,e)}},{key:"get",value:function(){var e=this;return function(e){return Km((e=an(e))._repo,e).then((function(t){return new wg(t,new _g(e._repo,e._path),e._queryParams.getIndex())}))}(this._delegate).then((function(t){return new Ak(e.database,t)}))}},{key:"once",value:function(t,n,r,i){var a=this;Jt("Query.once",1,4,arguments.length),tn("Query.once","callback",n,!0);var o=e.getCancelAndContextArgs_("Query.once",r,i),s=new xt,u=function(e,t){var r=new Ak(a.database,e);n&&n.call(o.context,r,t),s.resolve(r)};u.userCallback=n,u.context=o.context;var c=function(e){o.cancel&&o.cancel.call(o.context,e),s.reject(e)};switch(t){case"value":Lg(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":Mg(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":jg(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":Fg(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":Ug(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(en("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}},{key:"limitToFirst",value:function(t){return Jt("Query.limitToFirst",1,1,arguments.length),new e(this.database,lk(this._delegate,Yg(t)))}},{key:"limitToLast",value:function(t){return Jt("Query.limitToLast",1,1,arguments.length),new e(this.database,lk(this._delegate,Jg(t)))}},{key:"orderByChild",value:function(t){return Jt("Query.orderByChild",1,1,arguments.length),new e(this.database,lk(this._delegate,tk(t)))}},{key:"orderByKey",value:function(){return Jt("Query.orderByKey",0,0,arguments.length),new e(this.database,lk(this._delegate,rk()))}},{key:"orderByPriority",value:function(){return Jt("Query.orderByPriority",0,0,arguments.length),new e(this.database,lk(this._delegate,ak()))}},{key:"orderByValue",value:function(){return Jt("Query.orderByValue",0,0,arguments.length),new e(this.database,lk(this._delegate,sk()))}},{key:"startAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Jt("Query.startAt",0,2,arguments.length),new e(this.database,lk(this._delegate,Kg(t,n)))}},{key:"startAfter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Jt("Query.startAfter",0,2,arguments.length),new e(this.database,lk(this._delegate,Qg(t,n)))}},{key:"endAt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Jt("Query.endAt",0,2,arguments.length),new e(this.database,lk(this._delegate,Bg(t,n)))}},{key:"endBefore",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;return Jt("Query.endBefore",0,2,arguments.length),new e(this.database,lk(this._delegate,Wg(t,n)))}},{key:"equalTo",value:function(t,n){return Jt("Query.equalTo",1,2,arguments.length),new e(this.database,lk(this._delegate,ck(t,n)))}},{key:"toString",value:function(){return Jt("Query.toString",0,0,arguments.length),this._delegate.toString()}},{key:"toJSON",value:function(){return Jt("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}},{key:"isEqual",value:function(t){if(Jt("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)}},{key:"ref",get:function(){return new Dk(this.database,new _g(this._delegate._repo,this._delegate._path))}}],[{key:"getCancelAndContextArgs_",value:function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,tn(e,"cancel",r.cancel,!0),r.context=n,nn(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(en(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}}]),e}(),Dk=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e,new mg(r._repo,r._path,new tv,!1))).database=e,i._delegate=r,i}return nt(n,[{key:"getKey",value:function(){return Jt("Reference.key",0,0,arguments.length),this._delegate.key}},{key:"child",value:function(e){return Jt("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new n(this.database,Tg(this._delegate,e))}},{key:"getParent",value:function(){Jt("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new n(this.database,e):null}},{key:"getRoot",value:function(){return Jt("Reference.root",0,0,arguments.length),new n(this.database,this._delegate.root)}},{key:"set",value:function(e,t){Jt("Reference.set",1,2,arguments.length),tn("Reference.set","onComplete",t,!0);var n=Cg(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"update",value:function(e,t){if(Jt("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,Ek("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Nm("Reference.update",this._delegate._path),tn("Reference.update","onComplete",t,!0);var i=Pg(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i}},{key:"setWithPriority",value:function(e,t,n){Jt("Reference.setWithPriority",2,3,arguments.length),tn("Reference.setWithPriority","onComplete",n,!0);var r=Ng(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r}},{key:"remove",value:function(e){Jt("Reference.remove",0,1,arguments.length),tn("Reference.remove","onComplete",e,!0);var t=Eg(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t}},{key:"transaction",value:function(e,t,n){var r=this;Jt("Reference.transaction",1,3,arguments.length),tn("Reference.transaction","transactionUpdate",e,!1),tn("Reference.transaction","onComplete",t,!0),Ck("Reference.transaction","applyLocally",n,!0);var i=Tk(this._delegate,e,{applyLocally:n}).then((function(e){return new Pk(e.committed,new Ak(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i}},{key:"setPriority",value:function(e,t){Jt("Reference.setPriority",1,2,arguments.length),tn("Reference.setPriority","onComplete",t,!0);var n=Rg(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n}},{key:"push",value:function(e,t){var r=this;Jt("Reference.push",0,2,arguments.length),tn("Reference.push","onComplete",t,!0);var i=Ig(this._delegate,e),a=i.then((function(e){return new n(r.database,e)}));t&&a.then((function(){return t(null)}),(function(e){return t(e)}));var o=new n(this.database,i);return o.then=a.then.bind(a),o.catch=a.catch.bind(a,void 0),o}},{key:"onDisconnect",value:function(){return Nm("Reference.onDisconnect",this._delegate._path),new Nk(new yg(this._delegate._repo,this._delegate._path))}},{key:"key",get:function(){return this.getKey()}},{key:"parent",get:function(){return this.getParent()}},{key:"root",get:function(){return this.getRoot()}}]),n}(Ok),Lk=function(){function e(t,n){var r=this;et(this,e),this._delegate=t,this.app=n,this.INTERNAL={delete:function(){return r._delegate._delete()},forceWebSockets:mk,forceLongPolling:gk}}return nt(e,[{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kk(this._delegate,e,t,n)}},{key:"ref",value:function(e){if(Jt("database.ref",0,1,arguments.length),e instanceof Dk){var t=Sg(this._delegate,e.toString());return new Dk(this,t)}var n=xg(this._delegate,e);return new Dk(this,n)}},{key:"refFromURL",value:function(e){var t="database.refFromURL";Jt(t,1,1,arguments.length);var n=Sg(this._delegate,e);return new Dk(this,n)}},{key:"goOffline",value:function(){return Jt("database.goOffline",0,0,arguments.length),bk(this._delegate)}},{key:"goOnline",value:function(){return Jt("database.goOnline",0,0,arguments.length),_k(this._delegate)}}]),e}();Lk.ServerValue={TIMESTAMP:xk,increment:function(e){return function(e){return{".sv":{increment:e}}}(e)}};var Mk=Object.freeze({__proto__:null,initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,a=e.namespace,o=e.nodeAdmin,s=void 0!==o&&o;Vf(r);var u=new un("auth-internal",new hn("database-standalone"));return u.setComponent(new on("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Lk(pk(t,u,void 0,n,s),t),namespace:a}}}),Fk=Lk.ServerValue;!function(e){e.INTERNAL.registerComponent(new on("database-compat",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:n});return new Lk(i,r)}),"PUBLIC").setServiceProps({Reference:Dk,Query:Ok,Database:Lk,DataSnapshot:Ak,enableLogging:wk,INTERNAL:Mk,ServerValue:Fk}).setMultipleInstances(!0)),e.registerVersion("@firebase/database-compat","0.2.3")}(Pr);var Uk,jk="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Vk={},zk=zk||{},qk=jk||self;function Bk(){}function Zk(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Wk(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Hk="closure_uid_"+(1e9*Math.random()>>>0),Kk=0;function Gk(e,t,n){return e.call.apply(e.bind,arguments)}function Qk(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $k(e,t,n){return($k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Gk:Qk).apply(null,arguments)}function Yk(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Xk(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Jk(){this.s=this.s,this.o=this.o}var eb={};Jk.prototype.s=!1,Jk.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Hk)&&e[Hk]||(e[Hk]=++Kk)}(this);delete eb[e]}},Jk.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var tb=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},nb=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function rb(e){return Array.prototype.concat.apply([],arguments)}function ib(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function ab(e){return/^[\s\xa0]*$/.test(e)}var ob,sb=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ub(e,t){return-1!=e.indexOf(t)}function cb(e,t){return e<t?-1:e>t?1:0}e:{var lb=qk.navigator;if(lb){var hb=lb.userAgent;if(hb){ob=hb;break e}}ob=""}function fb(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function db(e){var t={};for(var n in e)t[n]=e[n];return t}var pb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vb(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<pb.length;a++)n=pb[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function yb(e){return yb[" "](e),e}yb[" "]=Bk;var mb,gb=ub(ob,"Opera"),kb=ub(ob,"Trident")||ub(ob,"MSIE"),bb=ub(ob,"Edge"),_b=bb||kb,wb=ub(ob,"Gecko")&&!(ub(ob.toLowerCase(),"webkit")&&!ub(ob,"Edge"))&&!(ub(ob,"Trident")||ub(ob,"MSIE"))&&!ub(ob,"Edge"),xb=ub(ob.toLowerCase(),"webkit")&&!ub(ob,"Edge");function Sb(){var e=qk.document;return e?e.documentMode:void 0}e:{var Tb="",Ib=function(){var e=ob;return wb?/rv:([^\);]+)(\)|;)/.exec(e):bb?/Edge\/([\d\.]+)/.exec(e):kb?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):xb?/WebKit\/(\S+)/.exec(e):gb?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ib&&(Tb=Ib?Ib[1]:""),kb){var Eb=Sb();if(null!=Eb&&Eb>parseFloat(Tb)){mb=String(Eb);break e}}mb=Tb}var Cb,Rb={};function Nb(){return function(e){var t=Rb;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=sb(String(mb)).split("."),n=sb("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=cb(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||cb(0==a[2].length,0==o[2].length)||cb(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(qk.document&&kb){var Pb=Sb();Cb=Pb||(parseInt(mb,10)||void 0)}else Cb=void 0;var Ab=Cb,Ob=function(){if(!qk.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{qk.addEventListener("test",Bk,t),qk.removeEventListener("test",Bk,t)}catch(n){}return e}();function Db(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Lb(e,t){if(Db.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(wb){e:{try{yb(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Mb[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Lb.Z.h.call(this)}}Db.prototype.h=function(){this.defaultPrevented=!0},Xk(Lb,Db);var Mb={2:"touch",3:"pen",4:"mouse"};Lb.prototype.h=function(){Lb.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Fb="closure_listenable_"+(1e6*Math.random()|0),Ub=0;function jb(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ub,this.ca=this.fa=!1}function Vb(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function zb(e){this.src=e,this.g={},this.h=0}function qb(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=tb(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Vb(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Bb(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}zb.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Bb(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new jb(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var Zb="closure_lm_"+(1e6*Math.random()|0),Wb={};function Hb(e,t,n,r,i){if(r&&r.once)return Gb(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Hb(e,t[a],n,r,i);return null}return n=t_(n),e&&e[Fb]?e.N(t,n,Wk(r)?!!r.capture:!!r,i):Kb(e,t,n,!1,r,i)}function Kb(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Wk(i)?!!i.capture:!!i,s=Jb(e);if(s||(e[Zb]=s=new zb(e)),(n=s.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Xb;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ob||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Yb(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Gb(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Gb(e,t[a],n,r,i);return null}return n=t_(n),e&&e[Fb]?e.O(t,n,Wk(r)?!!r.capture:!!r,i):Kb(e,t,n,!0,r,i)}function Qb(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Qb(e,t[a],n,r,i);else r=Wk(r)?!!r.capture:!!r,n=t_(n),e&&e[Fb]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Bb(a=e.g[t],n,r,i))&&(Vb(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Jb(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Bb(t,n,r,i)),(n=-1<e?t[e]:null)&&$b(n))}function $b(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Fb])qb(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Yb(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Jb(t))?(qb(n,e),0==n.h&&(n.src=null,t[Zb]=null)):Vb(e)}}}function Yb(e){return e in Wb?Wb[e]:Wb[e]="on"+e}function Xb(e,t){if(e.ca)e=!0;else{t=new Lb(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&$b(e),e=n.call(r,t)}return e}function Jb(e){return(e=e[Zb])instanceof zb?e:null}var e_="__closure_events_fn_"+(1e9*Math.random()>>>0);function t_(e){return"function"===typeof e?e:(e[e_]||(e[e_]=function(t){return e.handleEvent(t)}),e[e_])}function n_(){Jk.call(this),this.i=new zb(this),this.P=this,this.I=null}function r_(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Db(t,e);else if(t instanceof Db)t.target=t.target||e;else{var i=t;vb(t=new Db(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=i_(o,r,!0,t)&&i}if(i=i_(o=t.g=e,r,!0,t)&&i,i=i_(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=i_(o=t.g=n[a],r,!1,t)&&i}function i_(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var s=o.listener,u=o.ia||o.src;o.fa&&qb(e.i,o),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Xk(n_,Jk),n_.prototype[Fb]=!0,n_.prototype.removeEventListener=function(e,t,n,r){Qb(this,e,t,n,r)},n_.prototype.M=function(){if(n_.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Vb(n[r]);delete t.g[e],t.h--}}this.I=null},n_.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},n_.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var a_=qk.JSON.stringify;function o_(){var e=p_,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var s_,u_=function(){function e(){et(this,e),this.h=this.g=null}return nt(e,[{key:"add",value:function(e,t){var n=c_.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),c_=new(function(){function e(t,n){et(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return nt(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new l_}),(function(e){return e.reset()})),l_=function(){function e(){et(this,e),this.next=this.g=this.h=null}return nt(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function h_(e){qk.setTimeout((function(){throw e}),0)}function f_(e,t){s_||function(){var e=qk.Promise.resolve(void 0);s_=function(){e.then(v_)}}(),d_||(s_(),d_=!0),p_.add(e,t)}var d_=!1,p_=new u_;function v_(){for(var e;e=o_();){try{e.h.call(e.g)}catch(n){h_(n)}var t=c_;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}d_=!1}function y_(e,t){n_.call(this),this.h=e||1,this.g=t||qk,this.j=$k(this.kb,this),this.l=Date.now()}function m_(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function g_(e,t,n){if("function"===typeof e)n&&(e=$k(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$k(e.handleEvent,e)}return 2147483647<Number(t)?-1:qk.setTimeout(e,t||0)}function k_(e){e.g=g_((function(){e.g=null,e.i&&(e.i=!1,k_(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Xk(y_,n_),(Uk=y_.prototype).da=!1,Uk.S=null,Uk.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),r_(this,"tick"),this.da&&(m_(this),this.start()))}},Uk.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Uk.M=function(){y_.Z.M.call(this),m_(this),delete this.g};var b_=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return nt(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:k_(this)}},{key:"M",value:function(){Mr(ot(n.prototype),"M",this).call(this),this.g&&(qk.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Jk);function __(e){Jk.call(this),this.h=e,this.g={}}Xk(__,Jk);var w_=[];function x_(e,t,n,r){Array.isArray(n)||(n&&(w_[0]=n.toString()),n=w_);for(var i=0;i<n.length;i++){var a=Hb(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function S_(e){fb(e.g,(function(e,t){this.g.hasOwnProperty(t)&&$b(e)}),e),e.g={}}function T_(){this.g=!0}function I_(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return a_(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}__.prototype.M=function(){__.Z.M.call(this),S_(this)},__.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},T_.prototype.Aa=function(){this.g=!1},T_.prototype.info=function(){};var E_={},C_=null;function R_(){return C_=C_||new n_}function N_(e){Db.call(this,E_.Ma,e)}function P_(e){var t=R_();r_(t,new N_(t,e))}function A_(e,t){Db.call(this,E_.STAT_EVENT,e),this.stat=t}function O_(e){var t=R_();r_(t,new A_(t,e))}function D_(e,t){Db.call(this,E_.Na,e),this.size=t}function L_(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return qk.setTimeout((function(){e()}),t)}E_.Ma="serverreachability",Xk(N_,Db),E_.STAT_EVENT="statevent",Xk(A_,Db),E_.Na="timingevent",Xk(D_,Db);var M_={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},F_={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function U_(){}function j_(e){return e.h||(e.h=e.i())}function V_(){}U_.prototype.h=null;var z_,q_={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function B_(){Db.call(this,"d")}function Z_(){Db.call(this,"c")}function W_(){}function H_(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new __(this),this.P=G_,e=_b?125:void 0,this.W=new y_(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new K_}function K_(){this.i=null,this.g="",this.h=!1}Xk(B_,Db),Xk(Z_,Db),Xk(W_,U_),W_.prototype.g=function(){return new XMLHttpRequest},W_.prototype.i=function(){return{}},z_=new W_;var G_=45e3,Q_={},$_={};function Y_(e,t,n){e.K=1,e.v=bw(pw(t)),e.s=n,e.U=!0,X_(e,null)}function X_(e,t){e.F=Date.now(),nw(e),e.A=pw(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Ow(n.h,"t",r),e.C=0,n=e.l.H,e.h=new K_,e.g=Lx(e.l,n?t:null,!e.s),0<e.O&&(e.L=new b_($k(e.Ia,e,e.g),e.O)),x_(e.V,e.g,"readystatechange",e.gb),t=e.H?db(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),P_(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",s=a.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function J_(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function ew(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=tw(e,n))==$_){4==t&&(e.o=4,O_(14),i=!1),I_(e.j,e.m,null,"[Incomplete Response]");break}if(r==Q_){e.o=4,O_(15),I_(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}I_(e.j,e.m,r,null),sw(e,r)}J_(e)&&r!=$_&&r!=Q_&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,O_(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ex(t),t.L=!0,O_(11))):(I_(e.j,e.m,n,"[Invalid Chunked Response]"),ow(e),aw(e))}function tw(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?$_:(n=Number(t.substring(n,r)),isNaN(n)?Q_:(r+=1)+n>t.length?$_:(t=t.substr(r,n),e.C=r+n,t))}function nw(e){e.Y=Date.now()+e.P,rw(e,e.P)}function rw(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=L_($k(e.eb,e),t)}function iw(e){e.B&&(qk.clearTimeout(e.B),e.B=null)}function aw(e){0==e.l.G||e.I||Nx(e.l,e)}function ow(e){iw(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,m_(e.W),S_(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function sw(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||zw(n.i,e)))if(n.I=e.N,!e.J&&zw(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Rx(n),gx(n)}Ix(n),O_(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=L_($k(n.ab,n),6e3));if(1>=Vw(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else Ax(n,11)}else if((e.J||n.g==e)&&Rx(n),!ab(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var s=a[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=a[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ub(l,"spdy")||ub(l,"quic")||ub(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(qw(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,kw(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Dx(r,r.H?r.la:null,r.W),d.J){Bw(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(iw(p),nw(p)),r.g=d}else Tx(r);0<n.l.length&&_x(n)}else"stop"!=a[0]&&"close"!=a[0]||Ax(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ax(n,7):mx(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}P_(4)}catch(a){}}function uw(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Zk(e)||"string"===typeof e)nb(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Zk(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(Zk(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function cw(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof cw)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function lw(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];hw(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)hw(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function hw(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Uk=H_.prototype).setTimeout=function(e){this.P=e},Uk.gb=function(e){e=e.target;var t=this.L;t&&3==fx(e)?t.l():this.Ia(e)},Uk.Ia=function(e){try{if(e==this.g)e:{var t=fx(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||_b||this.g&&(this.h.h||this.g.ga()||dx(this.g)))){this.I||4!=t||7==n||P_(8==n||0>=r?3:2),iw(this);var i=this.g.ba();this.N=i;t:if(J_(this)){var a=dx(this.g);e="";var o=a.length,s=4==fx(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ow(this),aw(this);var u="";break t}this.h.i=new qk.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:s&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ab(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,O_(12),ow(this),aw(this);break e}I_(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,sw(this,i)}this.U?(ew(this,t,u),_b&&this.i&&3==t&&(x_(this.V,this.W,"tick",this.fb),this.W.start())):(I_(this.j,this.m,u,null),sw(this,u)),4==t&&ow(this),this.i&&!this.I&&(4==t?Nx(this.l,this):(this.i=!1,nw(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,O_(12)):(this.o=0,O_(13)),ow(this),aw(this)}}}catch(t){}},Uk.fb=function(){if(this.g){var e=fx(this.g),t=this.g.ga();this.C<t.length&&(iw(this),ew(this,e,t),this.i&&4!=e&&nw(this))}},Uk.cancel=function(){this.I=!0,ow(this)},Uk.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(P_(3),O_(17)),ow(this),this.o=2,aw(this)):rw(this,this.Y-e)},(Uk=cw.prototype).R=function(){lw(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Uk.T=function(){return lw(this),this.g.concat()},Uk.get=function(e,t){return hw(this.h,e)?this.h[e]:t},Uk.set=function(e,t){hw(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Uk.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var fw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dw(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof dw){this.g=void 0!==t?t:e.g,vw(this,e.j),this.s=e.s,yw(this,e.i),mw(this,e.m),this.l=e.l,t=e.h;var n=new Rw;n.i=t.i,t.g&&(n.g=new cw(t.g),n.h=t.h),gw(this,n),this.o=e.o}else e&&(n=String(e).match(fw))?(this.g=!!t,vw(this,n[1]||"",!0),this.s=_w(n[2]||""),yw(this,n[3]||"",!0),mw(this,n[4]),this.l=_w(n[5]||"",!0),gw(this,n[6]||"",!0),this.o=_w(n[7]||"")):(this.g=!!t,this.h=new Rw(null,this.g))}function pw(e){return new dw(e)}function vw(e,t,n){e.j=n?_w(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function yw(e,t,n){e.i=n?_w(t,!0):t}function mw(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function gw(e,t,n){t instanceof Rw?(e.h=t,function(e,t){t&&!e.j&&(Nw(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Pw(this,t),Ow(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ww(t,Ew)),e.h=new Rw(t,e.g))}function kw(e,t,n){e.h.set(t,n)}function bw(e){return kw(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _w(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ww(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,xw),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function xw(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}dw.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ww(t,Sw,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ww(t,Sw,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ww(n,"/"==n.charAt(0)?Iw:Tw,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ww(n,Cw)),e.join("")};var Sw=/[#\/\?@]/g,Tw=/[#\?:]/g,Iw=/[#\?]/g,Ew=/[#\?@]/g,Cw=/#/g;function Rw(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nw(e){e.g||(e.g=new cw,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Pw(e,t){Nw(e),t=Dw(e,t),hw(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,hw((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&lw(e)))}function Aw(e,t){return Nw(e),t=Dw(e,t),hw(e.g.h,t)}function Ow(e,t,n){Pw(e,t),0<n.length&&(e.i=null,e.g.set(Dw(e,t),ib(n)),e.h+=n.length)}function Dw(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Uk=Rw.prototype).add=function(e,t){Nw(this),this.i=null,e=Dw(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Uk.forEach=function(e,t){Nw(this),this.g.forEach((function(n,r){nb(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Uk.T=function(){Nw(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Uk.R=function(e){Nw(this);var t=[];if("string"===typeof e)Aw(this,e)&&(t=rb(t,this.g.get(Dw(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=rb(t,e[n])}return t},Uk.set=function(e,t){return Nw(this),this.i=null,Aw(this,e=Dw(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Uk.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Uk.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var Lw=nt((function e(t,n){et(this,e),this.h=t,this.g=n}));function Mw(e){this.l=e||Uw,qk.PerformanceNavigationTiming?e=0<(e=qk.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(qk.g&&qk.g.Ea&&qk.g.Ea()&&qk.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Fw,Uw=10;function jw(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Vw(e){return e.h?1:e.g?e.g.size:0}function zw(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function qw(e,t){e.g?e.g.add(t):e.h=t}function Bw(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zw(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=it(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return ib(e.i)}function Ww(){}function Hw(){this.g=new Ww}function Kw(e,t,n){var r=n||"";try{uw(e,(function(e,n){var i=e;Wk(e)&&(i=a_(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Gw(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Qw(e){this.l=e.$b||null,this.j=e.ib||!1}function $w(e,t){n_.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Yw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Mw.prototype.cancel=function(){if(this.i=Zw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=it(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ww.prototype.stringify=function(e){return qk.JSON.stringify(e,void 0)},Ww.prototype.parse=function(e){return qk.JSON.parse(e,void 0)},Xk(Qw,U_),Qw.prototype.g=function(){return new $w(this.l,this.j)},Qw.prototype.i=(Fw={},function(){return Fw}),Xk($w,n_);var Yw=0;function Xw(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Jw(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ex(e)}function ex(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Uk=$w.prototype).open=function(e,t){if(this.readyState!=Yw)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ex(this)},Uk.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||qk).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Uk.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Jw(this)),this.readyState=Yw},Uk.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ex(this)),this.g&&(this.readyState=3,ex(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof qk.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xw(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Uk.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Jw(this):ex(this),3==this.readyState&&Xw(this)}},Uk.Ua=function(e){this.g&&(this.response=this.responseText=e,Jw(this))},Uk.Ta=function(e){this.g&&(this.response=e,Jw(this))},Uk.ha=function(){this.g&&Jw(this)},Uk.setRequestHeader=function(e,t){this.v.append(e,t)},Uk.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Uk.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty($w.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var tx=qk.JSON.parse;function nx(e){n_.call(this),this.headers=new cw,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=rx,this.K=this.L=!1}Xk(nx,n_);var rx="",ix=/^https?$/i,ax=["POST","PUT"];function ox(e){return"content-type"==e.toLowerCase()}function sx(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,ux(e),lx(e)}function ux(e){e.D||(e.D=!0,r_(e,"complete"),r_(e,"error"))}function cx(e){if(e.h&&"undefined"!=typeof zk&&(!e.C[1]||4!=fx(e)||2!=e.ba()))if(e.v&&4==fx(e))g_(e.Fa,0,e);else if(r_(e,"readystatechange"),4==fx(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(fw)[1]||null;if(!a&&qk.self&&qk.self.location){var o=qk.self.location.protocol;a=o.substr(0,o.length-1)}i=!ix.test(a?a.toLowerCase():"")}t=i}if(t)r_(e,"complete"),r_(e,"success");else{e.m=6;try{var s=2<fx(e)?e.g.statusText:""}catch(u){s=""}e.j=s+" ["+e.ba()+"]",ux(e)}}finally{lx(e)}}}function lx(e,t){if(e.g){hx(e);var n=e.g,r=e.C[0]?Bk:null;e.g=null,e.C=null,t||r_(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function hx(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(qk.clearTimeout(e.A),e.A=null)}function fx(e){return e.g?e.g.readyState:0}function dx(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case rx:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function px(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return fb(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):kw(e,t,n))}function vx(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function yx(e){this.za=0,this.l=[],this.h=new T_,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=vx("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=vx("baseRetryDelayMs",5e3,e),this.$a=vx("retryDelaySeedMs",1e4,e),this.Ya=vx("forwardChannelMaxRetries",2,e),this.ra=vx("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Mw(e&&e.concurrentRequestLimit),this.Ca=new Hw,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function mx(e){if(kx(e),3==e.G){var t=e.V++,n=pw(e.F);kw(n,"SID",e.J),kw(n,"RID",t),kw(n,"TYPE","terminate"),xx(e,n),(t=new H_(e,e.h,t,void 0)).K=2,t.v=bw(pw(n)),n=!1,qk.navigator&&qk.navigator.sendBeacon&&(n=qk.navigator.sendBeacon(t.v.toString(),"")),!n&&qk.Image&&((new Image).src=t.v,n=!0),n||(t.g=Lx(t.l,null),t.g.ea(t.v)),t.F=Date.now(),nw(t)}Ox(e)}function gx(e){e.g&&(Ex(e),e.g.cancel(),e.g=null)}function kx(e){gx(e),e.u&&(qk.clearTimeout(e.u),e.u=null),Rx(e),e.i.cancel(),e.m&&("number"===typeof e.m&&qk.clearTimeout(e.m),e.m=null)}function bx(e,t){e.l.push(new Lw(e.Za++,t)),3==e.G&&_x(e)}function _x(e){jw(e.i)||e.m||(e.m=!0,f_(e.Ha,e),e.C=0)}function wx(e,t){var n;n=t?t.m:e.V++;var r=pw(e.F);kw(r,"SID",e.J),kw(r,"RID",n),kw(r,"AID",e.U),xx(e,r),e.o&&e.s&&px(r,e.o,e.s),n=new H_(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=Sx(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),qw(e.i,n),Y_(n,r,t)}function xx(e,t){e.j&&uw({},(function(e,n){kw(t,n,e)}))}function Sx(e,t,n){n=Math.min(e.l.length,n);var r=e.j?$k(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=a))a=Math.max(0,i[u].h-100),s=!1;else try{Kw(l,o,"req"+c+"_")}catch(cS){r&&r(l)}}if(s){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Tx(e){e.g||e.u||(e.Y=1,f_(e.Ga,e),e.A=0)}function Ix(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=L_($k(e.Ga,e),Px(e,e.A)),e.A++,!0)}function Ex(e){null!=e.B&&(qk.clearTimeout(e.B),e.B=null)}function Cx(e){e.g=new H_(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=pw(e.oa);kw(t,"RID","rpc"),kw(t,"SID",e.J),kw(t,"CI",e.N?"0":"1"),kw(t,"AID",e.U),xx(e,t),kw(t,"TYPE","xmlhttp"),e.o&&e.s&&px(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=bw(pw(t)),n.s=null,n.U=!0,X_(n,e)}function Rx(e){null!=e.v&&(qk.clearTimeout(e.v),e.v=null)}function Nx(e,t){var n=null;if(e.g==t){Rx(e),Ex(e),e.g=null;var r=2}else{if(!zw(e.i,t))return;n=t.D,Bw(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;r_(r=R_(),new D_(r,n,t,i)),_x(e)}else Tx(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Vw(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=L_($k(e.Ha,e,t),Px(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ix(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Ax(e,5);break;case 4:Ax(e,10);break;case 3:Ax(e,6);break;default:Ax(e,2)}}function Px(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Ax(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=$k(e.jb,e);n||(n=new dw("//www.google.com/images/cleardot.gif"),qk.location&&"http"==qk.location.protocol||vw(n,"https"),bw(n)),function(e,t){var n=new T_;if(qk.Image){var r=new Image;r.onload=Yk(Gw,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Yk(Gw,n,r,"TestLoadImage: error",!1,t),r.onabort=Yk(Gw,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Yk(Gw,n,r,"TestLoadImage: timeout",!1,t),qk.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else O_(2);e.G=0,e.j&&e.j.va(t),Ox(e),kx(e)}function Ox(e){e.G=0,e.I=-1,e.j&&(0==Zw(e.i).length&&0==e.l.length||(e.i.i.length=0,ib(e.l),e.l.length=0),e.j.ua())}function Dx(e,t,n){var r=function(e){return e instanceof dw?pw(e):new dw(e,void 0)}(n);if(""!=r.i)t&&yw(r,t+"."+r.i),mw(r,r.m);else{var i=qk.location;r=function(e,t,n,r){var i=new dw(null,void 0);return e&&vw(i,e),t&&yw(i,t),n&&mw(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&fb(e.aa,(function(e,t){kw(r,t,e)})),t=e.D,n=e.sa,t&&n&&kw(r,t,n),kw(r,"VER",e.ma),xx(e,r),r}function Lx(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new nx(new Qw({ib:!0})):new nx(e.qa)).L=e.H,t}function Mx(){}function Fx(){if(kb&&!(10<=Number(Ab)))throw Error("Environmental error: no available transport.")}function Ux(e,t){n_.call(this),this.g=new yx(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!ab(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!ab(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new zx(this)}function jx(e){B_.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Vx(){Z_.call(this),this.status=1}function zx(e){this.g=e}(Uk=nx.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():z_.g(),this.C=this.u?j_(this.u):j_(z_),this.g.onreadystatechange=$k(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void sx(this,a)}e=n||"";var i=new cw(this.headers);r&&uw(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=ox,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=qk.FormData&&e instanceof qk.FormData,!(0<=tb(ax,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{hx(this),0<this.B&&((this.K=function(e){return kb&&Nb()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$k(this.pa,this)):this.A=g_(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){sx(this,a)}},Uk.pa=function(){"undefined"!=typeof zk&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,r_(this,"timeout"),this.abort(8))},Uk.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,r_(this,"complete"),r_(this,"abort"),lx(this))},Uk.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lx(this,!0)),nx.Z.M.call(this)},Uk.Fa=function(){this.s||(this.F||this.v||this.l?cx(this):this.cb())},Uk.cb=function(){cx(this)},Uk.ba=function(){try{return 2<fx(this)?this.g.status:-1}catch(Fw){return-1}},Uk.ga=function(){try{return this.g?this.g.responseText:""}catch(Fw){return""}},Uk.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),tx(t)}},Uk.Da=function(){return this.m},Uk.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Uk=yx.prototype).ma=8,Uk.G=1,Uk.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Uk.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new H_(this,this.h,e,void 0),n=this.s;if(this.P&&(n?vb(n=db(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Sx(this,t,r),kw(i=pw(this.F),"RID",e),kw(i,"CVER",22),this.D&&kw(i,"X-HTTP-Session-Id",this.D),xx(this,i),this.o&&n&&px(i,this.o,n),qw(this.i,t),this.Ra&&kw(i,"TYPE","init"),this.ja?(kw(i,"$req",r),kw(i,"SID","null"),t.$=!0,Y_(t,i,null)):Y_(t,i,r),this.G=2}}else 3==this.G&&(e?wx(this,e):0==this.l.length||jw(this.i)||wx(this))},Uk.Ga=function(){if(this.u=null,Cx(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=L_($k(this.bb,this),e)}},Uk.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,O_(10),gx(this),Cx(this))},Uk.ab=function(){null!=this.v&&(this.v=null,gx(this),Ix(this),O_(19))},Uk.jb=function(e){e?(this.h.info("Successfully pinged google.com"),O_(2)):(this.h.info("Failed to ping google.com"),O_(1))},(Uk=Mx.prototype).xa=function(){},Uk.wa=function(){},Uk.va=function(){},Uk.ua=function(){},Uk.Oa=function(){},Fx.prototype.g=function(e,t){return new Ux(e,t)},Xk(Ux,n_),Ux.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),f_($k(e.hb,e,t))),O_(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Dx(e,null,e.W),_x(e)},Ux.prototype.close=function(){mx(this.g)},Ux.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,bx(this.g,t)}else this.v?((t={}).__data__=a_(e),bx(this.g,t)):bx(this.g,e)},Ux.prototype.M=function(){this.g.j=null,delete this.j,mx(this.g),delete this.g,Ux.Z.M.call(this)},Xk(jx,B_),Xk(Vx,Z_),Xk(zx,Mx),zx.prototype.xa=function(){r_(this.g,"a")},zx.prototype.wa=function(e){r_(this.g,new jx(e))},zx.prototype.va=function(e){r_(this.g,new Vx(e))},zx.prototype.ua=function(){r_(this.g,"b")},Fx.prototype.createWebChannel=Fx.prototype.g,Ux.prototype.send=Ux.prototype.u,Ux.prototype.open=Ux.prototype.m,Ux.prototype.close=Ux.prototype.close,M_.NO_ERROR=0,M_.TIMEOUT=8,M_.HTTP_ERROR=6,F_.COMPLETE="complete",V_.EventType=q_,q_.OPEN="a",q_.CLOSE="b",q_.ERROR="c",q_.MESSAGE="d",n_.prototype.listen=n_.prototype.N,nx.prototype.listenOnce=nx.prototype.O,nx.prototype.getLastError=nx.prototype.La,nx.prototype.getLastErrorCode=nx.prototype.Da,nx.prototype.getStatus=nx.prototype.ba,nx.prototype.getResponseJson=nx.prototype.Qa,nx.prototype.getResponseText=nx.prototype.ga,nx.prototype.send=nx.prototype.ea;var qx=Vk.createWebChannelTransport=function(){return new Fx},Bx=Vk.getStatEventTarget=function(){return R_()},Zx=Vk.ErrorCode=M_,Wx=Vk.EventType=F_,Hx=Vk.Event=E_,Kx=Vk.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Gx=Vk.FetchXmlHttpFactory=Qw,Qx=Vk.WebChannel=V_,$x=Vk.XhrIo=nx,Yx="@firebase/firestore",Xx=function(){function e(t){et(this,e),this.uid=t}return nt(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Xx.UNAUTHENTICATED=new Xx(null),Xx.GOOGLE_CREDENTIALS=new Xx("google-credentials-uid"),Xx.FIRST_PARTY=new Xx("first-party-uid"),Xx.MOCK_USER=new Xx("mock-user");var Jx="9.9.0",eS=new mn("@firebase/firestore");function tS(){return eS.logLevel}function nS(e){if(eS.logLevel<=ln.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(aS);eS.debug.apply(eS,["Firestore (".concat(Jx,"): ").concat(e)].concat((0,a.Z)(i)))}}function rS(e){if(eS.logLevel<=ln.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(aS);eS.error.apply(eS,["Firestore (".concat(Jx,"): ").concat(e)].concat((0,a.Z)(i)))}}function iS(e){if(eS.logLevel<=ln.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(aS);eS.warn.apply(eS,["Firestore (".concat(Jx,"): ").concat(e)].concat((0,a.Z)(i)))}}function aS(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function oS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Jx,") INTERNAL ASSERTION FAILED: ")+e;throw rS(t),new Error(t)}function sS(e,t){e||oS()}function uS(e,t){return e}var cS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},lS=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return nt(n)}(Ot),hS=nt((function e(){var t=this;et(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),fS=nt((function e(t,n){et(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),dS=function(){function e(){et(this,e)}return nt(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xx.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),pS=function(){function e(t){et(this,e),this.token=t,this.changeListener=null}return nt(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),vS=function(){function e(t){et(this,e),this.t=t,this.currentUser=Xx.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return nt(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new hS;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new hS,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},s=function(e){nS("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return s(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(nS("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hS)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(nS("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(sS("string"==typeof n.accessToken),new fS(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return sS(null===e||"string"==typeof e),new Xx(e)}}]),e}(),yS=nt((function e(t,n,r){et(this,e),this.type="FirstParty",this.user=Xx.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),mS=function(){function e(t,n,r){et(this,e),this.h=t,this.l=n,this.m=r}return nt(e,[{key:"getToken",value:function(){return Promise.resolve(new yS(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Xx.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),gS=nt((function e(t){et(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),kS=function(){function e(t){et(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return nt(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&nS("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,nS("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){nS("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):nS("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(sS("string"==typeof t.token),e.p=t.token,new gS(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function bS(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var _S=function(){function e(){et(this,e)}return nt(e,null,[{key:"I",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=bS(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function wS(e,t){return e<t?-1:e>t?1:0}function xS(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function SS(e){return e+"\0"}var TS=function(){function e(t,n){if(et(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new lS(cS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new lS(cS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new lS(cS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lS(cS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return nt(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?wS(this.nanoseconds,e.nanoseconds):wS(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),IS=function(){function e(t){et(this,e),this.timestamp=t}return nt(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new TS(0,0))}},{key:"max",value:function(){return new e(new TS(253402300799,999999999))}}]),e}(),ES=function(){function e(t,n,r){et(this,e),void 0===n?n=0:n>t.length&&oS(),void 0===r?r=t.length-n:r>t.length-n&&oS(),this.segments=t,this.offset=n,this.len=r}return nt(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),CS=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,s=r;o<s.length;o++){var u=s[o];if(u.indexOf("//")>=0)throw new lS(cS.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,(0,a.Z)(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ES),RS=/^[_a-zA-Z][_a-zA-Z0-9]*$/,NS=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return RS.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new lS(cS.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new lS(cS.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new lS(cS.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(o=!o,i++):"."!==s||o?(r+=s,i++):(a(),i++)}if(a(),o)throw new lS(cS.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ES),PS=function(){function e(t){et(this,e),this.path=t}return nt(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===CS.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(CS.fromString(t))}},{key:"fromName",value:function(t){return new e(CS.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(CS.emptyPath())}},{key:"comparator",value:function(e,t){return CS.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new CS(t.slice()))}}]),e}(),AS=nt((function e(t,n,r,i){et(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function OS(e){return e.fields.find((function(e){return 2===e.kind}))}function DS(e){return e.fields.filter((function(e){return 2!==e.kind}))}AS.UNKNOWN_ID=-1;var LS=nt((function e(t,n){et(this,e),this.fieldPath=t,this.kind=n})),MS=function(){function e(t,n){et(this,e),this.sequenceNumber=t,this.offset=n}return nt(e,null,[{key:"empty",value:function(){return new e(0,jS.min())}}]),e}();function FS(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=IS.fromTimestamp(1e9===r?new TS(n+1,0):new TS(n,r));return new jS(i,PS.empty(),t)}function US(e){return new jS(e.readTime,e.key,-1)}var jS=function(){function e(t,n,r){et(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return nt(e,null,[{key:"min",value:function(){return new e(IS.min(),PS.empty(),-1)}},{key:"max",value:function(){return new e(IS.max(),PS.empty(),-1)}}]),e}();function VS(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=PS.comparator(e.documentKey,t.documentKey))?n:wS(e.largestBatchId,t.largestBatchId)}var zS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qS=function(){function e(){et(this,e),this.onCommittedListeners=[]}return nt(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function BS(e){return ZS.apply(this,arguments)}function ZS(){return ZS=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===cS.FAILED_PRECONDITION&&t.message===zS){e.next=2;break}throw t;case 2:nS("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),ZS.apply(this,arguments)}var WS=function(){function e(t){var n=this;et(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return nt(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&oS(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=it(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,s=function(s){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},u=0;u<i;u++)s(u)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),HS=function(){function e(t,n){var r=this;et(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.T=new hS,this.transaction.oncomplete=function(){r.T.resolve()},this.transaction.onabort=function(){n.error?r.T.reject(new QS(t,n.error)):r.T.resolve()},this.transaction.onerror=function(e){var n=eT(e.target.error);r.T.reject(new QS(t,n))}}return nt(e,[{key:"A",get:function(){return this.T.promise}},{key:"abort",value:function(e){e&&this.T.reject(e),this.aborted||(nS("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"R",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new YS(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new QS(n,t)}}}]),e}(),KS=function(){function e(t,n,r){et(this,e),this.name=t,this.version=n,this.P=r,12.2===e.v(Tt())&&rS("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return nt(e,[{key:"k",value:function(){var e=Ae(Ne().mark((function e(t){var n=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return nS("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new QS(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new lS(cS.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new lS(cS.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new QS(t,n))},i.onupgradeneeded=function(e){nS("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.P.O(t,i.transaction,e.oldVersion,n.version).next((function(){nS("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.M&&(this.db.onversionchange=function(e){return n.M(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"F",value:function(e){this.M=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ae(Ne().mark((function e(t,n,r,i){var a,o,s,u,c,l=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(Ne().mark((function e(){var n,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.k(t);case 2:return l.db=e.sent,n=HS.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.R(),e})).catch((function(e){return n.abort(e),WS.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.A;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(s=e.t0)){e.next=8;break}return e.abrupt("return",s.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),u=e.t1,c="FirebaseError"!==u.name&&o<3,nS("SimpleDb","Transaction failed with error:",u.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(u));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return nS("SimpleDb","Removing database:",e),XS(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"V",value:function(){if(!At())return!1;if(e.S())return!0;var t=Tt(),n=e.v(t),r=0<n&&n<10,i=e.D(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"S",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.C)}},{key:"N",value:function(e,t){return e.store(t)}},{key:"v",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"D",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),GS=function(){function e(t){et(this,e),this.$=t,this.B=!1,this.L=null}return nt(e,[{key:"isDone",get:function(){return this.B}},{key:"U",get:function(){return this.L}},{key:"cursor",set:function(e){this.$=e}},{key:"done",value:function(){this.B=!0}},{key:"q",value:function(e){this.L=e}},{key:"delete",value:function(){return XS(this.$.delete())}}]),e}(),QS=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,cS.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return nt(n)}(lS);function $S(e){return"IndexedDbTransactionError"===e.name}var YS=function(){function e(t){et(this,e),this.store=t}return nt(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(nS("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(nS("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),XS(n)}},{key:"add",value:function(e){return nS("SimpleDb","ADD",this.store.name,e,e),XS(this.store.add(e))}},{key:"get",value:function(e){var t=this;return XS(this.store.get(e)).next((function(n){return void 0===n&&(n=null),nS("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return nS("SimpleDb","DELETE",this.store.name,e),XS(this.store.delete(e))}},{key:"count",value:function(){return nS("SimpleDb","COUNT",this.store.name),XS(this.store.count())}},{key:"K",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.G(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new WS((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"j",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new WS((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"W",value:function(e,t){nS("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.H=!1;var r=this.cursor(n);return this.G(r,(function(e,t,n){return n.delete()}))}},{key:"J",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.G(r,t)}},{key:"Y",value:function(e){var t=this.cursor({});return new WS((function(n,r){t.onerror=function(e){var t=eT(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"G",value:function(e,t){var n=[];return new WS((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new GS(i),o=t(i.primaryKey,i.value,a);if(o instanceof WS){var s=o.catch((function(e){return a.done(),WS.reject(e)}));n.push(s)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return WS.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function XS(e){return new WS((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=eT(e.target.error);n(t)}}))}var JS=!1;function eT(e){var t=KS.v(Tt());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new lS("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return JS||(JS=!0,setTimeout((function(){throw r}),0)),r}}return e}var tT=function(){function e(t,n){et(this,e),this.asyncQueue=t,this.X=n,this.task=null}return nt(e,[{key:"start",value:function(){}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"Z",value:function(e){var t=this;nS("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=nS,e.t1="Documents written: ",e.next=6,t.X.tt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!$S(e.t4)){e.next=17;break}nS("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,BS(e.t4);case 19:return e.next=21,t.Z(1);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),nT=function(){function e(t,n){et(this,e),this.localStore=t,this.persistence=n}return nt(e,[{key:"tt",value:function(){var e=Ae(Ne().mark((function e(){var t,n=this,r=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.et(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"et",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return WS.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return nS("IndexBackiller","Processing collection: ".concat(t)),n.nt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"nt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.st(i,n)})).next((function(n){return nS("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"st",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=US(t);VS(r,n)>0&&(n=r)})),new jS(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),rT=function(){function e(t,n){var r=this;et(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.it(e)},this.rt=function(e){return n.writeSequenceNumber(e)})}return nt(e,[{key:"it",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.rt&&this.rt(e),e}}]),e}();function iT(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function aT(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function oT(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}rT.ot=-1;var sT=function(){function e(t,n){et(this,e),this.comparator=t,this.root=n||cT.EMPTY}return nt(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,cT.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,cT.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new uT(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new uT(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new uT(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new uT(this.root,e,this.comparator,!0)}}]),e}(),uT=function(){function e(t,n,r,i){et(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return nt(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),cT=function(){function e(t,n,r,i,a){et(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return nt(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw oS();if(this.right.isRed())throw oS();var e=this.left.check();if(e!==this.right.check())throw oS();return e+(this.isRed()?0:1)}}]),e}();cT.EMPTY=null,cT.RED=!0,cT.BLACK=!1,cT.EMPTY=new(function(){function e(){et(this,e),this.size=0}return nt(e,[{key:"key",get:function(){throw oS()}},{key:"value",get:function(){throw oS()}},{key:"color",get:function(){throw oS()}},{key:"left",get:function(){throw oS()}},{key:"right",get:function(){throw oS()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new cT(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var lT=function(){function e(t){et(this,e),this.comparator=t,this.data=new sT(this.comparator)}return nt(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new hT(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new hT(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),hT=function(){function e(t){et(this,e),this.iter=t}return nt(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function fT(e){return e.hasNext()?e.getNext():void 0}var dT=function(){function e(t){et(this,e),this.fields=t,t.sort(NS.comparator)}return nt(e,[{key:"unionWith",value:function(t){var n,r=new lT(NS.comparator),i=it(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,s=it(t);try{for(s.s();!(o=s.n()).done;){var u=o.value;r=r.add(u)}}catch(c){s.e(c)}finally{s.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=it(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return xS(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var pT=function(e){function t(e){et(this,t),this.binaryString=e}return nt(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return wS(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();pT.EMPTY_BYTE_STRING=new pT("");var vT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yT(e){if(sS(!!e),"string"==typeof e){var t=0,n=vT.exec(e);if(sS(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:mT(e.seconds),nanos:mT(e.nanos)}}function mT(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function gT(e){return"string"==typeof e?pT.fromBase64String(e):pT.fromUint8Array(e)}function kT(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function bT(e){var t=e.mapValue.fields.__previous_value__;return kT(t)?bT(t):t}function _T(e){var t=yT(e.mapValue.fields.__local_write_time__.timestampValue);return new TS(t.seconds,t.nanos)}var wT=nt((function e(t,n,r,i,a,o,s,u){et(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=u})),xT=function(){function e(t,n){et(this,e),this.projectId=t,this.database=n||"(default)"}return nt(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function ST(e){return null==e}function TT(e){return 0===e&&1/e==-1/0}function IT(e){return"number"==typeof e&&Number.isInteger(e)&&!TT(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var ET={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},CT={nullValue:"NULL_VALUE"};function RT(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kT(e)?4:BT(e)?9007199254740991:10:oS()}function NT(e,t){if(e===t)return!0;var n=RT(e);if(n!==RT(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _T(e).isEqual(_T(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=yT(e.timestampValue),r=yT(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return gT(e.bytesValue).isEqual(gT(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return mT(e.geoPointValue.latitude)===mT(t.geoPointValue.latitude)&&mT(e.geoPointValue.longitude)===mT(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return mT(e.integerValue)===mT(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=mT(e.doubleValue),r=mT(t.doubleValue);return n===r?TT(n)===TT(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xS(e.arrayValue.values||[],t.arrayValue.values||[],NT);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(iT(n)!==iT(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!NT(n[i],r[i])))return!1;return!0}(e,t);default:return oS()}}function PT(e,t){return void 0!==(e.values||[]).find((function(e){return NT(e,t)}))}function AT(e,t){if(e===t)return 0;var n=RT(e),r=RT(t);if(n!==r)return wS(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wS(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=mT(e.integerValue||e.doubleValue),r=mT(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return OT(e.timestampValue,t.timestampValue);case 4:return OT(_T(e),_T(t));case 5:return wS(e.stringValue,t.stringValue);case 6:return function(e,t){var n=gT(e),r=gT(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=wS(n[i],r[i]);if(0!==a)return a}return wS(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=wS(mT(e.latitude),mT(t.latitude));return 0!==n?n:wS(mT(e.longitude),mT(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=AT(n[i],r[i]);if(a)return a}return wS(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ET.mapValue&&t===ET.mapValue)return 0;if(e===ET.mapValue)return 1;if(t===ET.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var s=wS(r[o],a[o]);if(0!==s)return s;var u=AT(n[r[o]],i[a[o]]);if(0!==u)return u}return wS(r.length,a.length)}(e.mapValue,t.mapValue);default:throw oS()}}function OT(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return wS(e,t);var n=yT(e),r=yT(t),i=wS(n.seconds,r.seconds);return 0!==i?i:wS(n.nanos,r.nanos)}function DT(e){return LT(e)}function LT(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=yT(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?gT(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,PS.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=it(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=LT(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=it(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(LT(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):oS();var t,n}function MT(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function FT(e){return!!e&&"integerValue"in e}function UT(e){return!!e&&"arrayValue"in e}function jT(e){return!!e&&"nullValue"in e}function VT(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function zT(e){return!!e&&"mapValue"in e}function qT(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return aT(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=qT(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=qT(e.arrayValue.values[r]);return n}return Object.assign({},e)}function BT(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function ZT(e){return"nullValue"in e?CT:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?MT(xT.empty(),PS.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:oS()}function WT(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?MT(xT.empty(),PS.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?ET:oS()}function HT(e,t){var n=AT(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function KT(e,t){var n=AT(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var GT=function(){function e(t){et(this,e),this.value=t}return nt(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!zT(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qT(t)}},{key:"setAll",value:function(e){var t=this,n=NS.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=qT(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());zT(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return NT(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];zT(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){aT(t,(function(t,n){return e[t]=n}));var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(qT(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function QT(e){var t=[];return aT(e.fields,(function(e,n){var r=new NS([e]);if(zT(n)){var i=QT(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=it(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;t.push(r.child(s))}}catch(u){o.e(u)}finally{o.f()}}}else t.push(r)})),new dT(t)}var $T=function(){function e(t,n,r,i,a,o){et(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return nt(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=GT.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=GT.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=IS.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,IS.min(),IS.min(),GT.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,IS.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,IS.min(),GT.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,IS.min(),GT.empty(),2)}}]),e}(),YT=nt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;et(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=s,this.ut=null}));function XT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new YT(e,t,n,r,i,a,o)}function JT(e){var t=uS(e);if(null===t.ut){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+DT(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),ST(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return DT(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return DT(e)})).join(",")),t.ut=n}return t.ut}function eI(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!yI(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!NT(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!gI(e.startAt,t.startAt)&&gI(e.endAt,t.endAt)}function tI(e){return PS.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function nI(e,t){return e.filters.filter((function(e){return e instanceof aI&&e.field.isEqual(t)}))}function rI(e,t,n){var r,i=CT,a=!0,o=it(nI(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=CT,c=!0;switch(s.op){case"<":case"<=":u=ZT(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,c=!1;break;case"!=":case"not-in":u=CT}HT({value:i,inclusive:a},{value:u,inclusive:c})<0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];HT({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function iI(e,t,n){var r,i=ET,a=!0,o=it(nI(e,t));try{for(o.s();!(r=o.n()).done;){var s=r.value,u=ET,c=!0;switch(s.op){case">=":case">":u=WT(s.value),c=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,c=!1;break;case"!=":case"not-in":u=ET}KT({value:i,inclusive:a},{value:u,inclusive:c})>0&&(i=u,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];KT({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var aI=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return nt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.at(AT(t,this.value)):null!==t&&RT(this.value)===RT(t)&&this.at(AT(t,this.value))}},{key:"at",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return oS()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.ct(e,t,r):new oI(e,t,r):"array-contains"===t?new lI(e,r):"in"===t?new hI(e,r):"not-in"===t?new fI(e,r):"array-contains-any"===t?new dI(e,r):new n(e,t,r)}},{key:"ct",value:function(e,t,n){return"in"===t?new sI(e,n):new uI(e,n)}}]),n}(function(){return nt((function e(){et(this,e)}))}()),oI=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this,e,r,i)).key=PS.fromName(i.referenceValue),a}return nt(n,[{key:"matches",value:function(e){var t=PS.comparator(e.key,this.key);return this.at(t)}}]),n}(aI),sI=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e,"in",r)).keys=cI("in",r),i}return nt(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(aI),uI=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e,"not-in",r)).keys=cI("not-in",r),i}return nt(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(aI);function cI(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return PS.fromName(e.referenceValue)}))}var lI=function(e){at(n,e);var t=ct(n);function n(e,r){return et(this,n),t.call(this,e,"array-contains",r)}return nt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return UT(t)&&PT(t.arrayValue,this.value)}}]),n}(aI),hI=function(e){at(n,e);var t=ct(n);function n(e,r){return et(this,n),t.call(this,e,"in",r)}return nt(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&PT(this.value.arrayValue,t)}}]),n}(aI),fI=function(e){at(n,e);var t=ct(n);function n(e,r){return et(this,n),t.call(this,e,"not-in",r)}return nt(n,[{key:"matches",value:function(e){if(PT(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!PT(this.value.arrayValue,t)}}]),n}(aI),dI=function(e){at(n,e);var t=ct(n);function n(e,r){return et(this,n),t.call(this,e,"array-contains-any",r)}return nt(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!UT(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return PT(t.value.arrayValue,e)}))}}]),n}(aI),pI=nt((function e(t,n){et(this,e),this.position=t,this.inclusive=n})),vI=nt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";et(this,e),this.field=t,this.dir=n}));function yI(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function mI(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?PS.comparator(PS.fromName(o.referenceValue),n.key):AT(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function gI(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!NT(e.position[n],t.position[n]))return!1;return!0}var kI=nt((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;et(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=s,this.endAt=u,this.lt=null,this.ft=null,this.startAt,this.endAt}));function bI(e,t,n,r,i,a,o,s){return new kI(e,t,n,r,i,a,o,s)}function _I(e){return new kI(e)}function wI(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function xI(e){var t,n=it(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.ht())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function SI(e){return null!==e.collectionGroup}function TI(e){var t=uS(e);if(null===t.lt){t.lt=[];var n=xI(t),r=wI(t);if(null!==n&&null===r)n.isKeyField()||t.lt.push(new vI(n)),t.lt.push(new vI(NS.keyField(),"asc"));else{var i,a=!1,o=it(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var s=i.value;t.lt.push(s),s.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.lt.push(new vI(NS.keyField(),u))}}}return t.lt}function II(e){var t=uS(e);if(!t.ft)if("F"===t.limitType)t.ft=XT(t.path,t.collectionGroup,TI(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=it(TI(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new vI(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var s=t.endAt?new pI(t.endAt.position,t.endAt.inclusive):null,u=t.startAt?new pI(t.startAt.position,t.startAt.inclusive):null;t.ft=XT(t.path,t.collectionGroup,r,t.filters,t.limit,s,u)}return t.ft}function EI(e,t,n){return new kI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function CI(e,t){return eI(II(e),II(t))&&e.limitType===t.limitType}function RI(e){return"".concat(JT(II(e)),"|lt:").concat(e.limitType)}function NI(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(DT(t.value));var t})).join(", "),"]")),ST(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return DT(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return DT(e)})).join(",")),"Target(".concat(t,")")}(II(e)),"; limitType=").concat(e.limitType,")")}function PI(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):PS.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=it(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=it(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=mI(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,TI(e),t))&&!(e.endAt&&!function(e,t,n){var r=mI(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,TI(e),t))}(e,t)}function AI(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function OI(e){return function(t,n){var r,i=!1,a=it(TI(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,s=DI(o,t,n);if(0!==s)return s;i=i||o.field.isKeyField()}}catch(u){a.e(u)}finally{a.f()}return 0}}function DI(e,t,n){var r=e.field.isKeyField()?PS.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?AT(r,i):oS()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return oS()}}function LI(e,t){if(e.dt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:TT(t)?"-0":t}}function MI(e){return{integerValue:""+e}}function FI(e,t){return IT(t)?MI(t):LI(e,t)}var UI=nt((function e(){et(this,e),this._=void 0}));function jI(e,t,n){return e instanceof qI?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof BI?ZI(e,t):e instanceof WI?HI(e,t):function(e,t){var n=zI(e,t),r=GI(n)+GI(e._t);return FT(n)&&FT(e._t)?MI(r):LI(e.wt,r)}(e,t)}function VI(e,t,n){return e instanceof BI?ZI(e,t):e instanceof WI?HI(e,t):n}function zI(e,t){return e instanceof KI?FT(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var qI=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n)}(UI),BI=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this)).elements=e,r}return nt(n)}(UI);function ZI(e,t){var n,r=QI(t),i=it(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return NT(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var WI=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this)).elements=e,r}return nt(n)}(UI);function HI(e,t){var n,r=QI(t),i=it(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!NT(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var KI=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this)).wt=e,i._t=r,i}return nt(n)}(UI);function GI(e){return mT(e.integerValue||e.doubleValue)}function QI(e){return UT(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var $I=nt((function e(t,n){et(this,e),this.field=t,this.transform=n}));var YI=nt((function e(t,n){et(this,e),this.version=t,this.transformResults=n})),XI=function(){function e(t,n){et(this,e),this.updateTime=t,this.exists=n}return nt(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function JI(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var eE=nt((function e(){et(this,e)}));function tE(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new dE(e.key,XI.none()):new oE(e.key,e.data,XI.none());var n,r=e.data,i=GT.empty(),a=new lT(NS.comparator),o=it(t.fields);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(!a.has(s)){var u=r.field(s);null===u&&s.length>1&&(s=s.popLast(),u=r.field(s)),null===u?i.delete(s):i.set(s,u),a=a.add(s)}}}catch(c){o.e(c)}finally{o.f()}return new sE(e.key,i,new dT(a.toArray()),XI.none())}function nE(e,t,n){e instanceof oE?function(e,t,n){var r=e.value.clone(),i=cE(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof sE?function(e,t,n){if(JI(e.precondition,t)){var r=cE(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(uE(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function rE(e,t,n,r){return e instanceof oE?function(e,t,n,r){if(!JI(e.precondition,t))return n;var i=e.value.clone(),a=lE(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof sE?function(e,t,n,r){if(!JI(e.precondition,t))return n;var i=lE(e.fieldTransforms,r,t),a=t.data;return a.setAll(uE(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return JI(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function iE(e,t){var n,r=null,i=it(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),s=zI(a.transform,o||null);null!=s&&(null===r&&(r=GT.empty()),r.set(a.field,s))}}catch(u){i.e(u)}finally{i.f()}return r||null}function aE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xS(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof BI&&t instanceof BI||e instanceof WI&&t instanceof WI?xS(e.elements,t.elements,NT):e instanceof KI&&t instanceof KI?NT(e._t,t._t):e instanceof qI&&t instanceof qI}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var oE=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return et(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return nt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eE),sE=function(e){at(n,e);var t=ct(n);function n(e,r,i,a){var o,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return et(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=s,o.type=1,o}return nt(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(eE);function uE(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function cE(e,t,n){var r=new Map;sS(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,s=t.data.field(a.field);r.set(a.field,VI(o,s,n[i]))}return r}function lE(e,t,n){var r,i=new Map,a=it(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.transform,u=n.data.field(o.field);i.set(o.field,jI(s,u,t))}}catch(c){a.e(c)}finally{a.f()}return i}var hE,fE,dE=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return nt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eE),pE=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return nt(n,[{key:"getFieldMask",value:function(){return null}}]),n}(eE),vE=nt((function e(t){et(this,e),this.count=t}));function yE(e){switch(e){default:return oS();case cS.CANCELLED:case cS.UNKNOWN:case cS.DEADLINE_EXCEEDED:case cS.RESOURCE_EXHAUSTED:case cS.INTERNAL:case cS.UNAVAILABLE:case cS.UNAUTHENTICATED:return!1;case cS.INVALID_ARGUMENT:case cS.NOT_FOUND:case cS.ALREADY_EXISTS:case cS.PERMISSION_DENIED:case cS.FAILED_PRECONDITION:case cS.ABORTED:case cS.OUT_OF_RANGE:case cS.UNIMPLEMENTED:case cS.DATA_LOSS:return!0}}function mE(e){if(void 0===e)return rS("GRPC error has no .code"),cS.UNKNOWN;switch(e){case hE.OK:return cS.OK;case hE.CANCELLED:return cS.CANCELLED;case hE.UNKNOWN:return cS.UNKNOWN;case hE.DEADLINE_EXCEEDED:return cS.DEADLINE_EXCEEDED;case hE.RESOURCE_EXHAUSTED:return cS.RESOURCE_EXHAUSTED;case hE.INTERNAL:return cS.INTERNAL;case hE.UNAVAILABLE:return cS.UNAVAILABLE;case hE.UNAUTHENTICATED:return cS.UNAUTHENTICATED;case hE.INVALID_ARGUMENT:return cS.INVALID_ARGUMENT;case hE.NOT_FOUND:return cS.NOT_FOUND;case hE.ALREADY_EXISTS:return cS.ALREADY_EXISTS;case hE.PERMISSION_DENIED:return cS.PERMISSION_DENIED;case hE.FAILED_PRECONDITION:return cS.FAILED_PRECONDITION;case hE.ABORTED:return cS.ABORTED;case hE.OUT_OF_RANGE:return cS.OUT_OF_RANGE;case hE.UNIMPLEMENTED:return cS.UNIMPLEMENTED;case hE.DATA_LOSS:return cS.DATA_LOSS;default:return oS()}}(fE=hE||(hE={}))[fE.OK=0]="OK",fE[fE.CANCELLED=1]="CANCELLED",fE[fE.UNKNOWN=2]="UNKNOWN",fE[fE.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fE[fE.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fE[fE.NOT_FOUND=5]="NOT_FOUND",fE[fE.ALREADY_EXISTS=6]="ALREADY_EXISTS",fE[fE.PERMISSION_DENIED=7]="PERMISSION_DENIED",fE[fE.UNAUTHENTICATED=16]="UNAUTHENTICATED",fE[fE.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fE[fE.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fE[fE.ABORTED=10]="ABORTED",fE[fE.OUT_OF_RANGE=11]="OUT_OF_RANGE",fE[fE.UNIMPLEMENTED=12]="UNIMPLEMENTED",fE[fE.INTERNAL=13]="INTERNAL",fE[fE.UNAVAILABLE=14]="UNAVAILABLE",fE[fE.DATA_LOSS=15]="DATA_LOSS";var gE=function(){function e(t,n){et(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return nt(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=(0,o.Z)(r.value,2),s=a[0],u=a[1];if(this.equalsFn(s,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){aT(this.inner,(function(t,n){var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=(0,o.Z)(r.value,2),s=a[0],u=a[1];e(s,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return oT(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),kE=new sT(PS.comparator);function bE(){return kE}var _E=new sT(PS.comparator);function wE(){for(var e=_E,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function xE(e){var t=_E;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function SE(){return IE()}function TE(){return IE()}function IE(){return new gE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var EE=new sT(PS.comparator),CE=new lT(PS.comparator);function RE(){for(var e=CE,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var NE=new lT(wS);function PE(){return NE}var AE=function(){function e(t,n,r,i,a){et(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return nt(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,OE.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(IS.min(),r,PE(),bE(),RE())}}]),e}(),OE=function(){function e(t,n,r,i,a){et(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return nt(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(pT.EMPTY_BYTE_STRING,n,RE(),RE(),RE())}}]),e}(),DE=nt((function e(t,n,r,i){et(this,e),this.gt=t,this.removedTargetIds=n,this.key=r,this.yt=i})),LE=nt((function e(t,n){et(this,e),this.targetId=t,this.It=n})),ME=nt((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pT.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;et(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),FE=function(){function e(){et(this,e),this.Tt=0,this.Et=VE(),this.At=pT.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return nt(e,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(e){e.approximateByteSize()>0&&(this.bt=!0,this.At=e)}},{key:"St",value:function(){var e=RE(),t=RE(),n=RE();return this.Et.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:oS()}})),new OE(this.At,this.Rt,e,t,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=VE()}},{key:"Ct",value:function(e,t){this.bt=!0,this.Et=this.Et.insert(e,t)}},{key:"xt",value:function(e){this.bt=!0,this.Et=this.Et.remove(e)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Ot",value:function(){this.bt=!0,this.Rt=!0}}]),e}(),UE=function(){function e(t){et(this,e),this.Mt=t,this.Ft=new Map,this.$t=bE(),this.Bt=jE(),this.Lt=new lT(wS)}return nt(e,[{key:"Ut",value:function(e){var t,n=it(e.gt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.yt&&e.yt.isFoundDocument()?this.qt(r,e.yt):this.Kt(r,e.key,e.yt)}}catch(s){n.e(s)}finally{n.f()}var i,a=it(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Kt(o,e.key,e.yt)}}catch(s){a.e(s)}finally{a.f()}}},{key:"Gt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Qt(n);switch(e.state){case 0:t.jt(n)&&r.Vt(e.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(e.resumeToken);break;case 2:r.kt(),r.Pt||t.removeTarget(n);break;case 3:t.jt(n)&&(r.Ot(),r.Vt(e.resumeToken));break;case 4:t.jt(n)&&(t.Wt(n),r.Vt(e.resumeToken));break;default:oS()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ft.forEach((function(e,r){n.jt(r)&&t(r)}))}},{key:"zt",value:function(e){var t=e.targetId,n=e.It.count,r=this.Ht(t);if(r){var i=r.target;if(tI(i))if(0===n){var a=new PS(i.path);this.Kt(t,a,$T.newNoDocument(a,IS.min()))}else sS(1===n);else this.Jt(t)!==n&&(this.Wt(t),this.Lt=this.Lt.add(t))}}},{key:"Yt",value:function(e){var t=this,n=new Map;this.Ft.forEach((function(r,i){var a=t.Ht(i);if(a){if(r.current&&tI(a.target)){var o=new PS(a.target.path);null!==t.$t.get(o)||t.Xt(i,o)||t.Kt(i,o,$T.newNoDocument(o,e))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=RE();this.Bt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Ht(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$t.forEach((function(t,n){return n.setReadTime(e)}));var i=new AE(e,n,this.Lt,this.$t,r);return this.$t=bE(),this.Bt=jE(),this.Lt=new lT(wS),i}},{key:"qt",value:function(e,t){if(this.jt(e)){var n=this.Xt(e,t.key)?2:0;this.Qt(e).Ct(t.key,n),this.$t=this.$t.insert(t.key,t),this.Bt=this.Bt.insert(t.key,this.Zt(t.key).add(e))}}},{key:"Kt",value:function(e,t,n){if(this.jt(e)){var r=this.Qt(e);this.Xt(e,t)?r.Ct(t,1):r.xt(t),this.Bt=this.Bt.insert(t,this.Zt(t).delete(e)),n&&(this.$t=this.$t.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ft.delete(e)}},{key:"Jt",value:function(e){var t=this.Qt(e).St();return this.Mt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Nt",value:function(e){this.Qt(e).Nt()}},{key:"Qt",value:function(e){var t=this.Ft.get(e);return t||(t=new FE,this.Ft.set(e,t)),t}},{key:"Zt",value:function(e){var t=this.Bt.get(e);return t||(t=new lT(wS),this.Bt=this.Bt.insert(e,t)),t}},{key:"jt",value:function(e){var t=null!==this.Ht(e);return t||nS("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Ht",value:function(e){var t=this.Ft.get(e);return t&&t.Pt?null:this.Mt.te(e)}},{key:"Wt",value:function(e){var t=this;this.Ft.set(e,new FE),this.Mt.getRemoteKeysForTarget(e).forEach((function(n){t.Kt(e,n,null)}))}},{key:"Xt",value:function(e,t){return this.Mt.getRemoteKeysForTarget(e).has(t)}}]),e}();function jE(){return new sT(PS.comparator)}function VE(){return new sT(PS.comparator)}var zE={asc:"ASCENDING",desc:"DESCENDING"},qE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BE=nt((function e(t,n){et(this,e),this.databaseId=t,this.dt=n}));function ZE(e,t){return e.dt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function WE(e,t){return e.dt?t.toBase64():t.toUint8Array()}function HE(e,t){return ZE(e,t.toTimestamp())}function KE(e){return sS(!!e),IS.fromTimestamp(function(e){var t=yT(e);return new TS(t.seconds,t.nanos)}(e))}function GE(e,t){return function(e){return new CS(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function QE(e){var t=CS.fromString(e);return sS(gC(t)),t}function $E(e,t){return GE(e.databaseId,t.path)}function YE(e,t){var n=QE(t);if(n.get(1)!==e.databaseId.projectId)throw new lS(cS.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new lS(cS.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new PS(tC(n))}function XE(e,t){return GE(e.databaseId,t)}function JE(e){var t=QE(e);return 4===t.length?CS.emptyPath():tC(t)}function eC(e){return new CS(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tC(e){return sS(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nC(e,t,n){return{name:$E(e,t),fields:n.value.mapValue.fields}}function rC(e,t,n){var r=YE(e,t.name),i=KE(t.updateTime),a=new GT({mapValue:{fields:t.fields}}),o=$T.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function iC(e,t){return"found"in t?function(e,t){sS(!!t.found),t.found.name,t.found.updateTime;var n=YE(e,t.found.name),r=KE(t.found.updateTime),i=new GT({mapValue:{fields:t.found.fields}});return $T.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){sS(!!t.missing),sS(!!t.readTime);var n=YE(e,t.missing),r=KE(t.readTime);return $T.newNoDocument(n,r)}(e,t):oS()}function aC(e,t){var n;if(t instanceof oE)n={update:nC(e,t.key,t.value)};else if(t instanceof dE)n={delete:$E(e,t.key)};else if(t instanceof sE)n={update:nC(e,t.key,t.data),updateMask:mC(t.fieldMask)};else{if(!(t instanceof pE))return oS();n={verify:$E(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof qI)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof BI)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof WI)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof KI)return{fieldPath:t.field.canonicalString(),increment:n._t};throw oS()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:HE(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:oS()}(e,t.precondition)),n}function oC(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?XI.updateTime(KE(e.updateTime)):void 0!==e.exists?XI.exists(e.exists):XI.none()}(t.currentDocument):XI.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)sS("REQUEST_TIME"===t.setToServerValue),n=new qI;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new BI(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new WI(i)}else"increment"in t?n=new KI(e,t.increment):oS();var a=NS.fromServerFormat(t.fieldPath);return new $I(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=YE(e,t.update.name),a=new GT({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new dT(t.map((function(e){return NS.fromServerFormat(e)})))}(t.updateMask);return new sE(i,a,o,n,r)}return new oE(i,a,n,r)}if(t.delete){var s=YE(e,t.delete);return new dE(s,n)}if(t.verify){var u=YE(e,t.verify);return new pE(u,n)}return oS()}function sC(e,t){return{documents:[XE(e,t.path)]}}function uC(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=XE(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=XE(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(VT(e.value))return{unaryFilter:{field:dC(e.field),op:"IS_NAN"}};if(jT(e.value))return{unaryFilter:{field:dC(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(VT(e.value))return{unaryFilter:{field:dC(e.field),op:"IS_NOT_NAN"}};if(jT(e.value))return{unaryFilter:{field:dC(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dC(e.field),op:fC(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:dC(e.field),direction:hC(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,s=function(e,t){return e.dt||ST(t)?t:{value:t}}(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function cC(e){var t=JE(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){sS(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=lC(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new vI(pC(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return ST(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new pI(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new pI(n,t)}(n.endAt)),bI(t,i,s,o,u,"F",c,l)}function lC(e){return e?void 0!==e.unaryFilter?[yC(e)]:void 0!==e.fieldFilter?[vC(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return lC(e)})).reduce((function(e,t){return e.concat(t)})):oS():[]}function hC(e){return zE[e]}function fC(e){return qE[e]}function dC(e){return{fieldPath:e.canonicalString()}}function pC(e){return NS.fromServerFormat(e.fieldPath)}function vC(e){return aI.create(pC(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oS()}}(e.fieldFilter.op),e.fieldFilter.value)}function yC(e){switch(e.unaryFilter.op){case"IS_NAN":var t=pC(e.unaryFilter.field);return aI.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=pC(e.unaryFilter.field);return aI.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=pC(e.unaryFilter.field);return aI.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=pC(e.unaryFilter.field);return aI.create(i,"!=",{nullValue:"NULL_VALUE"});default:return oS()}}function mC(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function gC(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function kC(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=_C(t)),t=bC(e.get(n),t);return _C(t)}function bC(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function _C(e){return e+"\x01\x01"}function wC(e){var t=e.length;if(sS(t>=2),2===t)return sS("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),CS.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&oS(),e.charAt(o+1)){case"\x01":var s=e.substring(a,o),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:oS()}a=o+2}return new CS(r)}var xC=["userId","batchId"];function SC(e,t){return[e,kC(t)]}function TC(e,t,n){return[e,kC(t),n]}var IC={},EC=["prefixPath","collectionGroup","readTime","documentId"],CC=["prefixPath","collectionGroup","documentId"],RC=["collectionGroup","readTime","prefixPath","documentId"],NC=["canonicalId","targetId"],PC=["targetId","path"],AC=["path","targetId"],OC=["collectionId","parent"],DC=["indexId","uid"],LC=["uid","sequenceNumber"],MC=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],FC=["indexId","uid","orderedDocumentKey"],UC=["userId","collectionPath","documentId"],jC=["userId","collectionPath","largestBatchId"],VC=["userId","collectionGroup","largestBatchId"],zC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),qC=[].concat((0,a.Z)(zC),["documentOverlays"]),BC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ZC=BC,WC=[].concat(ZC,["indexConfiguration","indexState","indexEntries"]),HC=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this)).ee=e,i.currentSequenceNumber=r,i}return nt(n)}(qS);function KC(e,t){var n=uS(e);return KS.N(n.ee,t)}var GC=function(){function e(t,n,r,i){et(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return nt(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&nE(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=it(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=rE(i,e,t,this.localWriteTime))}}catch(u){r.e(u)}finally{r.f()}var a,o=it(this.mutations);try{for(o.s();!(a=o.n()).done;){var s=a.value;s.key.isEqual(e.key)&&(t=rE(s,e,t,this.localWriteTime))}}catch(u){o.e(u)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=TE();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,s=n.applyToLocalView(o,a.mutatedFields),u=tE(o,s=t.has(i.key)?null:s);null!==u&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(IS.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),RE())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&xS(this.mutations,e.mutations,(function(e,t){return aE(e,t)}))&&xS(this.baseMutations,e.baseMutations,(function(e,t){return aE(e,t)}))}}]),e}(),QC=function(){function e(t,n,r,i){et(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return nt(e,null,[{key:"from",value:function(t,n,r){sS(t.mutations.length===r.length);for(var i=EE,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),$C=function(){function e(t,n){et(this,e),this.largestBatchId=t,this.mutation=n}return nt(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),YC=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:IS.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:IS.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:pT.EMPTY_BYTE_STRING;et(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return nt(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),XC=nt((function e(t){et(this,e),this.ne=t}));function JC(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:eR(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:$E(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ZE(e,t.version.toTimestamp())}}(e.ne,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:tR(t.version)};else{if(!t.isUnknownDocument())return oS();r.unknownDocument={path:n.path.toArray(),version:tR(t.version)}}return r}function eR(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function tR(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function nR(e){var t=new TS(e.seconds,e.nanoseconds);return IS.fromTimestamp(t)}function rR(e,t){for(var n=(t.baseMutations||[]).map((function(t){return oC(e.ne,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return oC(e.ne,t)})),s=TS.fromMillis(t.localWriteTimeMs);return new GC(t.batchId,s,n,o)}function iR(e){var t,n,r=nR(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?nR(e.lastLimboFreeSnapshotVersion):IS.min();return void 0!==e.query.documents?(sS(1===(n=e.query).documents.length),t=II(_I(JE(n.documents[0])))):t=function(e){return II(cC(e))}(e.query),new YC(t,e.targetId,0,e.lastListenSequenceNumber,r,i,pT.fromBase64String(e.resumeToken))}function aR(e,t){var n,r=tR(t.snapshotVersion),i=tR(t.lastLimboFreeSnapshotVersion);n=tI(t.target)?sC(e.ne,t.target):uC(e.ne,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:JT(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function oR(e){var t=cC({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?EI(t,t.limit,"L"):t}function sR(e,t){return new $C(t.largestBatchId,oC(e.ne,t.overlayMutation))}function uR(e,t){var n=t.path.lastSegment();return[e,kC(t.path.popLast()),n]}function cR(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:tR(r.readTime),documentKey:kC(r.documentKey.path),largestBatchId:r.largestBatchId}}var lR=function(){function e(){et(this,e)}return nt(e,[{key:"getBundleMetadata",value:function(e,t){return hR(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:nR(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return hR(e).put({bundleId:(n=t).id,createTime:tR(KE(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return fR(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:oR(t.bundledQuery),readTime:nR(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return fR(e).put(function(e){return{name:e.name,readTime:tR(KE(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function hR(e){return KC(e,"bundles")}function fR(e){return KC(e,"namedQueries")}var dR=function(){function e(t,n){et(this,e),this.wt=t,this.userId=n}return nt(e,[{key:"getOverlay",value:function(e,t){var n=this;return pR(e).get(uR(this.userId,t)).next((function(e){return e?sR(n.wt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=SE();return WS.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new $C(t,a);i.push(r.ie(e,o))})),WS.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(kC(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(pR(e).W("collectionPathOverlayIndex",i))})),WS.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=SE(),a=kC(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return pR(e).K("collectionPathOverlayIndex",o).next((function(e){var t,n=it(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=sR(r.wt,a);i.set(o.getKey(),o)}}catch(s){n.e(s)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=SE(),s=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pR(e).J({index:"collectionGroupOverlayIndex",range:s},(function(e,t,n){var s=sR(a.wt,t);o.size()<r||s.largestBatchId===i?(o.set(s.getKey(),s),i=s.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ie",value:function(e,t){return pR(e).put(function(e,t,n){var r=uR(t,n.mutation.key),i=(0,o.Z)(r,3);i[0];return{userId:t,collectionPath:i[1],documentId:i[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:aC(e.ne,n.mutation)}}(this.wt,this.userId,t))}}],[{key:"se",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function pR(e){return KC(e,"documentOverlays")}var vR=function(){function e(){et(this,e)}return nt(e,[{key:"re",value:function(e,t){this.oe(e,t),t.ue()}},{key:"oe",value:function(e,t){if("nullValue"in e)this.ce(t,5);else if("booleanValue"in e)this.ce(t,10),t.ae(e.booleanValue?1:0);else if("integerValue"in e)this.ce(t,15),t.ae(mT(e.integerValue));else if("doubleValue"in e){var n=mT(e.doubleValue);isNaN(n)?this.ce(t,13):(this.ce(t,15),TT(n)?t.ae(0):t.ae(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ce(t,20),"string"==typeof r?t.he(r):(t.he("".concat(r.seconds||"")),t.ae(r.nanos||0))}else if("stringValue"in e)this.le(e.stringValue,t),this.fe(t);else if("bytesValue"in e)this.ce(t,30),t.de(gT(e.bytesValue)),this.fe(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ce(t,45),t.ae(i.latitude||0),t.ae(i.longitude||0)}else"mapValue"in e?BT(e)?this.ce(t,Number.MAX_SAFE_INTEGER):(this.we(e.mapValue,t),this.fe(t)):"arrayValue"in e?(this.me(e.arrayValue,t),this.fe(t)):oS()}},{key:"le",value:function(e,t){this.ce(t,25),this.ge(e,t)}},{key:"ge",value:function(e,t){t.he(e)}},{key:"we",value:function(e,t){var n=e.fields||{};this.ce(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.le(a,t),this.oe(n[a],t)}}},{key:"me",value:function(e,t){var n=e.values||[];this.ce(t,50);var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.oe(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ce(t,37),PS.fromName(e).path.forEach((function(e){n.ce(t,60),n.ge(e,t)}))}},{key:"ce",value:function(e,t){e.ae(t)}},{key:"fe",value:function(e){e.ae(2)}}]),e}();function yR(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function mR(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=yR(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}vR.ye=new vR;var gR=function(){function e(){et(this,e),this.buffer=new Uint8Array(1024),this.position=0}return nt(e,[{key:"pe",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ie(n.value),n=t.next();this.Te()}},{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){var t,n=it(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ie(i);else if(i<2048)this.Ie(960|i>>>6),this.Ie(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ie(480|i>>>12),this.Ie(128|63&i>>>6),this.Ie(128|63&i);else{var a=r.codePointAt(0);this.Ie(240|a>>>18),this.Ie(128|63&a>>>12),this.Ie(128|63&a>>>6),this.Ie(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Te()}},{key:"Pe",value:function(e){var t,n=it(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"ve",value:function(e){var t=this.Ve(e),n=mR(t);this.Se(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"De",value:function(e){var t=this.Ve(e),n=mR(t);this.Se(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ce",value:function(){this.xe(255),this.xe(255)}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Se(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Oe",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ve",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ie",value:function(e){var t=255&e;0===t?(this.xe(0),this.xe(255)):255===t?(this.xe(255),this.xe(0)):this.xe(t)}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(e)}},{key:"Te",value:function(){this.xe(0),this.xe(1)}},{key:"Re",value:function(){this.ke(0),this.ke(1)}},{key:"xe",value:function(e){this.Se(1),this.buffer[this.position++]=e}},{key:"ke",value:function(e){this.Se(1),this.buffer[this.position++]=~e}},{key:"Se",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),kR=function(){function e(t){et(this,e),this.Me=t}return nt(e,[{key:"de",value:function(e){this.Me.pe(e)}},{key:"he",value:function(e){this.Me.be(e)}},{key:"ae",value:function(e){this.Me.ve(e)}},{key:"ue",value:function(){this.Me.Ce()}}]),e}(),bR=function(){function e(t){et(this,e),this.Me=t}return nt(e,[{key:"de",value:function(e){this.Me.Ee(e)}},{key:"he",value:function(e){this.Me.Pe(e)}},{key:"ae",value:function(e){this.Me.De(e)}},{key:"ue",value:function(){this.Me.Ne()}}]),e}(),_R=function(){function e(){et(this,e),this.Me=new gR,this.Fe=new kR(this.Me),this.$e=new bR(this.Me)}return nt(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Be",value:function(e){return 0===e?this.Fe:this.$e}},{key:"Oe",value:function(){return this.Me.Oe()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),wR=function(){function e(t,n,r,i){et(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return nt(e,[{key:"Le",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function xR(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=SR(e.arrayValue,t.arrayValue))?n:0!==(n=SR(e.directionalValue,t.directionalValue))?n:PS.comparator(e.documentKey,t.documentKey)}function SR(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var TR=function(){function e(t){et(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.qe=[];var n,r=it(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.ht()?this.Ke=i:this.qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return nt(e,[{key:"Ge",value:function(e){var t=OS(e);if(void 0!==t&&!this.Qe(t))return!1;for(var n=DS(e),r=0,i=0;r<n.length&&this.Qe(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ke){var a=n[r];if(!this.je(this.Ke,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"Qe",value:function(e){var t,n=it(this.qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),IR=function(){function e(){et(this,e),this.ze=new ER}return nt(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.ze.add(t),WS.resolve()}},{key:"getCollectionParents",value:function(e,t){return WS.resolve(this.ze.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return WS.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return WS.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return WS.resolve(null)}},{key:"getIndexType",value:function(e,t){return WS.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return WS.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return WS.resolve(null)}},{key:"getMinOffset",value:function(e,t){return WS.resolve(jS.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return WS.resolve(jS.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return WS.resolve()}},{key:"updateIndexEntries",value:function(e,t){return WS.resolve()}}]),e}(),ER=function(){function e(){et(this,e),this.index={}}return nt(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new lT(CS.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new lT(CS.comparator)).toArray()}}]),e}(),CR=new Uint8Array(0),RR=function(){function e(t,n){et(this,e),this.user=t,this.databaseId=n,this.He=new ER,this.Je=new gE((function(e){return JT(e)}),(function(e,t){return eI(e,t)})),this.uid=t.uid||""}return nt(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.He.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.He.add(t)}));var a={collectionId:r,parent:kC(i)};return NR(e).put(a)}return WS.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[SS(t),""],!1,!0);return NR(e).K(r).next((function(e){var r,i=it(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(wC(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=AR(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=OR(e);return a.next((function(e){o.put(cR(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=AR(e),r=OR(e),i=PR(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=PR(e),i=!0,a=new Map;return WS.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=RE(),o=[];return WS.forEach(a,(function(i,a){var s;nS("IndexedDbIndexManager","Using index ".concat((s=i,"id=".concat(s.indexId,"|cg=").concat(s.collectionGroup,"|f=").concat(s.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(JT(t)));var u=function(e,t){var n=OS(t);if(void 0===n)return null;var r,i=it(nI(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=it(DS(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=it(nI(e,o.fieldPath));try{for(s.s();!(a=s.n()).done;){var u=a.value;switch(u.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),u.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),u.value),Array.from(r.values())}}}catch(c){s.e(c)}finally{s.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=it(DS(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?rI(e,o.fieldPath,e.startAt):iI(e,o.fieldPath,e.startAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new pI(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=it(DS(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,s=0===o.kind?iI(e,o.fieldPath,e.endAt):rI(e,o.fieldPath,e.endAt);r.push(s.value),i&&(i=s.inclusive)}}catch(u){a.e(u)}finally{a.f()}return new pI(r,i)}(a,i),f=n.Ze(i,a,l),d=n.Ze(i,a,h),p=n.tn(i,a,c),v=n.en(i.indexId,u,f,l.inclusive,d,h.inclusive,p);return WS.forEach(v,(function(n){return r.j(n,t.limit).next((function(t){t.forEach((function(t){var n=PS.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return WS.resolve(null)}))}},{key:"Ye",value:function(e){var t=this.Je.get(e);return t||(t=[e],this.Je.set(e,t),t)}},{key:"en",value:function(e,t,n,r,i,o,s){for(var u=this,c=(null!=t?t.length:1)*Math.max(n.length,i.length),l=c/(null!=t?t.length:1),h=[],f=function(c){var f=t?u.nn(t[c/l]):CR,d=u.sn(e,f,n[c%l],r),p=u.rn(e,f,i[c%l],o),v=s.map((function(t){return u.sn(e,f,t,!0)}));h.push.apply(h,(0,a.Z)(u.createRange(d,p,v)))},d=0;d<c;++d)f(d);return h}},{key:"sn",value:function(e,t,n,r){var i=new wR(e,PS.empty(),t,n);return r?i:i.Le()}},{key:"rn",value:function(e,t,n,r){var i=new wR(e,PS.empty(),t,n);return r?i.Le():i}},{key:"Xe",value:function(e,t){var n=new TR(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=it(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Ge(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return WS.forEach(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new lT(NS.comparator),r=!1,i=it(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,s=it(e.orderBy);try{for(s.s();!(o=s.n()).done;){var u=o.value;u.field.isKeyField()||(n=n.add(u.field))}}catch(c){s.e(c)}finally{s.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"on",value:function(e,t){var n,r=new _R,i=it(DS(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var s=r.Be(a.kind);vR.ye.re(o,s)}}catch(u){i.e(u)}finally{i.f()}return r.Oe()}},{key:"nn",value:function(e){var t=new _R;return vR.ye.re(e,t.Be(0)),t.Oe()}},{key:"un",value:function(e,t){var n=new _R;return vR.ye.re(MT(this.databaseId,t),n.Be(function(e){var t=DS(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Oe()}},{key:"tn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new _R);var i,a=0,o=it(DS(e));try{for(o.s();!(i=o.n()).done;){var s,u=i.value,c=n[a++],l=it(r);try{for(l.s();!(s=l.n()).done;){var h=s.value;if(this.cn(t,u.fieldPath)&&UT(c))r=this.an(r,u,c);else{var f=h.Be(u.kind);vR.ye.re(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.hn(r)}},{key:"Ze",value:function(e,t,n){return this.tn(e,t,n.position)}},{key:"hn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Oe();return t}},{key:"an",value:function(e,t,n){var r,i=(0,a.Z)(e),o=[],s=it(n.arrayValue.values||[]);try{for(s.s();!(r=s.n()).done;){var u,c=r.value,l=it(i);try{for(l.s();!(u=l.n()).done;){var h=u.value,f=new _R;f.seed(h.Oe()),vR.ye.re(c,f.Be(t.kind)),o.push(f)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){s.e(d)}finally{s.f()}return o}},{key:"cn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof aI&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=AR(e),i=OR(e);return(t?r.K("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.K()).next((function(e){var t=[];return WS.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new MS(t.sequenceNumber,new jS(nR(t.readTime),new PS(wC(t.documentKey)),t.largestBatchId)):MS.empty(),r=e.fields.map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];return new LS(NS.fromServerFormat(n),r)}));return new AS(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:wS(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=AR(e),a=OR(e);return this.ln(e).next((function(e){return i.K("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return WS.forEach(t,(function(t){return a.put(cR(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return WS.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?WS.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),WS.forEach(a,(function(r){return n.fn(e,t,r).next((function(t){var a=n.dn(i,r);return t.isEqual(a)?WS.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"wn",value:function(e,t,n,r){return PR(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.un(n,t.key),documentKey:t.key.path.toArray()})}},{key:"mn",value:function(e,t,n,r){return PR(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.un(n,t.key),t.key.path.toArray()])}},{key:"fn",value:function(e,t,n){var r=PR(e),i=new lT(xR);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.un(n,t)])},(function(e,r){i=i.add(new wR(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"dn",value:function(e,t){var n=new lT(xR),r=this.on(t,e);if(null==r)return n;var i=OS(t);if(null!=i){var a=e.data.field(i.fieldPath);if(UT(a)){var o,s=it(a.arrayValue.values||[]);try{for(s.s();!(o=s.n()).done;){var u=o.value;n=n.add(new wR(t.indexId,e.key,this.nn(u),r))}}catch(c){s.e(c)}finally{s.f()}}}else n=n.add(new wR(t.indexId,e.key,CR,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;nS("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),s=fT(a),u=fT(o);s||u;){var c=!1,l=!1;if(s&&u){var h=n(s,u);h<0?l=!0:h>0&&(c=!0)}else null!=s?l=!0:c=!0;c?(r(u),u=fT(o)):l?(i(s),s=fT(a)):(s=fT(a),u=fT(o))}}(r,i,xR,(function(r){o.push(a.wn(e,t,n,r))}),(function(r){o.push(a.mn(e,t,n,r))})),WS.waitFor(o)}},{key:"ln",value:function(e){var t=1;return OR(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return xR(e,t)})).filter((function(e,t,n){return!t||0!==xR(e,n[t-1])}));var r=[];r.push(e);var i,a=it(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=xR(o,e),u=xR(o,t);if(0===s)r[0]=e.Le();else if(s>0&&u<0)r.push(o),r.push(o.Le());else if(u>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,CR,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,CR,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(DR)}},{key:"getMinOffset",value:function(e,t){var n=this;return WS.mapArray(this.Ye(t),(function(t){return n.Xe(e,t).next((function(e){return e||oS()}))})).next(DR)}}]),e}();function NR(e){return KC(e,"collectionParents")}function PR(e){return KC(e,"indexEntries")}function AR(e){return KC(e,"indexConfiguration")}function OR(e){return KC(e,"indexState")}function DR(e){sS(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;VS(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new jS(t.readTime,t.documentKey,n)}var LR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},MR=function(){function e(t,n,r){et(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return nt(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function FR(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),s=0,u=r.J({range:o},(function(e,t,n){return s++,n.delete()}));a.push(u.next((function(){sS(1===s)})));var c,l=[],h=it(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=TC(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return WS.waitFor(a).next((function(){return l}))}function UR(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw oS();t=e.noDocument}return JSON.stringify(t).length}MR.DEFAULT_COLLECTION_PERCENTILE=10,MR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,MR.DEFAULT=new MR(41943040,MR.DEFAULT_COLLECTION_PERCENTILE,MR.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),MR.DISABLED=new MR(-1,0,0);var jR=function(){function e(t,n,r,i){et(this,e),this.userId=t,this.wt=n,this.indexManager=r,this.referenceDelegate=i,this.gn={}}return nt(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zR(e).J({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=qR(e),o=zR(e);return o.add({}).next((function(s){sS("number"==typeof s);var u,c=new GC(s,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return aC(e.ne,t)})),i=n.mutations.map((function(t){return aC(e.ne,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.wt,i.userId,c),h=[],f=new lT((function(e,t){return wS(e.canonicalString(),t.canonicalString())})),d=it(r);try{for(d.s();!(u=d.n()).done;){var p=u.value,v=TC(i.userId,p.key.path,s);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,IC))}}catch(y){d.e(y)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.gn[s]=c.keys()})),WS.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return zR(e).get(t).next((function(e){return e?(sS(e.userId===n.userId),rR(n.wt,e)):null}))}},{key:"yn",value:function(e,t){var n=this;return this.gn[t]?WS.resolve(this.gn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.gn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return zR(e).J({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(sS(t.batchId>=r),a=rR(n.wt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zR(e).J({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zR(e).K("userMutationsIndex",n).next((function(e){return e.map((function(e){return rR(t.wt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=SC(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return qR(e).J({range:i},(function(r,i,s){var u=(0,o.Z)(r,3),c=u[0],l=u[1],h=u[2],f=wC(l);if(c===n.userId&&t.path.isEqual(f))return zR(e).get(h).next((function(e){if(!e)throw oS();sS(e.userId===n.userId),a.push(rR(n.wt,e))}));s.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new lT(wS),i=[];return t.forEach((function(t){var a=SC(n.userId,t.path),s=IDBKeyRange.lowerBound(a),u=qR(e).J({range:s},(function(e,i,a){var s=(0,o.Z)(e,3),u=s[0],c=s[1],l=s[2],h=wC(c);u===n.userId&&t.path.isEqual(h)?r=r.add(l):a.done()}));i.push(u)})),WS.waitFor(i).next((function(){return n.pn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=SC(this.userId,r),s=IDBKeyRange.lowerBound(a),u=new lT(wS);return qR(e).J({range:s},(function(e,t,a){var s=(0,o.Z)(e,3),c=s[0],l=s[1],h=s[2],f=wC(l);c===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.pn(e,u)}))}},{key:"pn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(zR(e).get(t).next((function(e){if(null===e)throw oS();sS(e.userId===n.userId),r.push(rR(n.wt,e))})))})),WS.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return FR(e.ee,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.In(t.batchId)})),WS.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"In",value:function(e){delete this.gn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return WS.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return qR(e).J({range:r},(function(e,n,r){if(e[0]===t.userId){var a=wC(e[1]);i.push(a)}else r.done()})).next((function(){sS(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return VR(e,this.userId,t)}},{key:"Tn",value:function(e){var t=this;return BR(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"se",value:function(t,n,r,i){return sS(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function VR(e,t,n){var r=SC(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),s=!1;return qR(e).J({range:a,H:!0},(function(e,n,r){var a=(0,o.Z)(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(s=!0),r.done()})).next((function(){return s}))}function zR(e){return KC(e,"mutations")}function qR(e){return KC(e,"documentMutations")}function BR(e){return KC(e,"mutationQueues")}var ZR=function(){function e(t){et(this,e),this.En=t}return nt(e,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new e(0)}},{key:"Rn",value:function(){return new e(-1)}}]),e}(),WR=function(){function e(t,n){et(this,e),this.referenceDelegate=t,this.wt=n}return nt(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.bn(e).next((function(n){var r=new ZR(n.highestTargetId);return n.highestTargetId=r.next(),t.Pn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.bn(e).next((function(e){return IS.fromTimestamp(new TS(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.bn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.bn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Pn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.vn(e,t).next((function(){return n.bn(e).next((function(r){return r.targetCount+=1,n.Vn(t,r),n.Pn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.vn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return HR(e).delete(t.targetId)})).next((function(){return n.bn(e)})).next((function(t){return sS(t.targetCount>0),t.targetCount-=1,n.Pn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return HR(e).J((function(o,s){var u=iR(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,a.push(r.removeTargetData(e,u)))})).next((function(){return WS.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return HR(e).J((function(e,n){var r=iR(n);t(r)}))}},{key:"bn",value:function(e){return KR(e).get("targetGlobalKey").next((function(e){return sS(null!==e),e}))}},{key:"Pn",value:function(e,t){return KR(e).put("targetGlobalKey",t)}},{key:"vn",value:function(e,t){return HR(e).put(aR(this.wt,t))}},{key:"Vn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.bn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=JT(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return HR(e).J({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=iR(n);eI(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=GR(e);return t.forEach((function(t){var o=kC(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),WS.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=GR(e);return WS.forEach(t,(function(t){var a=kC(t.path);return WS.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=GR(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=GR(e),i=RE();return r.J({range:n,H:!0},(function(e,t,n){var r=wC(e[1]),a=new PS(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=kC(t.path),r=IDBKeyRange.bound([n],[SS(n)],!1,!0),i=0;return GR(e).J({index:"documentTargetsIndex",H:!0,range:r},(function(e,t,n){var r=(0,o.Z)(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"te",value:function(e,t){return HR(e).get(t).next((function(e){return e?iR(e):null}))}}]),e}();function HR(e){return KC(e,"targets")}function KR(e){return KC(e,"targetGlobal")}function GR(e){return KC(e,"targetDocuments")}function QR(e,t){var n=(0,o.Z)(e,2),r=n[0],i=n[1],a=(0,o.Z)(t,2),s=a[0],u=a[1],c=wS(r,s);return 0===c?wS(i,u):c}var $R=function(){function e(t){et(this,e),this.Sn=t,this.buffer=new lT(QR),this.Dn=0}return nt(e,[{key:"Cn",value:function(){return++this.Dn}},{key:"xn",value:function(e){var t=[e,this.Cn()];if(this.buffer.size<this.Sn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();QR(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),YR=function(){function e(t,n,r){et(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Nn=null}return nt(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.kn(6e4)}},{key:"stop",value:function(){this.Nn&&(this.Nn.cancel(),this.Nn=null)}},{key:"started",get:function(){return null!==this.Nn}},{key:"kn",value:function(e){var t=this;nS("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Nn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Nn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!$S(e.t0)){e.next=12;break}nS("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,BS(e.t0);case 14:return e.next=16,t.kn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),XR=function(){function e(t,n){et(this,e),this.On=t,this.params=n}return nt(e,[{key:"calculateTargetCount",value:function(e,t){return this.On.Mn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return WS.resolve(rT.ot);var r=new $R(t);return this.On.forEachTarget(e,(function(e){return r.xn(e.sequenceNumber)})).next((function(){return n.On.Fn(e,(function(e){return r.xn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.On.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.On.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(nS("LruGarbageCollector","Garbage collection skipped; disabled"),WS.resolve(LR)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(nS("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),LR):n.$n(e,t)}))}},{key:"getCacheSize",value:function(e){return this.On.getCacheSize(e)}},{key:"$n",value:function(e,t){var n,r,i,a,o,s,u,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(nS("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,s=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return u=Date.now(),tS()<=ln.DEBUG&&nS("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(s-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(u-s)+"ms\n"+"Total Duration: ".concat(u-l,"ms")),WS.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),JR=function(){function e(t,n){et(this,e),this.db=t,this.garbageCollector=function(e,t){return new XR(e,t)}(this,n)}return nt(e,[{key:"Mn",value:function(e){var t=this.Bn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Bn",value:function(e){var t=0;return this.Fn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Fn",value:function(e,t){return this.Ln(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return eN(e,n)}},{key:"removeReference",value:function(e,t,n){return eN(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return eN(e,t)}},{key:"Un",value:function(e,t){return function(e,t){var n=!1;return BR(e).Y((function(r){return VR(e,r,t).next((function(e){return e&&(n=!0),WS.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Ln(e,(function(o,s){if(s<=t){var u=n.Un(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,IS.min()),GR(e).delete([0,kC(o.path)])}))}));i.push(u)}})).next((function(){return WS.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return eN(e,t)}},{key:"Ln",value:function(e,t){var n,r=GR(e),i=rT.ot;return r.J({index:"documentTargetsIndex"},(function(e,r){var a=(0,o.Z)(e,2),s=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===s?(i!==rT.ot&&t(new PS(wC(n)),i),i=c,n=u):i=rT.ot})).next((function(){i!==rT.ot&&t(new PS(wC(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function eN(e,t){return GR(e).put(function(e,t){return{targetId:0,path:kC(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var tN=function(){function e(){et(this,e),this.changes=new gE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return nt(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,$T.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?WS.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),nN=function(){function e(t){et(this,e),this.wt=t}return nt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return oN(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return oN(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],eR(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=$T.newInvalidDocument(t);return oN(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sN(t))},(function(e,i){r=n.Kn(t,i)})).next((function(){return r}))}},{key:"Gn",value:function(e,t){var n=this,r={size:0,document:$T.newInvalidDocument(t)};return oN(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(sN(t))},(function(e,i){r={document:n.Kn(t,i),size:UR(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=bE();return this.Qn(e,t,(function(e,t){var i=n.Kn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"jn",value:function(e,t){var n=this,r=bE(),i=new sT(PS.comparator);return this.Qn(e,t,(function(e,t){var a=n.Kn(e,t);r=r.insert(e,a),i=i.insert(e,UR(t))})).next((function(){return{documents:r,Wn:i}}))}},{key:"Qn",value:function(e,t,n){if(t.isEmpty())return WS.resolve();var r=new lT(cN);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(sN(r.first()),sN(r.last())),o=r.getIterator(),s=o.getNext();return oN(e).J({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=PS.fromSegments([].concat((0,a.Z)(t.prefixPath),[t.collectionGroup,t.documentId]));s&&cN(s,i)<0;)n(s,null),s=o.getNext();s&&s.isEqual(i)&&(n(s,t),s=o.hasNext()?o.getNext():null),s?r.q(sN(s)):r.done()})).next((function(){for(;s;)n(s,null),s=o.hasNext()?o.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),eR(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oN(e).K(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=bE(),i=it(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.Kn(PS.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(s){i.e(s)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=bE(),o=uN(t,n),s=uN(t,jS.max());return oN(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,s,!0)},(function(e,t,n){var o=i.Kn(PS.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new iN(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return aN(e).get("remoteDocumentGlobalKey").next((function(e){return sS(!!e),e}))}},{key:"qn",value:function(e,t){return aN(e).put("remoteDocumentGlobalKey",t)}},{key:"Kn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=rC(e.ne,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=PS.fromSegments(t.noDocument.path),i=nR(t.noDocument.readTime);n=$T.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return oS();var a=PS.fromSegments(t.unknownDocument.path),o=nR(t.unknownDocument.version);n=$T.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new TS(e[0],e[1]);return IS.fromTimestamp(t)}(t.readTime)),n}(this.wt,t);if(!n.isNoDocument()||!n.version.isEqual(IS.min()))return n}return $T.newInvalidDocument(e)}}]),e}();function rN(e){return new nN(e)}var iN=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this)).zn=e,i.trackRemovals=r,i.Hn=new gE((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return nt(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new lT((function(e,t){return wS(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var s=t.Hn.get(a);if(n.push(t.zn.removeEntry(e,a,s.readTime)),o.isValidDocument()){var u=JC(t.zn.wt,o);i=i.add(a.path.popLast());var c=UR(u);r+=c-s.size,n.push(t.zn.addEntry(e,a,u))}else if(r-=s.size,t.trackRemovals){var l=JC(t.zn.wt,o.convertToNoDocument(IS.min()));n.push(t.zn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.zn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.zn.updateMetadata(e,r)),WS.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.zn.Gn(e,t).next((function(e){return n.Hn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.zn.jn(e,t).next((function(e){var t=e.documents;return e.Wn.forEach((function(e,r){n.Hn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(tN);function aN(e){return KC(e,"remoteDocumentGlobal")}function oN(e){return KC(e,"remoteDocumentsV14")}function sN(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uN(e,t){var n=t.documentKey.path.toArray();return[e,eR(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function cN(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=wS(n[a],r[a]))return i;return(i=wS(n.length,r.length))||((i=wS(n[n.length-2],r[r.length-2]))||wS(n[n.length-1],r[r.length-1]))}var lN=nt((function e(t,n){et(this,e),this.overlayedDocument=t,this.mutatedFields=n})),hN=function(){function e(t,n,r,i){et(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return nt(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&rE(r.mutation,e,dT.empty(),TS.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,RE()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:RE(),i=SE();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=wE();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=SE();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,RE())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=bE(),a=IE(),o=IE();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof sE)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),rE(o.mutation,t,o.mutation.getFieldMask(),TS.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new lN(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=IE(),i=new sT((function(e,t){return e-t})),a=RE();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=it(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||dT.empty();o=e.applyToLocalView(a,o),r.set(n,o);var s=(i.get(e.batchId)||RE()).add(n);i=i.insert(e.batchId,s)}}))};for(a.s();!(n=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}})).next((function(){for(var o=[],s=i.getReverseIterator(),u=function(){var i=s.getNext(),u=i.key,c=i.value,l=TE();c.forEach((function(e){if(!a.has(e)){var n=tE(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,u,l))};s.hasNext();)u();return WS.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return PS.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):SI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):WS.resolve(SE()),s=-1,u=a;return o.next((function(t){return WS.forEach(t,(function(t,n){return s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?WS.resolve():i.getBaseDocument(e,t,n).next((function(e){u=u.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,u,t,RE())})).next((function(e){return{batchId:s,changes:xE(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new PS(t)).next((function(e){var t=wE();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=wE();return this.indexManager.getCollectionParents(e,i).next((function(o){return WS.forEach(o,(function(o){var s=function(e,t){return new kI(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,s,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,$T.newInvalidDocument(n)))}));var n=wE();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&rE(a.mutation,i,dT.empty(),TS.now()),PI(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):WS.resolve($T.newInvalidDocument(t))}}]),e}(),fN=function(){function e(t){et(this,e),this.wt=t,this.Jn=new Map,this.Yn=new Map}return nt(e,[{key:"getBundleMetadata",value:function(e,t){return WS.resolve(this.Jn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:KE(n.createTime)}),WS.resolve()}},{key:"getNamedQuery",value:function(e,t){return WS.resolve(this.Yn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:oR(e.bundledQuery),readTime:KE(e.readTime)}}(t)),WS.resolve()}}]),e}(),dN=function(){function e(){et(this,e),this.overlays=new sT(PS.comparator),this.Xn=new Map}return nt(e,[{key:"getOverlay",value:function(e,t){return WS.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=SE();return WS.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ie(e,t,i)})),WS.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Xn.delete(n)),WS.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=SE(),i=t.length+1,a=new PS(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var s=o.getNext().value,u=s.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return WS.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new sT((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var s=i.get(o.largestBatchId);null===s&&(s=SE(),i=i.insert(o.largestBatchId,s)),s.set(o.getKey(),o)}}for(var u=SE(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return u.set(e,t)})),!(u.size()>=r)););return WS.resolve(u)}},{key:"ie",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new $C(t,n));var a=this.Xn.get(t);void 0===a&&(a=RE(),this.Xn.set(t,a)),this.Xn.set(t,a.add(n.key))}}]),e}(),pN=function(){function e(){et(this,e),this.Zn=new lT(vN.ts),this.es=new lT(vN.ns)}return nt(e,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(e,t){var n=new vN(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.rs(new vN(e,t))}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"us",value:function(e){var t=this,n=new PS(new CS([])),r=new vN(n,e),i=new vN(n,e+1),a=[];return this.es.forEachInRange([r,i],(function(e){t.rs(e),a.push(e.key)})),a}},{key:"cs",value:function(){var e=this;this.Zn.forEach((function(t){return e.rs(t)}))}},{key:"rs",value:function(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}},{key:"hs",value:function(e){var t=new PS(new CS([])),n=new vN(t,e),r=new vN(t,e+1),i=RE();return this.es.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new vN(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),vN=function(){function e(t,n){et(this,e),this.key=t,this.ls=n}return nt(e,null,[{key:"ts",value:function(e,t){return PS.comparator(e.key,t.key)||wS(e.ls,t.ls)}},{key:"ns",value:function(e,t){return wS(e.ls,t.ls)||PS.comparator(e.key,t.key)}}]),e}(),yN=function(){function e(t,n){et(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.fs=1,this.ds=new lT(vN.ts)}return nt(e,[{key:"checkEmpty",value:function(e){return WS.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new GC(i,t,n,r);this.mutationQueue.push(a);var o,s=it(r);try{for(s.s();!(o=s.n()).done;){var u=o.value;this.ds=this.ds.add(new vN(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}}catch(c){s.e(c)}finally{s.f()}return WS.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return WS.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return WS.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return WS.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(e){return WS.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new vN(t,0),i=new vN(t,Number.POSITIVE_INFINITY),a=[];return this.ds.forEachInRange([r,i],(function(e){var t=n._s(e.ls);a.push(t)})),WS.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new lT(wS);return t.forEach((function(e){var t=new vN(e,0),i=new vN(e,Number.POSITIVE_INFINITY);n.ds.forEachInRange([t,i],(function(e){r=r.add(e.ls)}))})),WS.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;PS.isDocumentKey(i)||(i=i.child(""));var a=new vN(new PS(i),0),o=new lT(wS);return this.ds.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)}),a),WS.resolve(this.gs(o))}},{key:"gs",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t._s(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;sS(0===this.ys(t.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return WS.forEach(t.mutations,(function(i){var a=new vN(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new vN(t,0),r=this.ds.firstAfterOrEqual(n);return WS.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,WS.resolve()}},{key:"ys",value:function(e,t){return this.ws(e)}},{key:"ws",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"_s",value:function(e){var t=this.ws(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),mN=function(){function e(t){et(this,e),this.ps=t,this.docs=new sT(PS.comparator),this.size=0}return nt(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.ps(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return WS.resolve(n?n.document.mutableCopy():$T.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=bE();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():$T.newInvalidDocument(e))})),WS.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=bE(),i=new PS(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),s=o.key,u=o.value.document;if(!t.isPrefixOf(s.path))break;s.path.length>t.length+1||VS(US(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return WS.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){oS()}},{key:"Is",value:function(e,t){return WS.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new gN(this)}},{key:"getSize",value:function(e){return WS.resolve(this.size)}}]),e}(),gN=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this)).zn=e,r}return nt(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.zn.addEntry(e,i)):t.zn.removeEntry(r)})),WS.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.zn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.zn.getEntries(e,t)}}]),n}(tN),kN=function(){function e(t){et(this,e),this.persistence=t,this.Ts=new gE((function(e){return JT(e)}),eI),this.lastRemoteSnapshotVersion=IS.min(),this.highestTargetId=0,this.Es=0,this.As=new pN,this.targetCount=0,this.Rs=ZR.An()}return nt(e,[{key:"forEachTarget",value:function(e,t){return this.Ts.forEach((function(e,n){return t(n)})),WS.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return WS.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return WS.resolve(this.Es)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Rs.next(),WS.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Es&&(this.Es=t),WS.resolve()}},{key:"vn",value:function(e){this.Ts.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Rs=new ZR(t),this.highestTargetId=t),e.sequenceNumber>this.Es&&(this.Es=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.vn(t),this.targetCount+=1,WS.resolve()}},{key:"updateTargetData",value:function(e,t){return this.vn(t),WS.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Ts.delete(t.target),this.As.us(t.targetId),this.targetCount-=1,WS.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Ts.forEach((function(o,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Ts.delete(o),a.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),WS.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return WS.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Ts.get(t)||null;return WS.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.As.ss(t,n),WS.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.As.os(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),WS.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.As.us(t),WS.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.As.hs(t);return WS.resolve(n)}},{key:"containsKey",value:function(e,t){return WS.resolve(this.As.containsKey(t))}}]),e}(),bN=function(){function e(t,n){var r=this;et(this,e),this.bs={},this.overlays={},this.Ps=new rT(0),this.vs=!1,this.vs=!0,this.referenceDelegate=t(this),this.Vs=new kN(this),this.indexManager=new IR,this.remoteDocumentCache=new mN((function(e){return r.referenceDelegate.Ss(e)})),this.wt=new XC(n),this.Ds=new fN(this.wt)}return nt(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new dN,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.bs[e.toKey()];return n||(n=new yN(t,this.referenceDelegate),this.bs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;nS("MemoryPersistence","Starting transaction:",e);var i=new _N(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(e){return r.referenceDelegate.xs(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ns",value:function(e,t){return WS.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),_N=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return nt(n)}(qS),wN=function(){function e(t){et(this,e),this.persistence=t,this.ks=new pN,this.Os=null}return nt(e,[{key:"Fs",get:function(){if(this.Os)return this.Os;throw oS()}},{key:"addReference",value:function(e,t,n){return this.ks.addReference(n,t),this.Fs.delete(n.toString()),WS.resolve()}},{key:"removeReference",value:function(e,t,n){return this.ks.removeReference(n,t),this.Fs.add(n.toString()),WS.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Fs.add(t.toString()),WS.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.ks.us(t.targetId).forEach((function(e){return n.Fs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Fs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Cs",value:function(){this.Os=new Set}},{key:"xs",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return WS.forEach(this.Fs,(function(r){var i=PS.fromPath(r);return t.$s(e,i).next((function(e){e||n.removeEntry(i,IS.min())}))})).next((function(){return t.Os=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next((function(e){e?n.Fs.delete(t.toString()):n.Fs.add(t.toString())}))}},{key:"Ss",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return WS.or([function(){return WS.resolve(n.ks.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ns(e,t)}])}}],[{key:"Ms",value:function(t){return new e(t)}}]),e}(),xN=function(){function e(t){et(this,e),this.wt=t}return nt(e,[{key:"O",value:function(e,t,n,r){var i=this,a=new HS("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xC,{unique:!0}),e.createObjectStore("documentMutations")}(e),SN(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=WS.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),SN(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:IS.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").K().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",xC,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return WS.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Bs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ls(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Us(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Ks(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:UC});t.createIndex("collectionPathOverlayIndex",jC,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",VC,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:EC});t.createIndex("documentKeyIndex",CC),t.createIndex("collectionGroupIndex",RC)}(e)})).next((function(){return i.Gs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.Qs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:DC}).createIndex("sequenceNumberIndex",LC,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:MC}).createIndex("documentKeyIndex",FC,{unique:!1})}(e)}))),o}},{key:"Ls",value:function(e){var t=0;return e.store("remoteDocuments").J((function(e,n){t+=UR(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Bs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.K().next((function(n){return WS.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.K("userMutationsIndex",i).next((function(r){return WS.forEach(r,(function(r){sS(r.userId===n.userId);var i=rR(t.wt,r);return FR(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Us",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.J((function(n,i){var a=new CS(n),o=function(e){return[0,kC(e)]}(a);r.push(t.get(o).next((function(n){return n?WS.resolve():function(n){return t.put({targetId:0,path:kC(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return WS.waitFor(r)}))}))}},{key:"qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:OC});var n=t.store("collectionParents"),r=new ER,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:kC(i)})}};return t.store("remoteDocuments").J({H:!0},(function(e,t){var n=new CS(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").J({H:!0},(function(e,t){var n=(0,o.Z)(e,3),r=(n[0],n[1]),a=(n[2],wC(r));return i(a.popLast())}))}))}},{key:"Ks",value:function(e){var t=this,n=e.store("targets");return n.J((function(e,r){var i=iR(r),a=aR(t.wt,i);return n.put(a)}))}},{key:"Gs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.J((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new PS(CS.fromString(i.document.name).popFirst(5)):i.noDocument?PS.fromSegments(i.noDocument.path):i.unknownDocument?PS.fromSegments(i.unknownDocument.path):oS()).path.toArray(),s={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(s))})).next((function(){return WS.waitFor(r)}))}},{key:"Qs",value:function(e,t){var n=this,r=t.store("mutations"),i=rN(this.wt),a=new bN(wN.Ms,this.wt.ne);return r.K().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:RE();rR(n.wt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),WS.forEach(r,(function(e,r){var o=new Xx(r),s=dR.se(n.wt,o),u=a.getIndexManager(o),c=jR.se(o,n.wt,u,a.referenceDelegate);return new hN(i,c,s,u).recalculateAndSaveOverlaysForDocumentKeys(new HC(t,rT.ot),e).next()}))}))}}]),e}();function SN(e){e.createObjectStore("targetDocuments",{keyPath:PC}).createIndex("documentTargetsIndex",AC,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",NC,{unique:!0}),e.createObjectStore("targetGlobal")}var TN="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",IN=function(){function e(t,n,r,i,a,o,s,u,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:14;if(et(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.js=a,this.window=o,this.document=s,this.Ws=c,this.zs=l,this.Hs=h,this.Ps=null,this.vs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Js=null,this.inForeground=!1,this.Ys=null,this.Xs=null,this.Zs=Number.NEGATIVE_INFINITY,this.ti=function(e){return Promise.resolve()},!e.V())throw new lS(cS.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new JR(this,i),this.ei=n+"main",this.wt=new XC(u),this.ni=new KS(this.ei,this.Hs,new xN(this.wt)),this.Vs=new WR(this.referenceDelegate,this.wt),this.remoteDocumentCache=rN(this.wt),this.Ds=new lR,this.window&&this.window.localStorage?this.si=this.window.localStorage:(this.si=null,!1===l&&rS("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return nt(e,[{key:"start",value:function(){var e=this;return this.ii().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new lS(cS.FAILED_PRECONDITION,TN);return e.ri(),e.oi(),e.ui(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Vs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ps=new rT(t,e.Ws)})).then((function(){e.vs=!0})).catch((function(t){return e.ni&&e.ni.close(),Promise.reject(t)}))}},{key:"ci",value:function(e){var t=this;return this.ti=function(){var n=Ae(Ne().mark((function n(r){return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ni.F(function(){var t=Ae(Ne().mark((function t(n){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.js.enqueueAndForget(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ii();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ii",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return CN(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.ai(t).next((function(t){t||(e.isPrimary=!1,e.js.enqueueRetryable((function(){return e.ti(!1)})))}))})).next((function(){return e.hi(t)})).next((function(n){return e.isPrimary&&!n?e.li(t).next((function(){return!1})):!!n&&e.fi(t).next((function(){return!0}))}))})).catch((function(t){if($S(t))return nS("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return nS("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.js.enqueueRetryable((function(){return e.ti(t)})),e.isPrimary=t}))}},{key:"ai",value:function(e){var t=this;return EN(e).get("owner").next((function(e){return WS.resolve(t.di(e))}))}},{key:"_i",value:function(e){return CN(e).delete(this.clientId)}},{key:"wi",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r,i,a=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.mi(this.Zs,18e5)){e.next=6;break}return this.Zs=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=KC(e,"clientMetadata");return t.K().next((function(e){var n=a.gi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return WS.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.si){n=it(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.si.removeItem(this.yi(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ui",value:function(){var e=this;this.Xs=this.js.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ii().then((function(){return e.wi()})).then((function(){return e.ui()}))}))}},{key:"di",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"hi",value:function(e){var t=this;return this.zs?WS.resolve(!0):EN(e).get("owner").next((function(n){if(null!==n&&t.mi(n.leaseTimestampMs,5e3)&&!t.pi(n.ownerId)){if(t.di(n)&&t.networkEnabled)return!0;if(!t.di(n)){if(!n.allowTabSynchronization)throw new lS(cS.FAILED_PRECONDITION,TN);return!1}}return!(!t.networkEnabled||!t.inForeground)||CN(e).K().next((function(e){return void 0===t.gi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&nS("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ae(Ne().mark((function e(){var t=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.vs=!1,this.Ii(),this.Xs&&(this.Xs.cancel(),this.Xs=null),this.Ti(),this.Ei(),e.next=7,this.ni.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new HC(e,rT.ot);return t.li(n).next((function(){return t._i(n)}))}));case 7:this.ni.close(),this.Ai();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"gi",value:function(e,t){var n=this;return e.filter((function(e){return n.mi(e.updateTimeMs,t)&&!n.pi(e.clientId)}))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return CN(t).K().next((function(t){return e.gi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.vs}},{key:"getMutationQueue",value:function(e,t){return jR.se(e,this.wt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new RR(e,this.wt.ne.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return dR.se(this.wt,e)}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(e,t,n){var r=this;nS("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",s=15===(i=this.Hs)?WC:14===i?ZC:13===i?BC:12===i?qC:11===i?zC:void oS();return this.ni.runTransaction(e,o,s,(function(i){return a=new HC(i,r.Ps?r.Ps.next():rT.ot),"readwrite-primary"===t?r.ai(a).next((function(e){return!!e||r.hi(a)})).next((function(t){if(!t)throw rS("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.js.enqueueRetryable((function(){return r.ti(!1)})),new lS(cS.FAILED_PRECONDITION,zS);return n(a)})).next((function(e){return r.fi(a).next((function(){return e}))})):r.bi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"bi",value:function(e){var t=this;return EN(e).get("owner").next((function(e){if(null!==e&&t.mi(e.leaseTimestampMs,5e3)&&!t.pi(e.ownerId)&&!t.di(e)&&!(t.zs||t.allowTabSynchronization&&e.allowTabSynchronization))throw new lS(cS.FAILED_PRECONDITION,TN)}))}},{key:"fi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return EN(e).put("owner",t)}},{key:"li",value:function(e){var t=this,n=EN(e);return n.get("owner").next((function(e){return t.di(e)?(nS("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):WS.resolve()}))}},{key:"mi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(rS("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ri",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ys=function(){e.js.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ii()}))},this.document.addEventListener("visibilitychange",this.Ys),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ti",value:function(){this.Ys&&(this.document.removeEventListener("visibilitychange",this.Ys),this.Ys=null)}},{key:"oi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Js=function(){t.Ii(),!Et()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.js.enterRestrictedMode(!0),t.js.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Js))}},{key:"Ei",value:function(){this.Js&&(this.window.removeEventListener("pagehide",this.Js),this.Js=null)}},{key:"pi",value:function(e){var t;try{var n=null!==(null===(t=this.si)||void 0===t?void 0:t.getItem(this.yi(e)));return nS("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return rS("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ii",value:function(){if(this.si)try{this.si.setItem(this.yi(this.clientId),String(Date.now()))}catch(Xk){rS("Failed to set zombie client id.",Xk)}}},{key:"Ai",value:function(){if(this.si)try{this.si.removeItem(this.yi(this.clientId))}catch(Xk){}}},{key:"yi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"V",value:function(){return KS.V()}}]),e}();function EN(e){return KC(e,"owner")}function CN(e){return KC(e,"clientMetadata")}function RN(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var NN=function(){function e(t,n,r,i){et(this,e),this.targetId=t,this.fromCache=n,this.Pi=r,this.vi=i}return nt(e,null,[{key:"Vi",value:function(t,n){var r,i=RE(),a=RE(),o=it(n.docChanges);try{for(o.s();!(r=o.n()).done;){var s=r.value;switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:a=a.add(s.doc.key)}}}catch(u){o.e(u)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),PN=function(){function e(){et(this,e),this.Si=!1}return nt(e,[{key:"initialize",value:function(e,t){this.Di=e,this.indexManager=t,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ci(e,t).next((function(a){return a||i.xi(e,t,r,n)})).next((function(n){return n||i.Ni(e,t)}))}},{key:"Ci",value:function(e,t){return WS.resolve(null)}},{key:"xi",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(IS.min())?this.Ni(e,t):this.Di.getDocuments(e,n).next((function(a){var o=i.ki(t,a);return i.Oi(t,o,n,r)?i.Ni(e,t):(tS()<=ln.DEBUG&&nS("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),NI(t)),i.Mi(e,o,t,FS(r,-1)))}))}},{key:"ki",value:function(e,t){var n=new lT(OI(e));return t.forEach((function(t,r){PI(e,r)&&(n=n.add(r))})),n}},{key:"Oi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(e,t){return tS()<=ln.DEBUG&&nS("QueryEngine","Using full collection scan to execute query:",NI(t)),this.Di.getDocumentsMatchingQuery(e,t,jS.min())}},{key:"Mi",value:function(e,t,n,r){return this.Di.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),AN=function(){function e(t,n,r,i){et(this,e),this.persistence=t,this.Fi=n,this.wt=i,this.$i=new sT(wS),this.Bi=new gE((function(e){return JT(e)}),eI),this.Li=new Map,this.Ui=t.getRemoteDocumentCache(),this.Vs=t.getTargetCache(),this.Ds=t.getBundleCache(),this.qi(r)}return nt(e,[{key:"qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hN(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.$i)}))}}]),e}();function ON(e,t,n,r){return new AN(e,t,n,r)}function DN(e,t){return LN.apply(this,arguments)}function LN(){return LN=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uS(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],s=RE(),u=it(t);try{for(u.s();!(i=u.n()).done;){var c=i.value;a.push(c.batchId);var l,h=it(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;s=s.add(f.key)}}catch(k){h.e(k)}finally{h.f()}}}catch(k){u.e(k)}finally{u.f()}var d,p=it(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=it(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;s=s.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,s).next((function(e){return{Ki:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),LN.apply(this,arguments)}function MN(e,t){var n=uS(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ui.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=WS.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);sS(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=RE(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function FN(e){var t=uS(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Vs.getLastRemoteSnapshotVersion(e)}))}function UN(e,t){var n=uS(e),r=t.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var o=[];t.targetChanges.forEach((function(a,s){var u=i.get(s);if(u){o.push(n.Vs.removeMatchingKeys(e,a.removedDocuments,s).next((function(){return n.Vs.addMatchingKeys(e,a.addedDocuments,s)})));var c=u.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(s)?c=c.withResumeToken(pT.EMPTY_BYTE_STRING,IS.min()).withLastLimboFreeSnapshotVersion(IS.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(s,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(u,c,a)&&o.push(n.Vs.updateTargetData(e,c))}}));var s=bE(),u=RE();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(jN(e,a,t.documentUpdates).next((function(e){s=e.Gi,u=e.Qi}))),!r.isEqual(IS.min())){var c=n.Vs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Vs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return WS.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,s,u)})).next((function(){return s}))})).then((function(e){return n.$i=i,e}))}function jN(e,t,n){var r=RE(),i=RE();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=bE();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(IS.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):nS("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Gi:r,Qi:i}}))}function VN(e,t){var n=uS(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function zN(e,t){var n=uS(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Vs.getTargetData(e,t).next((function(i){return i?(r=i,WS.resolve(r)):n.Vs.allocateTargetId(e).next((function(i){return r=new YC(t,i,0,e.currentSequenceNumber),n.Vs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.$i.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(e.targetId,e),n.Bi.set(t,e.targetId)),e}))}function qN(e,t,n){return BN.apply(this,arguments)}function BN(){return BN=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=uS(t),a=i.$i.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),$S(e.t1)){e.next=12;break}throw e.t1;case 12:nS("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.$i=i.$i.remove(n),i.Bi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),BN.apply(this,arguments)}function ZN(e,t,n){var r=uS(e),i=IS.min(),a=RE();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=uS(e),i=r.Bi.get(n);return void 0!==i?WS.resolve(r.$i.get(i)):r.Vs.getTargetData(t,n)}(r,e,II(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(e,t,n?i:IS.min(),n?a:RE())})).next((function(e){return KN(r,AI(t),e),{documents:e,ji:a}}))}))}function WN(e,t){var n=uS(e),r=uS(n.Vs),i=n.$i.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.te(e,t).next((function(e){return e?e.target:null}))}))}function HN(e,t){var n=uS(e),r=n.Li.get(t)||IS.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ui.getAllFromCollectionGroup(e,t,FS(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return KN(n,t,e),e}))}function KN(e,t,n){var r=IS.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Li.set(t,r)}function GN(e,t,n,r){return QN.apply(this,arguments)}function QN(){return QN=Ae(Ne().mark((function e(t,n,r,i){var a,o,s,u,c,l,h,f,d,p;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=uS(t),o=RE(),s=bE(),u=it(r);try{for(u.s();!(c=u.n()).done;)l=c.value,h=n.Wi(l.metadata.name),l.document&&(o=o.add(h)),(f=n.zi(l)).setReadTime(n.Hi(l.metadata.readTime)),s=s.insert(h,f)}catch(v){u.e(v)}finally{u.f()}return d=a.Ui.newChangeBuffer({trackRemovals:!0}),e.next=7,zN(a,function(e){return II(_I(CS.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return jN(e,d,s).next((function(t){return d.apply(e),t})).next((function(t){return a.Vs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Vs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Gi,t.Qi)})).next((function(){return t.Gi}))}))})));case 9:case"end":return e.stop()}}),e)}))),QN.apply(this,arguments)}function $N(e,t){return YN.apply(this,arguments)}function YN(){return YN=Ae(Ne().mark((function e(t,n){var r,i,a,o=arguments;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:RE(),e.next=3,zN(t,II(oR(n.bundledQuery)));case 3:return i=e.sent,a=uS(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=KE(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ds.saveNamedQuery(e,n);var o=i.withResumeToken(pT.EMPTY_BYTE_STRING,t);return a.$i=a.$i.insert(o.targetId,o),a.Vs.updateTargetData(e,o).next((function(){return a.Vs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Vs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ds.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),YN.apply(this,arguments)}function XN(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function JN(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function eP(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var tP=function(){function e(t,n,r,i){et(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return nt(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new lS(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(rS("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),nP=function(){function e(t,n,r){et(this,e),this.targetId=t,this.state=n,this.error=r}return nt(e,[{key:"Yi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Ji",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new lS(i.error.code,i.error.message))),a?new e(t,i.state,r):(rS("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),rP=function(){function e(t,n){et(this,e),this.clientId=t,this.activeTargetIds=n}return nt(e,null,[{key:"Ji",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=PE(),o=0;i&&o<r.activeTargetIds.length;++o)i=IT(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(rS("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),iP=function(){function e(t,n){et(this,e),this.clientId=t,this.onlineState=n}return nt(e,null,[{key:"Ji",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(rS("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),aP=function(){function e(){et(this,e),this.activeTargetIds=PE()}return nt(e,[{key:"Xi",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Zi",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Yi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),oP=function(){function e(t,n,r,i,a){et(this,e),this.window=t,this.js=n,this.persistenceKey=r,this.tr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new sT(wS),this.started=!1,this.ir=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.rr=XN(this.persistenceKey,this.tr),this.ur=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.sr=this.sr.insert(this.tr,new aP),this.cr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.ar=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.hr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.lr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.dr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.er)}return nt(e,[{key:"start",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r,i,a,o,s,u,c,l,h,f=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Ri();case 2:t=e.sent,n=it(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.tr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(XN(this.persistenceKey,i)))&&(o=rP.Ji(i,a))&&(this.sr=this.sr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this._r(),(s=this.storage.getItem(this.lr))&&(u=this.wr(s))&&this.mr(u),c=it(this.ir);try{for(c.s();!(l=c.n()).done;)h=l.value,this.nr(h)}catch(d){c.e(d)}finally{c.f()}this.ir=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ur,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.gr(this.sr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.sr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.yr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.yr(e,t,n),this.pr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(eP(this.persistenceKey,e));if(n){var r=nP.Ji(e,n);r&&(t=r.state)}}return this.Ir.Xi(e),this._r(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ir.Zi(e),this._r()}},{key:"isLocalQueryTarget",value:function(e){return this.Ir.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(eP(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Tr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.pr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Er(e)}},{key:"notifyBundleLoaded",value:function(e){this.Ar(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return nS("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){nS("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){nS("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"nr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(nS("SharedClientState","EVENT",n.key,n.newValue),n.key===this.rr)return void rS("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.js.enqueueRetryable(Ae(Ne().mark((function e(){var r,i,a,o,s,u,c;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.cr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Rr(n.key),e.abrupt("return",t.br(r,null));case 6:if(!(i=t.Pr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.br(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.ar.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.vr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Vr(a));case 16:e.next=41;break;case 18:if(!t.hr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Sr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Dr(o));case 23:e.next=41;break;case 25:if(n.key!==t.lr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.wr(n.newValue))){e.next=30;break}return e.abrupt("return",t.mr(s));case 30:e.next=41;break;case 32:if(n.key!==t.ur){e.next=37;break}u=function(e){var t=rT.ot;if(null!=e)try{var n=JSON.parse(e);sS("number"==typeof n),t=n}catch(e){rS("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),u!==rT.ot&&t.sequenceNumberHandler(u),e.next=41;break;case 37:if(n.key!==t.dr){e.next=41;break}return c=t.Cr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Nr(e)})));case 41:e.next=44;break;case 43:t.ir.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ir",get:function(){return this.sr.get(this.tr)}},{key:"_r",value:function(){this.setItem(this.rr,this.Ir.Yi())}},{key:"yr",value:function(e,t,n){var r=new tP(this.currentUser,e,t,n),i=JN(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Yi())}},{key:"pr",value:function(e){var t=JN(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Er",value:function(e){var t={clientId:this.tr,onlineState:e};this.storage.setItem(this.lr,JSON.stringify(t))}},{key:"Tr",value:function(e,t,n){var r=eP(this.persistenceKey,e),i=new nP(e,t,n);this.setItem(r,i.Yi())}},{key:"Ar",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.dr,t)}},{key:"Rr",value:function(e){var t=this.cr.exec(e);return t?t[1]:null}},{key:"Pr",value:function(e,t){var n=this.Rr(e);return rP.Ji(n,t)}},{key:"vr",value:function(e,t){var n=this.ar.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return tP.Ji(new Xx(i),r,t)}},{key:"Sr",value:function(e,t){var n=this.hr.exec(e),r=Number(n[1]);return nP.Ji(r,t)}},{key:"wr",value:function(e){return iP.Ji(e)}},{key:"Cr",value:function(e){return JSON.parse(e)}},{key:"Vr",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.kr(t.batchId,t.state,t.error));case 2:nS("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dr",value:function(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}},{key:"br",value:function(e,t){var n=this,r=t?this.sr.insert(e,t):this.sr.remove(e),i=this.gr(this.sr),a=this.gr(r),o=[],s=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||s.push(e)})),this.syncEngine.Mr(o,s).then((function(){n.sr=r}))}},{key:"mr",value:function(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"gr",value:function(e){var t=PE();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"V",value:function(e){return!(!e||!e.localStorage)}}]),e}(),sP=function(){function e(){et(this,e),this.Fr=new aP,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return nt(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.$r[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Fr.Zi(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.$r[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Fr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Fr=new aP,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),uP=function(){function e(){et(this,e)}return nt(e,[{key:"Br",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),cP=function(){function e(){var t=this;et(this,e),this.Lr=function(){return t.Ur()},this.qr=function(){return t.Kr()},this.Gr=[],this.Qr()}return nt(e,[{key:"Br",value:function(e){this.Gr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){nS("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=it(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Kr",value:function(){nS("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=it(this.Gr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),lP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},hP=function(){function e(t){et(this,e),this.jr=t.jr,this.Wr=t.Wr}return nt(e,[{key:"zr",value:function(e){this.Hr=e}},{key:"Jr",value:function(e){this.Yr=e}},{key:"onMessage",value:function(e){this.Xr=e}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(e){this.jr(e)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(e){this.Yr(e)}},{key:"no",value:function(e){this.Xr(e)}}]),e}(),fP=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return nt(n,[{key:"co",value:function(e,t,n,r){return new Promise((function(i,a){var o=new $x;o.listenOnce(Wx.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case Zx.NO_ERROR:var t=o.getResponseJson();nS("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Zx.TIMEOUT:nS("Connection",'RPC "'+e+'" timed out'),a(new lS(cS.DEADLINE_EXCEEDED,"Request time out"));break;case Zx.HTTP_ERROR:var n=o.getStatus();if(nS("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(cS).indexOf(t)>=0?t:cS.UNKNOWN}(r.status);a(new lS(s,r.message))}else a(new lS(cS.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new lS(cS.UNAVAILABLE,"Connection failed."));break;default:oS()}}finally{nS("Connection",'RPC "'+e+'" completed.')}}));var s=JSON.stringify(r);o.send(t,"POST",s,n,15)}))}},{key:"ho",value:function(e,t,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=qx(),a=Bx(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Gx({})),this.uo(o.initMessageHeaders,t,n),It()||Rt()||Tt().indexOf("Electron/")>=0||Nt()||Tt().indexOf("MSAppHost/")>=0||Ct()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");nS("Connection","Creating WebChannel: "+s,o);var u=i.createWebChannel(s,o),c=!1,l=!1,h=new hP({jr:function(e){l?nS("Connection","Not sending because WebChannel is closed:",e):(c||(nS("Connection","Opening WebChannel transport."),u.open(),c=!0),nS("Connection","WebChannel sending:",e),u.send(e))},Wr:function(){return u.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(u,Qx.EventType.OPEN,(function(){l||nS("Connection","WebChannel transport opened.")})),f(u,Qx.EventType.CLOSE,(function(){l||(l=!0,nS("Connection","WebChannel transport closed"),h.eo())})),f(u,Qx.EventType.ERROR,(function(e){l||(l=!0,iS("Connection","WebChannel transport errored:",e),h.eo(new lS(cS.UNAVAILABLE,"The operation could not be completed")))})),f(u,Qx.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];sS(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){nS("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=hE[e];if(void 0!==t)return mE(t)}(a),s=i.message;void 0===o&&(o=cS.INTERNAL,s="Unknown error status: "+a+" with message "+i.message),l=!0,h.eo(new lS(o,s)),u.close()}else nS("Connection","WebChannel received:",n),h.no(n)}})),f(a,Hx.STAT_EVENT,(function(e){e.stat===Kx.PROXY?nS("Connection","Detected buffering proxy"):e.stat===Kx.NOPROXY&&nS("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Zr()}),0),h}}]),n}(function(){function e(t){et(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.so=n+"://"+t.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return nt(e,[{key:"ro",value:function(e,t,n,r,i){var a=this.oo(e,t);nS("RestConnection","Sending: ",a,n);var o={};return this.uo(o,r,i),this.co(e,a,o,n).then((function(e){return nS("RestConnection","Received: ",e),e}),(function(t){throw iS("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"ao",value:function(e,t,n,r,i,a){return this.ro(e,t,n,r,i)}},{key:"uo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Jx,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"oo",value:function(e,t){var n=lP[e];return"".concat(this.so,"/v1/").concat(t,":").concat(n)}}]),e}());function dP(){return"undefined"!=typeof window?window:null}function pP(){return"undefined"!=typeof document?document:null}function vP(e){return new BE(e,!0)}var yP=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;et(this,e),this.js=t,this.timerId=n,this.lo=r,this.fo=i,this._o=a,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return nt(e,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(e){var t=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&nS("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return t.yo=Date.now(),e()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),e}(),mP=function(){function e(t,n,r,i,a,o,s,u){et(this,e),this.js=t,this.Ao=r,this.Ro=i,this.bo=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=u,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new yP(t,n)}return nt(e,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Do(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var e=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return e.Oo()})))}},{key:"Mo",value:function(e){this.Fo(),this.stream.send(e)}},{key:"Oo",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Co()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(){var e=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==t?this.So.reset():n&&n.code===cS.RESOURCE_EXHAUSTED?(rS(n.toString()),rS("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):n&&n.code===cS.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Jr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=(0,o.Z)(t,2),i=r[0],a=r[1];e.Po===n&&e.Uo(i,a)}),(function(n){t((function(){var t=new lS(cS.UNKNOWN,"Fetching auth token failed: "+n.message);return e.qo(t)}))}))}},{key:"Uo",value:function(e,t){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(e,t),this.stream.zr((function(){r((function(){return n.state=2,n.Vo=n.js.enqueueAfterDelay(n.Ro,1e4,(function(){return n.Co()&&(n.state=3),Promise.resolve()})),n.listener.zr()}))})),this.stream.Jr((function(e){r((function(){return n.qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"xo",value:function(){var e=this;this.state=5,this.So.Io(Ae(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"qo",value:function(e){return nS("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Lo",value:function(e){var t=this;return function(n){t.js.enqueueAndForget((function(){return t.Po===e?n():(nS("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),gP=function(e){at(n,e);var t=ct(n);function n(e,r,i,a,o,s){var u;return et(this,n),(u=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u}return nt(n,[{key:"Ko",value:function(e,t){return this.bo.ho("Listen",e,t)}},{key:"onMessage",value:function(e){this.So.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:oS()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.dt?(sS(void 0===t||"string"==typeof t),pT.fromBase64String(t||"")):(sS(void 0===t||t instanceof Uint8Array),pT.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,s=o&&function(e){var t=void 0===e.code?cS.UNKNOWN:mE(e.code);return new lS(t,e.message||"")}(o);n=new ME(r,i,a,s||null)}else if("documentChange"in t){t.documentChange;var u=t.documentChange;u.document,u.document.name,u.document.updateTime;var c=YE(e,u.document.name),l=KE(u.document.updateTime),h=new GT({mapValue:{fields:u.document.fields}}),f=$T.newFoundDocument(c,l,h),d=u.targetIds||[],p=u.removedTargetIds||[];n=new DE(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=YE(e,v.document),m=v.readTime?KE(v.readTime):IS.min(),g=$T.newNoDocument(y,m),k=v.removedTargetIds||[];n=new DE([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=YE(e,b.document),w=b.removedTargetIds||[];n=new DE([],w,_,null)}else{if(!("filter"in t))return oS();t.filter;var x=t.filter;x.targetId;var S=x.count||0,T=new vE(S),I=x.targetId;n=new LE(I,T)}return n}(this.wt,e),n=function(e){if(!("targetChange"in e))return IS.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?IS.min():t.readTime?KE(t.readTime):IS.min()}(e);return this.listener.Go(t,n)}},{key:"Qo",value:function(e){var t={};t.database=eC(this.wt),t.addTarget=function(e,t){var n,r=t.target;return(n=tI(r)?{documents:sC(e,r)}:{query:uC(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=WE(e,t.resumeToken):t.snapshotVersion.compareTo(IS.min())>0&&(n.readTime=ZE(e,t.snapshotVersion.toTimestamp())),n}(this.wt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return oS()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,e);n&&(t.labels=n),this.Mo(t)}},{key:"jo",value:function(e){var t={};t.database=eC(this.wt),t.removeTarget=e,this.Mo(t)}}]),n}(mP),kP=function(e){at(n,e);var t=ct(n);function n(e,r,i,a,o,s){var u;return et(this,n),(u=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,s)).wt=o,u.Wo=!1,u}return nt(n,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,Mr(ot(n.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(e,t){return this.bo.ho("Write",e,t)}},{key:"onMessage",value:function(e){if(sS(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();var t=function(e,t){return e&&e.length>0?(sS(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?KE(e.updateTime):KE(t);return n.isEqual(IS.min())&&(n=KE(t)),new YI(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=KE(e.commitTime);return this.listener.Jo(n,t)}return sS(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var e={};e.database=eC(this.wt),this.Mo(e)}},{key:"Ho",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return aC(t.wt,e)}))};this.Mo(n)}}]),n}(mP),bP=function(e){at(n,e);var t=ct(n);function n(e,r,i,a){var o;return et(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.bo=i,o.wt=a,o.Zo=!1,o}return nt(n,[{key:"tu",value:function(){if(this.Zo)throw new lS(cS.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(e,t,n){var r=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=(0,o.Z)(i,2),s=a[0],u=a[1];return r.bo.ro(e,t,n,s,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===cS.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new lS(cS.UNKNOWN,e.toString())}))}},{key:"ao",value:function(e,t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var s=(0,o.Z)(a,2),u=s[0],c=s[1];return i.bo.ao(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===cS.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new lS(cS.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),n}(function(){return nt((function e(){et(this,e)}))}()),_P=function(){function e(t,n){et(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return nt(e,[{key:"iu",value:function(){var e=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.nu=null,e.ou("Backend didn't respond within 10 seconds."),e.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ru("Offline")))}},{key:"set",value:function(e){this.cu(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}},{key:"ru",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"ou",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(rS(t),this.su=!1):nS("OnlineStateTracker",t)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),e}(),wP=nt((function e(t,n,r,i,a){var o=this;et(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=a,this.du.Br((function(e){r.enqueueAndForget(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=OP(o),!e.t0){e.next=5;break}return nS("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=uS(t)).lu.add(4),e.next=4,TP(n);case 4:return n._u.set("Unknown"),n.lu.delete(4),e.next=8,xP(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this._u=new _P(r,i)}));function xP(e){return SP.apply(this,arguments)}function SP(){return SP=Ae(Ne().mark((function e(t){var n,r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!OP(t)){e.next=18;break}n=it(t.fu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),SP.apply(this,arguments)}function TP(e){return IP.apply(this,arguments)}function IP(){return IP=Ae(Ne().mark((function e(t){var n,r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=it(t.fu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),IP.apply(this,arguments)}function EP(e,t){var n=uS(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),AP(n)?PP(n):uA(n).Co()&&RP(n,t))}function CP(e,t){var n=uS(e),r=uA(n);n.hu.delete(t),r.Co()&&NP(n,t),0===n.hu.size&&(r.Co()?r.ko():OP(n)&&n._u.set("Unknown"))}function RP(e,t){e.wu.Nt(t.targetId),uA(e).Qo(t)}function NP(e,t){e.wu.Nt(t),uA(e).jo(t)}function PP(e){e.wu=new UE({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},te:function(t){return e.hu.get(t)||null}}),uA(e).start(),e._u.iu()}function AP(e){return OP(e)&&!uA(e).Do()&&e.hu.size>0}function OP(e){return 0===uS(e).lu.size}function DP(e){e.wu=void 0}function LP(e){return MP.apply(this,arguments)}function MP(){return MP=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hu.forEach((function(e,n){RP(t,e)}));case 1:case"end":return e.stop()}}),e)}))),MP.apply(this,arguments)}function FP(e,t){return UP.apply(this,arguments)}function UP(){return UP=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:DP(t),AP(t)?(t._u.uu(n),PP(t)):t._u.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),UP.apply(this,arguments)}function jP(e,t,n){return VP.apply(this,arguments)}function VP(){return VP=Ae(Ne().mark((function e(t,n,r){var i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._u.set("Online"),!(n instanceof ME&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ae(Ne().mark((function e(t,n){var r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=it(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.hu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.hu.delete(o),t.wu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),nS("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,zP(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof DE?t.wu.Ut(n):n instanceof LE?t.wu.zt(n):t.wu.Gt(n),r.isEqual(IS.min())){e.next=29;break}return e.prev=14,e.next=17,FN(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.wu.Yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.hu.get(r);i&&e.hu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.hu.get(t);if(n){e.hu.set(t,n.withResumeToken(pT.EMPTY_BYTE_STRING,n.snapshotVersion)),NP(e,t);var r=new YC(n.target,t,1,n.sequenceNumber);RP(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),nS("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,zP(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),VP.apply(this,arguments)}function zP(e,t,n){return qP.apply(this,arguments)}function qP(){return qP=Ae(Ne().mark((function e(t,n,r){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($S(n)){e.next=2;break}throw n;case 2:return t.lu.add(1),e.next=5,TP(t);case 5:t._u.set("Offline"),r||(r=function(){return FN(t.localStore)}),t.asyncQueue.enqueueRetryable(Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nS("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.lu.delete(1),e.next=6,xP(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),qP.apply(this,arguments)}function BP(e,t){return t().catch((function(n){return zP(e,n,t)}))}function ZP(e){return WP.apply(this,arguments)}function WP(){return WP=Ae(Ne().mark((function e(t){var n,r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=uS(t),r=cA(n),i=n.au.length>0?n.au[n.au.length-1].batchId:-1;case 2:if(!HP(n)){e.next=19;break}return e.prev=3,e.next=6,VN(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.au.length&&r.ko(),e.abrupt("break",19);case 10:i=a.batchId,KP(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,zP(n,e.t0);case 17:e.next=2;break;case 19:GP(n)&&QP(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),WP.apply(this,arguments)}function HP(e){return OP(e)&&e.au.length<10}function KP(e,t){e.au.push(t);var n=cA(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function GP(e){return OP(e)&&!cA(e).Do()&&e.au.length>0}function QP(e){cA(e).start()}function $P(e){return YP.apply(this,arguments)}function YP(){return YP=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:cA(t).Xo();case 1:case"end":return e.stop()}}),e)}))),YP.apply(this,arguments)}function XP(e){return JP.apply(this,arguments)}function JP(){return JP=Ae(Ne().mark((function e(t){var n,r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=cA(t),r=it(t.au);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Ho(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),JP.apply(this,arguments)}function eA(e,t,n){return tA.apply(this,arguments)}function tA(){return tA=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.au.shift(),a=QC.from(i,n,r),e.next=3,BP(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,ZP(t);case 5:case"end":return e.stop()}}),e)}))),tA.apply(this,arguments)}function nA(e,t){return rA.apply(this,arguments)}function rA(){return rA=Ae(Ne().mark((function e(t,n){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&cA(t).zo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ae(Ne().mark((function e(t,n){var r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!yE(i=n.code)||i===cS.ABORTED){e.next=7;break}return r=t.au.shift(),cA(t).No(),e.next=5,BP(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ZP(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:GP(t)&&QP(t);case 5:case"end":return e.stop()}}),e)}))),rA.apply(this,arguments)}function iA(e,t){return aA.apply(this,arguments)}function aA(){return aA=Ae(Ne().mark((function e(t,n){var r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=uS(t)).asyncQueue.verifyOperationInProgress(),nS("RemoteStore","RemoteStore received new credentials"),i=OP(r),r.lu.add(3),e.next=6,TP(r);case 6:return i&&r._u.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.lu.delete(3),e.next=12,xP(r);case 12:case"end":return e.stop()}}),e)}))),aA.apply(this,arguments)}function oA(e,t){return sA.apply(this,arguments)}function sA(){return sA=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=uS(t),!n){e.next=7;break}return r.lu.delete(2),e.next=5,xP(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.lu.add(2),e.next=12,TP(r);case 12:r._u.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),sA.apply(this,arguments)}function uA(e){return e.mu||(e.mu=function(e,t,n){var r=uS(e);return r.tu(),new gP(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:LP.bind(null,e),Jr:FP.bind(null,e),Go:jP.bind(null,e)}),e.fu.push(function(){var t=Ae(Ne().mark((function t(n){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.mu.No(),AP(e)?PP(e):e._u.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.mu.stop();case 6:DP(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.mu}function cA(e){return e.gu||(e.gu=function(e,t,n){var r=uS(e);return r.tu(),new kP(t,r.bo,r.authCredentials,r.appCheckCredentials,r.wt,n)}(e.datastore,e.asyncQueue,{zr:$P.bind(null,e),Jr:nA.bind(null,e),Yo:XP.bind(null,e),Jo:eA.bind(null,e)}),e.fu.push(function(){var t=Ae(Ne().mark((function t(n){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.gu.No(),t.next=4,ZP(e);case 4:t.next=9;break;case 6:return t.next=8,e.gu.stop();case 8:e.au.length>0&&(nS("RemoteStore","Stopping write stream with ".concat(e.au.length," pending writes")),e.au=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.gu}var lA=function(){function e(t,n,r,i,a){et(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new hS,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return nt(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new lS(cS.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function hA(e,t){if(rS("AsyncQueue","".concat(t,": ").concat(e)),$S(e))return new lS(cS.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var fA=function(){function e(t){et(this,e),this.comparator=t?function(e,n){return t(e,n)||PS.comparator(e.key,n.key)}:function(e,t){return PS.comparator(e.key,t.key)},this.keyedMap=wE(),this.sortedSet=new sT(this.comparator)}return nt(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),dA=function(){function e(){et(this,e),this.yu=new sT(PS.comparator)}return nt(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):oS():this.yu=this.yu.insert(t,e)}},{key:"pu",value:function(){var e=[];return this.yu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),pA=function(){function e(t,n,r,i,a,o,s,u){et(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=u}return nt(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&CI(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,fA.emptySet(n),a,r,i,!0,!1)}}]),e}(),vA=nt((function e(){et(this,e),this.Iu=void 0,this.listeners=[]})),yA=nt((function e(){et(this,e),this.queries=new gE((function(e){return RI(e)}),CI),this.onlineState="Unknown",this.Tu=new Set}));function mA(e,t){return gA.apply(this,arguments)}function gA(){return gA=Ae(Ne().mark((function e(t,n){var r,i,a,o,s;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=uS(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new vA),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Iu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=hA(e.t0,"Initialization of query '".concat(NI(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,o),o.listeners.push(n),n.Eu(r.onlineState),o.Iu&&n.Au(o.Iu)&&xA(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),gA.apply(this,arguments)}function kA(e,t){return bA.apply(this,arguments)}function bA(){return bA=Ae(Ne().mark((function e(t,n){var r,i,a,o,s;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=uS(t),i=n.query,a=!1,(o=r.queries.get(i))&&(s=o.listeners.indexOf(n))>=0&&(o.listeners.splice(s,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),bA.apply(this,arguments)}function _A(e,t){var n,r=uS(e),i=!1,a=it(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=o.query,u=r.queries.get(s);if(u){var c,l=it(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Au(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.Iu=o}}}catch(h){a.e(h)}finally{a.f()}i&&xA(r)}function wA(e,t,n){var r=uS(e),i=r.queries.get(t);if(i){var a,o=it(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(s){o.e(s)}finally{o.f()}}r.queries.delete(t)}function xA(e){e.Tu.forEach((function(e){e.next()}))}var SA=function(){function e(t,n,r){et(this,e),this.query=t,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=r||{}}return nt(e,[{key:"Au",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=it(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new pA(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.bu?this.vu(e)&&(this.Ru.next(e),a=!0):this.Vu(e,this.onlineState)&&(this.Su(e),a=!0),this.Pu=e,a}},{key:"onError",value:function(e){this.Ru.error(e)}},{key:"Eu",value:function(e){this.onlineState=e;var t=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}},{key:"Vu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Du||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"vu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(e){e=pA.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}]),e}(),TA=function(){function e(t,n){et(this,e),this.payload=t,this.byteLength=n}return nt(e,[{key:"Cu",value:function(){return"metadata"in this.payload}}]),e}(),IA=function(){function e(t){et(this,e),this.wt=t}return nt(e,[{key:"Wi",value:function(e){return YE(this.wt,e)}},{key:"zi",value:function(e){return e.metadata.exists?rC(this.wt,e.document,!1):$T.newNoDocument(this.Wi(e.metadata.name),this.Hi(e.metadata.readTime))}},{key:"Hi",value:function(e){return KE(e)}}]),e}(),EA=function(){function e(t,n,r){et(this,e),this.xu=t,this.localStore=n,this.wt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CA(t)}return nt(e,[{key:"Nu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=CS.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ku",value:function(e){var t,n=new Map,r=new IA(this.wt),i=it(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,s=r.Wi(a.metadata.name),u=it(a.metadata.queries);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=(n.get(c)||RE()).add(s);n.set(c,l)}}catch(h){u.e(h)}finally{u.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,GN(this.localStore,new IA(this.wt),this.documents,this.xu.id);case 2:t=e.sent,n=this.ku(this.documents),r=it(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,$N(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Ou:this.collectionGroups,Mu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function CA(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var RA=nt((function e(t){et(this,e),this.key=t})),NA=nt((function e(t){et(this,e),this.key=t})),PA=function(){function e(t,n){et(this,e),this.query=t,this.Fu=n,this.$u=null,this.current=!1,this.Bu=RE(),this.mutatedKeys=RE(),this.Lu=OI(t),this.Uu=new fA(this.Lu)}return nt(e,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(e,t){var n=this,r=t?t.Gu:new dA,i=t?t.Uu:this.Uu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=PI(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Qu(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.Lu(h,u)>0||c&&n.Lu(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Uu:o,Gu:r,Oi:s,mutatedKeys:a}}},{key:"Qu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;var a=e.Gu.pu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oS()}};return n(e)-n(t)}(e.type,t.type)||r.Lu(e.doc,t.doc)})),this.ju(n);var o=t?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==a.length||u?{snapshot:new pA(this.query,e.Uu,i,a,e.mutatedKeys,0===s,u,!1),zu:o}:{zu:o}}},{key:"Eu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new dA,mutatedKeys:this.mutatedKeys,Oi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}},{key:"ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Fu=t.Fu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Fu=t.Fu.delete(e)})),this.current=e.current)}},{key:"Wu",value:function(){var e=this;if(!this.current)return[];var t=this.Bu;this.Bu=RE(),this.Uu.forEach((function(t){e.Hu(t.key)&&(e.Bu=e.Bu.add(t.key))}));var n=[];return t.forEach((function(t){e.Bu.has(t)||n.push(new NA(t))})),this.Bu.forEach((function(e){t.has(e)||n.push(new RA(e))})),n}},{key:"Ju",value:function(e){this.Fu=e.ji,this.Bu=RE();var t=this.Ku(e.documents);return this.applyChanges(t,!0)}},{key:"Yu",value:function(){return pA.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),e}(),AA=nt((function e(t,n,r){et(this,e),this.query=t,this.targetId=n,this.view=r})),OA=nt((function e(t){et(this,e),this.key=t,this.Xu=!1})),DA=function(){function e(t,n,r,i,a,o){et(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Zu={},this.tc=new gE((function(e){return RI(e)}),CI),this.ec=new Map,this.nc=new Set,this.sc=new sT(PS.comparator),this.ic=new Map,this.rc=new pN,this.oc={},this.uc=new Map,this.cc=ZR.Rn(),this.onlineState="Unknown",this.ac=void 0}return nt(e,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),e}();function LA(e,t){return MA.apply(this,arguments)}function MA(){return MA=Ae(Ne().mark((function e(t,n){var r,i,a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=CO(t),!(o=r.tc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.Yu(),e.next=15;break;case 6:return e.next=8,zN(r.localStore,II(n));case 8:return s=e.sent,r.isPrimaryClient&&EP(r.remoteStore,s),u=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=14,FA(r,n,i,"current"===u);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),MA.apply(this,arguments)}function FA(e,t,n,r){return UA.apply(this,arguments)}function UA(){return UA=Ae(Ne().mark((function e(t,n,r,i){var a,o,s,u,c,l;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.hc=function(e,n,r){return function(){var e=Ae(Ne().mark((function e(t,n,r,i){var a,o,s;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Ku(r),e.t0=a.Oi,!e.t0){e.next=6;break}return e.next=5,ZN(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Ku(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(iO(t,n.targetId,s.zu),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,ZN(t.localStore,n,!0);case 3:return a=e.sent,o=new PA(n,a.ji),s=o.Ku(a.documents),u=OE.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),iO(t,r,c.zu),l=new AA(n,r,o),e.abrupt("return",(t.tc.set(n,l),t.ec.has(r)?t.ec.get(r).push(n):t.ec.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),UA.apply(this,arguments)}function jA(e,t){return VA.apply(this,arguments)}function VA(){return VA=Ae(Ne().mark((function e(t,n){var r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=uS(t),i=r.tc.get(n),!((a=r.ec.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ec.set(i.targetId,a.filter((function(e){return!CI(e,n)}))),void r.tc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,qN(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),CP(r.remoteStore,i.targetId),nO(r,i.targetId)})).catch(BS);case 9:e.next=14;break;case 11:return nO(r,i.targetId),e.next=14,qN(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),VA.apply(this,arguments)}function zA(e,t,n){return qA.apply(this,arguments)}function qA(){return qA=Ae(Ne().mark((function e(t,n,r){var i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=RO(t),e.prev=1,e.next=4,function(e,t){var n,r,i=uS(e),a=TS.now(),o=t.reduce((function(e,t){return e.add(t.key)}),RE());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var s=bE(),u=RE();return i.Ui.getEntries(e,o).next((function(e){(s=e).forEach((function(e,t){t.isValidDocument()||(u=u.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,s)})).next((function(r){n=r;var o,s=[],u=it(t);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=iE(c,n.get(c.key).overlayedDocument);null!=l&&s.push(new sE(c.key,l,QT(l.value.mapValue),XI.exists(!0)))}}catch(h){u.e(h)}finally{u.f()}return i.mutationQueue.addMutationBatch(e,a,s,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:xE(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.oc[e.currentUser.toKey()];r||(r=new sT(wS)),r=r.insert(t,n),e.oc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,sO(i,a.changes);case 9:return e.next=11,ZP(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=hA(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),qA.apply(this,arguments)}function BA(e,t){return ZA.apply(this,arguments)}function ZA(){return ZA=Ae(Ne().mark((function e(t,n){var r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uS(t),e.prev=1,e.next=4,UN(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.ic.get(t);n&&(sS(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.Xu=!0:e.modifiedDocuments.size>0?sS(n.Xu):e.removedDocuments.size>0&&(sS(n.Xu),n.Xu=!1))})),e.next=8,sO(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,BS(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),ZA.apply(this,arguments)}function WA(e,t,n){var r=uS(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(e,n){var r=n.view.Eu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=uS(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=it(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Eu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&xA(n)}(r.eventManager,t),i.length&&r.Zu.Go(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function HA(e,t,n){return KA.apply(this,arguments)}function KA(){return KA=Ae(Ne().mark((function e(t,n,r){var i,a,o,s,u,c;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=uS(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.ic.get(n),!(o=a&&a.key)){e.next=14;break}return s=(s=new sT(PS.comparator)).insert(o,$T.newNoDocument(o,IS.min())),u=RE().add(o),c=new AE(IS.min(),new Map,new lT(wS),s,u),e.next=9,BA(i,c);case 9:i.sc=i.sc.remove(o),i.ic.delete(n),oO(i),e.next=16;break;case 14:return e.next=16,qN(i.localStore,n,!1).then((function(){return nO(i,n,r)})).catch(BS);case 16:case"end":return e.stop()}}),e)}))),KA.apply(this,arguments)}function GA(e,t){return QA.apply(this,arguments)}function QA(){return QA=Ae(Ne().mark((function e(t,n){var r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uS(t),i=n.batch.batchId,e.prev=1,e.next=4,MN(r.localStore,n);case 4:return a=e.sent,tO(r,i,null),eO(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,sO(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,BS(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),QA.apply(this,arguments)}function $A(e,t,n){return YA.apply(this,arguments)}function YA(){return YA=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=uS(t),e.prev=1,e.next=4,function(e,t){var n=uS(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return sS(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,tO(i,n,r),eO(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,sO(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,BS(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),YA.apply(this,arguments)}function XA(e,t){return JA.apply(this,arguments)}function JA(){return JA=Ae(Ne().mark((function e(t,n){var r,i,a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OP((r=uS(t)).remoteStore)||nS("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=uS(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.uc.get(i)||[]).push(n),r.uc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=hA(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),JA.apply(this,arguments)}function eO(e,t){(e.uc.get(t)||[]).forEach((function(e){e.resolve()})),e.uc.delete(t)}function tO(e,t,n){var r=uS(e),i=r.oc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.oc[r.currentUser.toKey()]=i}}function nO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=it(e.ec.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.tc.delete(a),n&&e.Zu.lc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ec.delete(t),e.isPrimaryClient&&e.rc.us(t).forEach((function(t){e.rc.containsKey(t)||rO(e,t)}))}function rO(e,t){e.nc.delete(t.path.canonicalString());var n=e.sc.get(t);null!==n&&(CP(e.remoteStore,n),e.sc=e.sc.remove(t),e.ic.delete(n),oO(e))}function iO(e,t,n){var r,i=it(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof RA?(e.rc.addReference(a.key,t),aO(e,a)):a instanceof NA?(nS("SyncEngine","Document no longer in limbo: "+a.key),e.rc.removeReference(a.key,t),e.rc.containsKey(a.key)||rO(e,a.key)):oS()}}catch(o){i.e(o)}finally{i.f()}}function aO(e,t){var n=t.key,r=n.path.canonicalString();e.sc.get(n)||e.nc.has(r)||(nS("SyncEngine","New document in limbo: "+n),e.nc.add(r),oO(e))}function oO(e){for(;e.nc.size>0&&e.sc.size<e.maxConcurrentLimboResolutions;){var t=e.nc.values().next().value;e.nc.delete(t);var n=new PS(CS.fromString(t)),r=e.cc.next();e.ic.set(r,new OA(n)),e.sc=e.sc.insert(n,r),EP(e.remoteStore,new YC(II(_I(n.path)),r,2,rT.ot))}}function sO(e,t,n){return uO.apply(this,arguments)}function uO(){return uO=Ae(Ne().mark((function e(t,n,r){var i,a,o,s;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=uS(t),a=[],o=[],s=[],e.t0=i.tc.isEmpty(),e.t0){e.next=9;break}return i.tc.forEach((function(e,t){s.push(i.hc(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=NN.Vi(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(s);case 6:return i.Zu.Go(a),e.next=9,function(){var e=Ae(Ne().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uS(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return WS.forEach(n,(function(t){return WS.forEach(t.Pi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return WS.forEach(t.vi,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),$S(e.t0)){e.next=10;break}throw e.t0;case 10:nS("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=it(n);try{for(i.s();!(a=i.n()).done;)o=a.value,s=o.targetId,o.fromCache||(u=r.$i.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),r.$i=r.$i.insert(s,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),uO.apply(this,arguments)}function cO(e,t){return lO.apply(this,arguments)}function lO(){return lO=Ae(Ne().mark((function e(t,n){var r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=uS(t)).currentUser.isEqual(n)){e.next=11;break}return nS("SyncEngine","User change. New user:",n.toKey()),e.next=5,DN(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.uc.forEach((function(e){e.forEach((function(e){e.reject(new lS(cS.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,sO(r,i.Ki);case 11:case"end":return e.stop()}}),e)}))),lO.apply(this,arguments)}function hO(e,t){var n=uS(e),r=n.ic.get(t);if(r&&r.Xu)return RE().add(r.key);var i=RE(),a=n.ec.get(t);if(!a)return i;var o,s=it(a);try{for(s.s();!(o=s.n()).done;){var u=o.value,c=n.tc.get(u);i=i.unionWith(c.view.qu)}}catch(l){s.e(l)}finally{s.f()}return i}function fO(e,t){return dO.apply(this,arguments)}function dO(){return dO=Ae(Ne().mark((function e(t,n){var r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uS(t),e.next=3,ZN(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Ju(i),e.abrupt("return",(r.isPrimaryClient&&iO(r,n.targetId,a.zu),a));case 6:case"end":return e.stop()}}),e)}))),dO.apply(this,arguments)}function pO(e,t){return vO.apply(this,arguments)}function vO(){return vO=Ae(Ne().mark((function e(t,n){var r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uS(t),e.abrupt("return",HN(r.localStore,n).then((function(e){return sO(r,e)})));case 2:case"end":return e.stop()}}),e)}))),vO.apply(this,arguments)}function yO(e,t,n,r){return mO.apply(this,arguments)}function mO(){return mO=Ae(Ne().mark((function e(t,n,r,i){var a,o;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=uS(t),e.next=3,function(e,t){var n=uS(e),r=uS(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.yn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):WS.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ZP(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(tO(a,n,i||null),eO(a,n),function(e,t){uS(uS(e).mutationQueue).In(t)}(a.localStore,n)):oS();case 11:return e.next=13,sO(a,o);case 13:e.next=16;break;case 15:nS("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),mO.apply(this,arguments)}function gO(e,t){return kO.apply(this,arguments)}function kO(){return kO=Ae(Ne().mark((function e(t,n){var r,i,a,o,s,u,c,l;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(CO(r=uS(t)),RO(r),!0!==n||!0===r.ac){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,bO(r,i.toArray());case 5:return a=e.sent,r.ac=!0,e.next=9,oA(r.remoteStore,!0);case 9:o=it(a);try{for(o.s();!(s=o.n()).done;)u=s.value,EP(r.remoteStore,u)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.ac){e.next=25;break}return c=[],l=Promise.resolve(),r.ec.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return nO(r,t),qN(r.localStore,t,!0)})),CP(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,bO(r,c);case 21:return function(e){var t=uS(e);t.ic.forEach((function(e,n){CP(t.remoteStore,n)})),t.rc.cs(),t.ic=new Map,t.sc=new sT(PS.comparator)}(r),r.ac=!1,e.next=25,oA(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),kO.apply(this,arguments)}function bO(e,t,n){return _O.apply(this,arguments)}function _O(){return _O=Ae(Ne().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f,d,p,v,y,m;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=uS(t),a=[],o=[],s=it(n),e.prev=2,s.s();case 4:if((u=s.n()).done){e.next=45;break}if(c=u.value,l=void 0,!(h=i.ec.get(c))||0===h.length){e.next=34;break}return e.next=11,zN(i.localStore,II(h[0]));case 11:l=e.sent,f=it(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.tc.get(p),e.next=20,fO(i,v);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,WN(i.localStore,c);case 36:return m=e.sent,e.next=39,zN(i.localStore,m);case 39:return l=e.sent,e.next=42,FA(i,wO(m),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.Zu.Go(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),_O.apply(this,arguments)}function wO(e){return bI(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function xO(e){var t=uS(e);return uS(uS(t.localStore).persistence).Ri()}function SO(e,t,n,r){return TO.apply(this,arguments)}function TO(){return TO=Ae(Ne().mark((function e(t,n,r,i){var a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=uS(t)).ac){e.next=3;break}return e.abrupt("return",void nS("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ec.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,HN(a.localStore,AI(o[0]));case 10:return s=e.sent,u=AE.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,sO(a,s,u);case 14:return e.abrupt("break",20);case 15:return e.next=17,qN(a.localStore,n,!0);case 17:return nO(a,n,i),e.abrupt("break",20);case 19:oS();case 20:case"end":return e.stop()}}),e)}))),TO.apply(this,arguments)}function IO(e,t,n){return EO.apply(this,arguments)}function EO(){return EO=Ae(Ne().mark((function e(t,n,r){var i,a,o,s,u,c,l,h,f;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=CO(t)).ac){e.next=45;break}a=it(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(s=o.value,!i.ec.has(s)){e.next=10;break}return nS("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,WN(i.localStore,s);case 12:return u=e.sent,e.next=15,zN(i.localStore,u);case 15:return c=e.sent,e.next=18,FA(i,wO(u),c.targetId,!1);case 18:EP(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=it(r),e.prev=30,f=Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ec.has(t),!e.t0){e.next=5;break}return e.next=5,qN(i.localStore,t,!1).then((function(){CP(i.remoteStore,t),nO(i,t)})).catch(BS);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),EO.apply(this,arguments)}function CO(e){var t=uS(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=BA.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=hO.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=HA.bind(null,t),t.Zu.Go=_A.bind(null,t.eventManager),t.Zu.lc=wA.bind(null,t.eventManager),t}function RO(e){var t=uS(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=GA.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$A.bind(null,t),t}function NO(e,t,n){var r=uS(e);(function(){var e=Ae(Ne().mark((function e(t,n,r){var i,a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=uS(e),r=KE(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ds.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(CA(i)),a=new EA(i,t.localStore,n.wt),e.next=15,n.fc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Nu(o);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.fc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return u=e.sent,e.next=31,sO(t,u.Mu,void 0);case 31:return e.next=33,function(e,t){var n=uS(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ds.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(u.progress),e.abrupt("return",Promise.resolve(u.Ou));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(iS("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var PO=function(){function e(){et(this,e),this.synchronizeTabs=!1}return nt(e,[{key:"initialize",value:function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.wt=vP(t.databaseInfo.databaseId),this.sharedClientState=this.dc(t),this.persistence=this._c(t),e.next=5,this.persistence.start();case 5:this.localStore=this.wc(t),this.gcScheduler=this.mc(t,this.localStore),this.indexBackfillerScheduler=this.gc(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mc",value:function(e,t){return null}},{key:"gc",value:function(e,t){return null}},{key:"wc",value:function(e){return ON(this.persistence,new PN,e.initialUser,this.wt)}},{key:"_c",value:function(e){return new bN(wN.Ms,this.wt)}},{key:"dc",value:function(e){return new sP}},{key:"terminate",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),AO=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this)).yc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return nt(n,[{key:"initialize",value:function(){var e=Ae(Ne().mark((function e(t){var r=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mr(ot(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.yc.initialize(this,t);case 4:return e.next=6,RO(this.yc.syncEngine);case 6:return e.next=8,ZP(this.yc.remoteStore);case 8:return e.next=10,this.persistence.ci((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"wc",value:function(e){return ON(this.persistence,new PN,e.initialUser,this.wt)}},{key:"mc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new YR(n,e.asyncQueue,t)}},{key:"gc",value:function(e,t){var n=new nT(t,this.persistence);return new tT(e.asyncQueue,n)}},{key:"_c",value:function(e){var t=RN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?MR.withCacheSize(this.cacheSizeBytes):MR.DEFAULT;return new IN(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,dP(),pP(),this.wt,this.sharedClientState,!!this.forceOwnership)}},{key:"dc",value:function(e){return new sP}}]),n}(PO),OO=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e,r,!1)).yc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return nt(n,[{key:"initialize",value:function(){var e=Ae(Ne().mark((function e(t){var r,i=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mr(ot(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.yc.syncEngine,e.t0=this.sharedClientState instanceof oP,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={kr:yO.bind(null,r),Or:SO.bind(null,r),Mr:IO.bind(null,r),Ri:xO.bind(null,r),Nr:pO.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.ci(function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gO(i.yc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"dc",value:function(e){var t=dP();if(!oP.V(t))throw new lS(cS.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=RN(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new oP(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(AO),DO=function(){function e(){et(this,e)}return nt(e,[{key:"initialize",value:function(){var e=Ae(Ne().mark((function e(t,n){var r=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return WA(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cO.bind(null,this.syncEngine),e.next=12,oA(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new yA}},{key:"createDatastore",value:function(e){var t,n=vP(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new fP(t));return function(e,t,n,r){return new bP(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return WA(o.syncEngine,e,0)},a=cP.V()?new cP:new uP,new wP(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var s=new DA(e,t,n,r,i,a);return o&&(s.ac=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=uS(t),nS("RemoteStore","RemoteStore shutting down."),n.lu.add(5),e.next=5,TP(n);case 5:n.du.shutdown(),n._u.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function LO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ae(Ne().mark((function r(){var i;return Ne().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var MO=function(){function e(t){et(this,e),this.observer=t,this.muted=!1}return nt(e,[{key:"next",value:function(e){this.observer.next&&this.Ic(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ic(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),FO=function(){function e(t,n){var r=this;et(this,e),this.Ec=t,this.wt=n,this.metadata=new hS,this.buffer=new Uint8Array,this.Ac=new TextDecoder("utf-8"),this.Rc().then((function(e){e&&e.Cu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return nt(e,[{key:"close",value:function(){return this.Ec.cancel()}},{key:"getMetadata",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fc",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Rc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Rc",value:function(){var e=Ae(Ne().mark((function e(){var t,n,r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.bc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Ac.decode(t),r=Number(n),isNaN(r)&&this.Pc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new TA(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"bc",value:function(){var e=Ae(Ne().mark((function e(){var t,n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Vc()<0)){e.next=7;break}return e.next=3,this.Sc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Vc())<0&&this.Pc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Sc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Pc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Ac.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Pc",value:function(e){throw this.Ec.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Sc",value:function(){var e=Ae(Ne().mark((function e(){var t,n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ec.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),UO=function(){function e(t){et(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return nt(e,[{key:"lookup",value:function(){var e=Ae(Ne().mark((function e(t){var n,r=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new lS(cS.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ae(Ne().mark((function e(t,n){var r,i,a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uS(t),i=eC(r.wt)+"/documents",a={documents:n.map((function(e){return $E(r.wt,e)}))},e.next=5,r.ao("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,s=new Map,o.forEach((function(e){var t=iC(r.wt,e);s.set(t.key.toString(),t)})),u=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());sS(!!t),u.push(t)})),u));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new dE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ae(Ne().mark((function e(){var t,n=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=PS.fromPath(t);n.mutations.push(new pE(r,n.precondition(r)))})),e.next=7,function(){var e=Ae(Ne().mark((function e(t,n){var r,i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=uS(t),i=eC(r.wt)+"/documents",a={writes:n.map((function(e){return aC(r.wt,e)}))},e.next=3,r.ro("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw oS();t=IS.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new lS(cS.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?XI.updateTime(t):XI.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(IS.min()))throw new lS(cS.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return XI.updateTime(t)}return XI.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),jO=function(){function e(t,n,r,i,a){et(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Dc=r.maxAttempts,this.So=new yP(this.asyncQueue,"transaction_retry")}return nt(e,[{key:"run",value:function(){this.Dc-=1,this.Cc()}},{key:"Cc",value:function(){var e=this;this.So.Io(Ae(Ne().mark((function t(){var n,r;return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new UO(e.datastore),(r=e.xc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Nc(t)}))}))})).catch((function(t){e.Nc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"xc",value:function(e){try{var t=this.updateFunction(e);return!ST(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Nc",value:function(e){var t=this;this.Dc>0&&this.kc(e)?(this.Dc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Cc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"kc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!yE(t)}return!1}}]),e}(),VO=function(){function e(t,n,r,i){var a=this;et(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Xx.UNAUTHENTICATED,this.clientId=_S.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nS("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return nS("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return nt(e,[{key:"getConfiguration",value:function(){var e=Ae(Ne().mark((function e(){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new lS(cS.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new hS;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ae(Ne().mark((function n(){var r;return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=hA(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function zO(e,t){return qO.apply(this,arguments)}function qO(){return qO=Ae(Ne().mark((function e(t,n){var r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),nS("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,DN(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),qO.apply(this,arguments)}function BO(e,t){return ZO.apply(this,arguments)}function ZO(){return ZO=Ae(Ne().mark((function e(t,n){var r,i;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,WO(t);case 3:return r=e.sent,nS("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return iA(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return iA(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ZO.apply(this,arguments)}function WO(e){return HO.apply(this,arguments)}function HO(){return HO=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return nS("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,zO(t,new PO);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),HO.apply(this,arguments)}function KO(e){return GO.apply(this,arguments)}function GO(){return GO=Ae(Ne().mark((function e(t){return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return nS("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,BO(t,new DO);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),GO.apply(this,arguments)}function QO(e){return WO(e).then((function(e){return e.persistence}))}function $O(e){return WO(e).then((function(e){return e.localStore}))}function YO(e){return KO(e).then((function(e){return e.remoteStore}))}function XO(e){return KO(e).then((function(e){return e.syncEngine}))}function JO(e){return eD.apply(this,arguments)}function eD(){return eD=Ae(Ne().mark((function e(t){var n,r;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,KO(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=LA.bind(null,n.syncEngine),r.onUnlisten=jA.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),eD.apply(this,arguments)}function tD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hS;return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function i(){return Ne().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new MO({next:function(a){t.enqueueAndForget((function(){return kA(e,o)}));var s=a.docs.has(n);!s&&a.fromCache?i.reject(new lS(cS.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&a.fromCache&&r&&"server"===r.source?i.reject(new lS(cS.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new SA(_I(n.path),a,{includeMetadataChanges:!0,Du:!0});return mA(e,o)},i.next=3,JO(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function nD(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new hS;return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function i(){return Ne().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new MO({next:function(n){t.enqueueAndForget((function(){return kA(e,o)})),n.fromCache&&"server"===r.source?i.reject(new lS(cS.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new SA(n,a,{includeMetadataChanges:!0,Du:!0});return mA(e,o)},i.next=3,JO(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var rD=new Map;function iD(e,t,n){if(!n)throw new lS(cS.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function aD(e,t,n,r){if(!0===t&&!0===r)throw new lS(cS.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function oD(e){if(!PS.isDocumentKey(e))throw new lS(cS.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function sD(e){if(PS.isDocumentKey(e))throw new lS(cS.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function uD(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":oS()}function cD(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new lS(cS.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=uD(e);throw new lS(cS.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function lD(e,t){if(t<=0)throw new lS(cS.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var hD=function(){function e(t){var n;if(et(this,e),void 0===t.host){if(void 0!==t.ssl)throw new lS(cS.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new lS(cS.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,aD("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return nt(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),fD=function(){function e(t,n,r){et(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hD({}),this._settingsFrozen=!1,t instanceof xT?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new lS(cS.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xT(e.options.projectId)}(t))}return nt(e,[{key:"app",get:function(){if(!this._app)throw new lS(cS.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new lS(cS.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hD(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new dS;switch(e.type){case"gapi":var t=e.client;return sS(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new mS(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new lS(cS.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=rD.get(e);t&&(nS("ComponentProvider","Removing Datastore"),rD.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function dD(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=cD(e,fD))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&iS("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,s;if("string"==typeof i.mockUserToken)o=i.mockUserToken,s=Xx.MOCK_USER;else{o=St(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new lS(cS.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new Xx(u)}e._authCredentials=new pS(new fS(o,s))}}var pD=function(){function e(t,n,r){et(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return nt(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new yD(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),vD=function(){function e(t,n,r){et(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return nt(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),yD=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this,e,r,_I(i)))._path=i,a.type="collection",a}return nt(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new pD(this.firestore,null,new PS(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(vD);function mD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=an(e),iD("collection","path",t),e instanceof fD){var a=CS.fromString.apply(CS,[t].concat(r));return sD(a),new yD(e,null,a)}if(!(e instanceof pD||e instanceof yD))throw new lS(cS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(CS.fromString.apply(CS,[t].concat(r)));return sD(o),new yD(e.firestore,null,o)}function gD(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=an(e),1===arguments.length&&(t=_S.I()),iD("doc","path",t),e instanceof fD){var a=CS.fromString.apply(CS,[t].concat(r));return oD(a),new pD(e,null,new PS(a))}if(!(e instanceof pD||e instanceof yD))throw new lS(cS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(CS.fromString.apply(CS,[t].concat(r)));return oD(o),new pD(e.firestore,e instanceof yD?e.converter:null,new PS(o))}function kD(e,t){return e=an(e),t=an(t),(e instanceof pD||e instanceof yD)&&(t instanceof pD||t instanceof yD)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function bD(e,t){return e=an(e),t=an(t),e instanceof vD&&t instanceof vD&&e.firestore===t.firestore&&CI(e._query,t._query)&&e.converter===t.converter}var _D=function(){function e(){var t=this;et(this,e),this.Oc=Promise.resolve(),this.Mc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new yP(this,"async_queue_retry"),this.Kc=function(){var e=pP();e&&nS("AsyncQueue","Visibility state changed to "+e.visibilityState),t.So.Eo()};var n=pP();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Kc)}return nt(e,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Gc(),this.Qc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Fc){this.Fc=!0,this.Uc=e||!1;var t=pP();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new hS;return this.Qc((function(){return t.Fc&&t.Uc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Mc.push(e),t.jc()}))}},{key:"jc",value:function(){var e=Ae(Ne().mark((function e(){var t=this;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Mc.length){e.next=14;break}return e.prev=1,e.next=4,this.Mc[0]();case 4:this.Mc.shift(),this.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),$S(e.t0)){e.next=12;break}throw e.t0;case 12:nS("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Mc.length>0&&this.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Qc",value:function(e){var t=this,n=this.Oc.then((function(){return t.Lc=!0,e().catch((function(e){t.Bc=e,t.Lc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw rS("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Lc=!1,e}))}));return this.Oc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Gc(),this.qc.indexOf(e)>-1&&(t=0);var i=lA.createAndSchedule(this,e,t,n,(function(e){return r.Wc(e)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&oS()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=Ae(Ne().mark((function e(){var t;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Oc,e.next=3,t;case 3:if(t!==this.Oc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t,n=it(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Jc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=it(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Yc",value:function(e){this.qc.push(e)}},{key:"Wc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function wD(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=it(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var xD=function(){function e(){et(this,e),this._progressObserver={},this._taskCompletionResolver=new hS,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return nt(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),SD=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new _D,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return nt(n,[{key:"_terminate",value:function(){return this._firestoreClient||ID(this),this._firestoreClient.terminate()}}]),n}(fD);function TD(e){return e._firestoreClient||ID(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ID(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new wT(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new VO(e._authCredentials,e._appCheckCredentials,e._queue,r)}function ED(e,t,n){var r=new hS;return e.asyncQueue.enqueue(Ae(Ne().mark((function i(){var a;return Ne().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,zO(e,n);case 3:return i.next=5,BO(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===cS.FAILED_PRECONDITION||e.code===cS.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function CD(e){return function(e){return e.asyncQueue.enqueue(Ae(Ne().mark((function t(){var n,r;return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,QO(e);case 2:return n=t.sent,t.next=5,YO(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=uS(e);return t.lu.delete(0),xP(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(TD(e=cD(e,SD)))}function RD(e){return function(e){return e.asyncQueue.enqueue(Ae(Ne().mark((function t(){var n,r;return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,QO(e);case 2:return n=t.sent,t.next=5,YO(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=uS(t)).lu.add(0),e.next=4,TP(n);case 4:n._u.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(TD(e=cD(e,SD)))}function ND(e,t){var n=TD(e=cD(e,SD)),r=new xD;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new FO(e,t)}(function(e,t){if(e instanceof Uint8Array)return LO(e,t);if(e instanceof ArrayBuffer)return LO(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,vP(t));e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=NO,t.next=3,XO(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function PD(e,t){return function(e,t){return e.asyncQueue.enqueue(Ae(Ne().mark((function n(){return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=uS(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ds.getNamedQuery(e,t)}))},n.next=3,$O(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(TD(e=cD(e,SD)),t).then((function(t){return t?new vD(e,null,t.query):null}))}function AD(e){if(e._initialized||e._terminated)throw new lS(cS.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var OD=function(){function e(){et(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new lS(cS.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new NS(n)}return nt(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var DD=function(){function e(t){et(this,e),this._byteString=t}return nt(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(pT.fromBase64String(t))}catch(t){throw new lS(cS.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(pT.fromUint8Array(t))}}]),e}(),LD=nt((function e(t){et(this,e),this._methodName=t})),MD=function(){function e(t,n){if(et(this,e),!isFinite(t)||t<-90||t>90)throw new lS(cS.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new lS(cS.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return nt(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return wS(this._lat,e._lat)||wS(this._long,e._long)}}]),e}(),FD=/^__.*__$/,UD=function(){function e(t,n,r){et(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return nt(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new sE(e,this.data,this.fieldMask,t,this.fieldTransforms):new oE(e,this.data,t,this.fieldTransforms)}}]),e}(),jD=function(){function e(t,n,r){et(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return nt(e,[{key:"toMutation",value:function(e,t){return new sE(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function VD(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oS()}}var zD=function(){function e(t,n,r,i,a,o){et(this,e),this.settings=t,this.databaseId=n,this.wt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Xc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return nt(e,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.sa(e),r}},{key:"ia",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(e){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(e){return sL(e,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Xc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.sa(this.path.get(e))}},{key:"sa",value:function(e){if(0===e.length)throw this.oa("Document fields must not be empty");if(VD(this.Zc)&&FD.test(e))throw this.oa('Document fields cannot begin and end with "__"')}}]),e}(),qD=function(){function e(t,n,r){et(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.wt=r||vP(t)}return nt(e,[{key:"aa",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new zD({Zc:e,methodName:t,ca:n,path:NS.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),e}();function BD(e){var t=e._freezeSettings(),n=vP(e._databaseId);return new qD(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ZD(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.aa(a.merge||a.mergeFields?2:0,t,n,i);rL("Data must be an object, but it was:",o,r);var s,u,c=tL(r,o);if(a.merge)s=new dT(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=it(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=iL(t,d,n);if(!o.contains(p))throw new lS(cS.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));uL(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}s=new dT(h),u=o.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=o.fieldTransforms;return new UD(new GT(c),s,u)}var WD=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Zc)throw 1===e.Zc?e.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):e.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(LD);function HD(e,t,n){return new zD({Zc:3,ca:t.settings.ca,methodName:e._methodName,na:n},t.databaseId,t.wt,t.ignoreUndefinedProperties)}var KD=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"_toFieldTransform",value:function(e){return new $I(e.path,new qI)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(LD),GD=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e)).ha=r,i}return nt(n,[{key:"_toFieldTransform",value:function(e){var t=HD(this,e,!0),n=this.ha.map((function(e){return eL(e,t)})),r=new BI(n);return new $I(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(LD),QD=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e)).ha=r,i}return nt(n,[{key:"_toFieldTransform",value:function(e){var t=HD(this,e,!0),n=this.ha.map((function(e){return eL(e,t)})),r=new WI(n);return new $I(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(LD),$D=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e)).la=r,i}return nt(n,[{key:"_toFieldTransform",value:function(e){var t=new KI(e.wt,FI(e.wt,this.la));return new $I(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(LD);function YD(e,t,n,r){var i=e.aa(1,t,n);rL("Data must be an object, but it was:",i,r);var a=[],o=GT.empty();aT(r,(function(e,r){var s=oL(t,e,n);r=an(r);var u=i.ia(s);if(r instanceof WD)a.push(s);else{var c=eL(r,u);null!=c&&(a.push(s),o.set(s,c))}}));var s=new dT(a);return new jD(o,s,i.fieldTransforms)}function XD(e,t,n,r,i,a){var o=e.aa(1,t,n),s=[iL(t,r,n)],u=[i];if(a.length%2!=0)throw new lS(cS.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)s.push(iL(t,a[c])),u.push(a[c+1]);for(var l=[],h=GT.empty(),f=s.length-1;f>=0;--f)if(!uL(l,s[f])){var d=s[f],p=u[f];p=an(p);var v=o.ia(d);if(p instanceof WD)l.push(d);else{var y=eL(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new dT(l);return new jD(h,m,o.fieldTransforms)}function JD(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return eL(n,e.aa(r?4:3,t))}function eL(e,t){if(nL(e=an(e)))return rL("Unsupported field value:",t,e),tL(e,t);if(e instanceof LD)return function(e,t){if(!VD(t.Zc))throw t.oa("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.oa("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.na&&4!==t.Zc)throw t.oa("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=it(e);try{for(a.s();!(n=a.n()).done;){var o=eL(n.value,t.ra(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(s){a.e(s)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=an(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return FI(t.wt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=TS.fromDate(e);return{timestampValue:ZE(t.wt,n)}}if(e instanceof TS){var r=new TS(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ZE(t.wt,r)}}if(e instanceof MD)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof DD)return{bytesValue:WE(t.wt,e._byteString)};if(e instanceof pD){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.oa("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:GE(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.oa("Unsupported field value: ".concat(uD(e)))}(e,t)}function tL(e,t){var n={};return oT(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):aT(e,(function(e,r){var i=eL(r,t.ea(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function nL(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof TS||e instanceof MD||e instanceof DD||e instanceof pD||e instanceof LD)}function rL(e,t,n){if(!nL(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=uD(n);throw"an object"===r?t.oa(e+" a custom object"):t.oa(e+" "+r)}}function iL(e,t,n){if((t=an(t))instanceof OD)return t._internalPath;if("string"==typeof t)return oL(e,t);throw sL("Field path arguments must be of type string or ",e,!1,void 0,n)}var aL=new RegExp("[~\\*/\\[\\]]");function oL(e,t,n){if(t.search(aL)>=0)throw sL("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return lt(OD,(0,a.Z)(t.split(".")))._internalPath}catch(r){throw sL("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function sL(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,s="Function ".concat(t,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(a||o)&&(u+=" (found",a&&(u+=" in field ".concat(r)),o&&(u+=" in document ".concat(i)),u+=")"),new lS(cS.INVALID_ARGUMENT,s+e+u)}function uL(e,t){return e.some((function(e){return e.isEqual(t)}))}var cL=function(){function e(t,n,r,i,a){et(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return nt(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new pD(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new lL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(hL("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),lL=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"data",value:function(){return Mr(ot(n.prototype),"data",this).call(this)}}]),n}(cL);function hL(e,t){return"string"==typeof t?oL(e,t):t instanceof OD?t._internalPath:t._delegate._internalPath}var fL=function(){function e(t,n){et(this,e),this.hasPendingWrites=t,this.fromCache=n}return nt(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),dL=function(e){at(n,e);var t=ct(n);function n(e,r,i,a,o,s){var u;return et(this,n),(u=t.call(this,e,r,i,a,s))._firestore=e,u._firestoreImpl=e,u.metadata=o,u}return nt(n,[{key:"exists",value:function(){return Mr(ot(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new pL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(hL("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(cL),pL=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Mr(ot(n.prototype),"data",this).call(this,e)}}]),n}(dL),vL=function(){function e(t,n,r,i){et(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new fL(i.hasPendingWrites,i.fromCache),this.query=r}return nt(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new pL(n._firestore,n._userDataWriter,r.key,r,new fL(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new lS(cS.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new pL(e._firestore,e._userDataWriter,t.doc.key,t.doc,new fL(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new pL(e._firestore,e._userDataWriter,t.doc.key,t.doc,new fL(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:yL(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function yL(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oS()}}function mL(e,t){return e instanceof dL&&t instanceof dL?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof vL&&t instanceof vL&&e._firestore===t._firestore&&bD(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function gL(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new lS(cS.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kL=nt((function e(){et(this,e)}));function bL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var _L=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this)).fa=e,a.da=r,a._a=i,a.type="where",a}return nt(n,[{key:"_apply",value:function(e){var t=BD(e.firestore),n=function(e,t,n,r,i,a,o){var s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new lS(cS.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){AL(o,a);var u,c=[],l=it(o);try{for(l.s();!(u=l.n()).done;){var h=u.value;c.push(PL(r,e,h))}}catch(d){l.e(d)}finally{l.f()}s={arrayValue:{values:c}}}else s=PL(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||AL(o,a),s=JD(n,"where",o,"in"===a||"not-in"===a);var f=aI.create(i,a,s);return function(e,t){if(t.ht()){var n=xI(e);if(null!==n&&!n.isEqual(t.field))throw new lS(cS.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=wI(e);null!==r&&OL(e,t.field,r)}var i=function(e,t){var n,r=it(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new lS(cS.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new lS(cS.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.fa,this.da,this._a);return new vD(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new kI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(kL);var wL=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this)).fa=e,i.wa=r,i.type="orderBy",i}return nt(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new lS(cS.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new lS(cS.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vI(t,n);return function(e,t){if(null===wI(e)){var n=xI(e);null!==n&&OL(e,n,t.field)}}(e,r),r}(e._query,this.fa,this.wa);return new vD(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new kI(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(kL);var xL=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this)).type=e,a.ma=r,a.ga=i,a}return nt(n,[{key:"_apply",value:function(e){return new vD(e.firestore,e.converter,EI(e._query,this.ma,this.ga))}}]),n}(kL);var SL=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return nt(n,[{key:"_apply",value:function(e){var t=NL(e,this.type,this.ya,this.pa);return new vD(e.firestore,e.converter,function(e,t){return new kI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(kL);function TL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new SL("startAt",t,!0)}function IL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new SL("startAfter",t,!1)}var EL=function(e){at(n,e);var t=ct(n);function n(e,r,i){var a;return et(this,n),(a=t.call(this)).type=e,a.ya=r,a.pa=i,a}return nt(n,[{key:"_apply",value:function(e){var t=NL(e,this.type,this.ya,this.pa);return new vD(e.firestore,e.converter,function(e,t){return new kI(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(kL);function CL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new EL("endBefore",t,!1)}function RL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new EL("endAt",t,!0)}function NL(e,t,n,r){if(n[0]=an(n[0]),n[0]instanceof cL)return function(e,t,n,r,i){if(!r)throw new lS(cS.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],s=it(TI(e));try{for(s.s();!(a=s.n()).done;){var u=a.value;if(u.field.isKeyField())o.push(MT(t,r.key));else{var c=r.data.field(u.field);if(kT(c))throw new lS(cS.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new lS(cS.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){s.e(h)}finally{s.f()}return new pI(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=BD(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new lS(cS.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var s=[],u=0;u<i.length;u++){var c=i[u];if(o[u].field.isKeyField()){if("string"!=typeof c)throw new lS(cS.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!SI(e)&&-1!==c.indexOf("/"))throw new lS(cS.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(CS.fromString(c));if(!PS.isDocumentKey(l))throw new lS(cS.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new PS(l);s.push(MT(t,h))}else{var f=JD(n,r,c);s.push(f)}}return new pI(s,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function PL(e,t,n){if("string"==typeof(n=an(n))){if(""===n)throw new lS(cS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SI(t)&&-1!==n.indexOf("/"))throw new lS(cS.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(CS.fromString(n));if(!PS.isDocumentKey(r))throw new lS(cS.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return MT(e,new PS(r))}if(n instanceof pD)return MT(e,n._key);throw new lS(cS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(uD(n),"."))}function AL(e,t){if(!Array.isArray(e)||0===e.length)throw new lS(cS.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new lS(cS.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function OL(e,t,n){if(!n.isEqual(t))throw new lS(cS.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var DL={maxAttempts:5},LL=function(){function e(){et(this,e)}return nt(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(RT(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mT(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gT(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw oS()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return aT(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new MD(mT(e.latitude),mT(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=bT(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_T(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=yT(e);return new TS(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=CS.fromString(e);sS(gC(n));var r=new xT(n.get(1),n.get(3)),i=new PS(n.popFirst(5));return r.isEqual(t)||rS("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function ML(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var FL=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this)).firestore=e,r}return nt(n,[{key:"convertBytes",value:function(e){return new DD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new pD(this.firestore,null,t)}}]),n}(LL),UL=function(){function e(t,n){et(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=BD(t)}return nt(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=jL(e,this._firestore),i=ML(r.converter,t,n),a=ZD(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,XI.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=jL(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=an(t))||t instanceof OD?XD(this._dataReader,"WriteBatch.update",i._key,t,n,o):YD(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,XI.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=jL(e,this._firestore);return this._mutations=this._mutations.concat(new dE(t._key,XI.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new lS(cS.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function jL(e,t){if((e=an(e)).firestore!==t)throw new lS(cS.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var VL=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this)).firestore=e,r}return nt(n,[{key:"convertBytes",value:function(e){return new DD(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new pD(this.firestore,null,t)}}]),n}(LL);function zL(e){e=cD(e,pD);var t=cD(e.firestore,SD),n=TD(t),r=new VL(t);return function(e,t){var n=new hS;return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function r(){return Ne().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ae(Ne().mark((function e(t,n,r){var i,a;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=uS(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new lS(cS.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=hA(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,$O(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new dL(t,r,e._key,n,new fL(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function qL(e){e=cD(e,vD);var t=cD(e.firestore,SD),n=TD(t),r=new VL(t);return function(e,t){var n=new hS;return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function r(){return Ne().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ae(Ne().mark((function e(t,n,r){var i,a,o,s,u;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ZN(t,n,!0);case 3:i=e.sent,a=new PA(n,i.ji),o=a.Ku(i.documents),s=a.applyChanges(o,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=hA(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(u);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,$O(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new vL(t,r,e,n)}))}function BL(e,t,n){e=cD(e,pD);var r=cD(e.firestore,SD),i=ML(e.converter,t,n);return KL(r,[ZD(BD(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,XI.none())])}function ZL(e,t,n){e=cD(e,pD);for(var r=cD(e.firestore,SD),i=BD(r),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return KL(r,[("string"==typeof(t=an(t))||t instanceof OD?XD(i,"updateDoc",e._key,t,n,o):YD(i,"updateDoc",e._key,t)).toMutation(e._key,XI.exists(!0))])}function WL(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=an(e);var s={includeMetadataChanges:!1},u=0;"object"!=typeof n[u]||wD(n[u])||(s=n[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(wD(n[u])){var d=n[u];n[u]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[u+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[u+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof pD)l=cD(e.firestore,SD),h=_I(e._key.path),c={next:function(t){n[u]&&n[u](GL(l,e,t))},error:n[u+1],complete:n[u+2]};else{var p=cD(e,vD);l=cD(p.firestore,SD),h=p._query;var v=new VL(l);c={next:function(e){n[u]&&n[u](new vL(l,v,p,e))},error:n[u+1],complete:n[u+2]},gL(e._query)}return function(e,t,n,r){var i=new MO(r),a=new SA(t,i,n);return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=mA,t.next=3,JO(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Tc(),e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=kA,t.next=3,JO(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(TD(l),h,f,c)}function HL(e,t){return function(e,t){var n=new MO(t);return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){uS(e).Tu.add(t),t.next()},t.next=3,JO(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Tc(),e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){uS(e).Tu.delete(t)},t.next=3,JO(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(TD(e=cD(e,SD)),wD(t)?t:{next:t})}function KL(e,t){return function(e,t){var n=new hS;return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function r(){return Ne().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=zA,r.next=3,XO(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(TD(e),t)}function GL(e,t,n){var r=n.docs.get(t._key),i=new VL(e);return new dL(e,i,t._key,r,new fL(n.hasPendingWrites,n.fromCache),t.converter)}var QL=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e,r))._firestore=e,i}return nt(n,[{key:"get",value:function(e){var t=this,r=jL(e,this._firestore),i=new VL(this._firestore);return Mr(ot(n.prototype),"get",this).call(this,e).then((function(e){return new dL(t._firestore,i,r._key,e._document,new fL(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){et(this,e),this._firestore=t,this._transaction=n,this._dataReader=BD(t)}return nt(e,[{key:"get",value:function(e){var t=this,n=jL(e,this._firestore),r=new FL(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return oS();var i=e[0];if(i.isFoundDocument())return new cL(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new cL(t._firestore,r,n._key,null,n.converter);throw oS()}))}},{key:"set",value:function(e,t,n){var r=jL(e,this._firestore),i=ML(r.converter,t,n),a=ZD(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=jL(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),s=3;s<a;s++)o[s-3]=arguments[s];return r="string"==typeof(t=an(t))||t instanceof OD?XD(this._dataReader,"Transaction.update",i._key,t,n,o):YD(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=jL(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function $L(e,t,n){e=cD(e,SD);var r=Object.assign(Object.assign({},DL),n);return function(e){if(e.maxAttempts<1)throw new lS(cS.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new hS;return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function i(){var a;return Ne().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return KO(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new jO(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(TD(e),(function(n){return t(new QL(e,n))}),r)}function YL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new GD("arrayUnion",t)}function XL(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new QD("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Jx=e}(tr),Gn(new on("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new SD(i,new vS(e.getProvider("auth-internal")),new kS(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),sr(Yx,"3.4.12",e),sr(Yx,"3.4.12","esm2017")}();function JL(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new lS("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function eM(){if("undefined"===typeof Uint8Array)throw new lS("unimplemented","Uint8Arrays are not available in this environment.")}function tM(){if("undefined"==typeof atob)throw new lS("unimplemented","Blobs are unavailable in Firestore in this environment.")}var nM=function(){function e(t){et(this,e),this._delegate=t}return nt(e,[{key:"toBase64",value:function(){return tM(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return eM(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return tM(),new e(DD.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return eM(),new e(DD.fromUint8Array(t))}}]),e}();function rM(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=it(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var iM=function(){function e(){et(this,e)}return nt(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){AD(e=cD(e,SD));var n=TD(e),r=e._freezeSettings(),i=new DO;return ED(n,i,new AO(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){AD(e=cD(e,SD));var t=TD(e),n=e._freezeSettings(),r=new DO;return ED(t,r,new OO(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new lS(cS.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new hS;return e._queue.enqueueAndForgetEvenWhileRestricted(Ae(Ne().mark((function n(){return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ae(Ne().mark((function e(t){var n;return Ne().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(KS.V()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,KS.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(RN(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),aM=function(){function e(t,n,r){var i=this;et(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof xT||(this._appCompat=t)}return nt(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||iS("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};dD(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return CD(this._delegate)}},{key:"disableNetwork",value:function(){return RD(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&aD("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new hS;return e.asyncQueue.enqueueAndForget(Ae(Ne().mark((function n(){return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=XA,n.next=3,XO(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(TD(e=cD(e,SD)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return HL(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new lS("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new kM(this,mD(this._delegate,e))}catch(t){throw hM(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new lM(this,gD(this._delegate,e))}catch(t){throw hM(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new yM(this,function(e,t){if(e=cD(e,fD),iD("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new lS(cS.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new vD(e,null,function(e){return new kI(CS.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw hM(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return $L(this._delegate,(function(n){return e(new sM(t,n))}))}},{key:"batch",value:function(){var e=this;return TD(this._delegate),new uM(new UL(this._delegate,(function(t){return KL(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return ND(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return PD(this._delegate,e).then((function(e){return e?new yM(t,e):null}))}}]),e}(),oM=function(e){at(n,e);var t=ct(n);function n(e){var r;return et(this,n),(r=t.call(this)).firestore=e,r}return nt(n,[{key:"convertBytes",value:function(e){return new nM(new DD(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return lM.forKey(t,this.firestore,null)}}]),n}(LL);var sM=function(){function e(t,n){et(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new oM(t)}return nt(e,[{key:"get",value:function(e){var t=this,n=bM(e);return this._delegate.get(n).then((function(e){return new pM(t._firestore,new dL(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=bM(e);return n?(JL("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=bM(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bM(e);return this._delegate.delete(t),this}}]),e}(),uM=function(){function e(t){et(this,e),this._delegate=t}return nt(e,[{key:"set",value:function(e,t,n){var r=bM(e);return n?(JL("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,s=bM(e);2===arguments.length?this._delegate.update(s,t):(o=this._delegate).update.apply(o,[s,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=bM(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),cM=function(){function e(t,n,r){et(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return nt(e,[{key:"fromFirestore",value:function(e,t){var n=new pL(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vM(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new oM(t),n),i.set(n,a)),a}}]),e}();cM.INSTANCES=new WeakMap;var lM=function(){function e(t,n){et(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new oM(t)}return nt(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new kM(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new kM(this.firestore,mD(this._delegate,e))}catch(t){throw hM(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=an(e))instanceof pD&&kD(this._delegate,e)}},{key:"set",value:function(e,t){t=JL("DocumentReference.set",t);try{return t?BL(this._delegate,e,t):BL(this._delegate,e)}catch(n){throw hM(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ZL(this._delegate,e):ZL.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw hM(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return KL(cD(e.firestore,SD),[new dE(e._key,XI.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=fM(n),a=dM(n,(function(t){return new pM(e.firestore,new dL(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return WL(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?zL(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=cD(e,pD);var t=cD(e.firestore,SD);return tD(TD(t),e._key,{source:"server"}).then((function(n){return GL(t,e,n)}))}(this._delegate):function(e){e=cD(e,pD);var t=cD(e.firestore,SD);return tD(TD(t),e._key).then((function(n){return GL(t,e,n)}))}(this._delegate),t.then((function(e){return new pM(n.firestore,new dL(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(cM.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new lS("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new pD(n._delegate,r,new PS(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new pD(n._delegate,r,t))}}]),e}();function hM(e,t,n){return e.message=e.message.replace(t,n),e}function fM(e){var t,n=it(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!rM(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function dM(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=rM(e[0])?e[0]:rM(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var pM=function(){function e(t,n){et(this,e),this._firestore=t,this._delegate=n}return nt(e,[{key:"ref",get:function(){return new lM(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return mL(this._delegate,e._delegate)}}]),e}(),vM=function(e){at(n,e);var t=ct(n);function n(){return et(this,n),t.apply(this,arguments)}return nt(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||oS()}(void 0!==t),t}}]),n}(pM),yM=function(){function e(t,n){et(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new oM(t)}return nt(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,bL(this._delegate,function(e,t,n){var r=t,i=hL("where",e);return new _L(i,r,n)}(t,n,r)))}catch(i){throw hM(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,bL(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=hL("orderBy",e);return new wL(n,t)}(t,n)))}catch(r){throw hM(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,bL(this._delegate,function(e){return lD("limit",e),new xL("limit",e,"F")}(t)))}catch(n){throw hM(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,bL(this._delegate,function(e){return lD("limitToLast",e),new xL("limitToLast",e,"L")}(t)))}catch(n){throw hM(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,bL(this._delegate,TL.apply(void 0,arguments)))}catch(t){throw hM(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,bL(this._delegate,IL.apply(void 0,arguments)))}catch(t){throw hM(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,bL(this._delegate,CL.apply(void 0,arguments)))}catch(t){throw hM(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,bL(this._delegate,RL.apply(void 0,arguments)))}catch(t){throw hM(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return bD(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?qL(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=cD(e,vD);var t=cD(e.firestore,SD),n=TD(t),r=new VL(t);return nD(n,e._query,{source:"server"}).then((function(n){return new vL(t,r,e,n)}))}(this._delegate):function(e){e=cD(e,vD);var t=cD(e.firestore,SD),n=TD(t),r=new VL(t);return gL(e._query),nD(n,e._query).then((function(n){return new vL(t,r,e,n)}))}(this._delegate),t.then((function(e){return new gM(n.firestore,new vL(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=fM(n),a=dM(n,(function(t){return new gM(e.firestore,new vL(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return WL(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(cM.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),mM=function(){function e(t,n){et(this,e),this._firestore=t,this._delegate=n}return nt(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new vM(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),gM=function(){function e(t,n){et(this,e),this._firestore=t,this._delegate=n}return nt(e,[{key:"query",get:function(){return new yM(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new vM(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new mM(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new vM(n._firestore,r))}))}},{key:"isEqual",value:function(e){return mL(this._delegate,e._delegate)}}]),e}(),kM=function(e){at(n,e);var t=ct(n);function n(e,r){var i;return et(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return nt(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new lM(this.firestore,e):null}},{key:"doc",value:function(e){try{return new lM(this.firestore,void 0===e?gD(this._delegate):gD(this._delegate,e))}catch(t){throw hM(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=cD(e.firestore,SD),r=gD(e),i=ML(e.converter,t);return KL(n,[ZD(BD(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,XI.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new lM(t.firestore,e)}))}},{key:"isEqual",value:function(e){return kD(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(cM.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(yM);function bM(e){return cD(e,pD)}var _M=function(){function e(){et(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=lt(OD,n)}return nt(e,[{key:"isEqual",value:function(e){return(e=an(e))instanceof OD&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(NS.keyField().canonicalString())}}]),e}(),wM=function(){function e(t){et(this,e),this._delegate=t}return nt(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new KD("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new WD("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=YL.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=XL.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new $D("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),xM={Firestore:aM,GeoPoint:MD,Timestamp:TS,Blob:nM,Transaction:sM,WriteBatch:uM,DocumentReference:lM,DocumentSnapshot:pM,Query:yM,QueryDocumentSnapshot:vM,QuerySnapshot:gM,CollectionReference:kM,FieldPath:_M,FieldValue:wM,setLogLevel:function(e){!function(e){eS.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new on("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},xM)))}(e,(function(e,t){return new aM(e,t,new iM)})),e.registerVersion("@firebase/firestore-compat","0.1.21")}(Pr);Pr.initializeApp({apiKey:"AIzaSyCmu56wtahVRvO4tTltPelp9PDMEVBX6uo",authDomain:"messaging-app-mern-a5520.firebaseapp.com",projectId:"messaging-app-mern-a5520",storageBucket:"messaging-app-mern-a5520.appspot.com",messagingSenderId:"968253064421",appId:"1:968253064421:web:08eccc4f1cff965723000c"}).firestore();var SM=Pr.auth(),TM=new Pr.auth.GoogleAuthProvider,IM="SET_USER",EM=function(e,t){return console.log(t),t.type===IM?kn(kn({},e),{},{user:t.user}):e},CM=n.p+"static/media/Animal_Crossing_Leaf.ea6c85a12c95b7e9ef97.png";var RM=function(){var e=C(),t=(0,o.Z)(e,2);!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t[0]);var n=t[1];return(0,p.jsx)("div",{className:"login",children:(0,p.jsxs)("div",{className:"login_container",children:[(0,p.jsx)("img",{src:CM,alt:"Leaf logo from Animal Crossing"}),(0,p.jsx)("div",{className:"login_text",children:(0,p.jsx)("h1",{children:"Sing In into Messaging App"})}),(0,p.jsx)(Je,{onClick:function(){SM.signInWithPopup(TM).then((function(e){n({type:IM,user:e.user})})).catch((function(e){return alert(e.message)}))},children:"Sign In with Google"})]})})};var NM=function(){var e=(0,t.useState)([]),n=(0,o.Z)(e,2),r=n[0],i=n[1],s=C(),u=(0,o.Z)(s,2),c=u[0].user;return u[1],(0,t.useEffect)((function(){je.get("/messages/sync").then((function(e){i(e.data)}))}),[]),(0,t.useEffect)((function(){var e=new(qe())("be99c78998a1b166be59",{cluster:"eu"}).subscribe("messages");return e.bind("inserted",(function(e){i([].concat((0,a.Z)(r),[e]))})),function(){e.unbind_all(),e.unsubscribe()}}),[r]),(0,p.jsx)("div",{className:"app",children:c?(0,p.jsxs)("div",{className:"app_body",children:[(0,p.jsx)(Ce,{messages:r}),(0,p.jsx)(Ve,{messages:r})]}):(0,p.jsx)(RM,{})})},PM=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,p.jsx)(t.StrictMode,{children:(0,p.jsx)(E,{initialState:{user:null},reducer:EM,children:(0,p.jsx)(NM,{})})})),PM()}()}();
//# sourceMappingURL=main.605fec54.js.map